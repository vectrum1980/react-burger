(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{114:function(e,t,n){e.exports={overlay:"modal-overlay_overlay__SQenM"}},116:function(e,t,n){e.exports={"element-price":"price-item_element-price__3PXmk"}},118:function(e,t,n){e.exports={item:"burger-item_item__2E7My"}},119:function(e,t,n){e.exports={columns:"feed_columns__aZzHE"}},127:function(e,t,n){},17:function(e,t,n){e.exports={header:"app-header_header__1q5EZ",header__container:"app-header_header__container__1W210",container:"app-header_container__12FSj",container__nav:"app-header_container__nav__1QXAZ","header__link-text":"app-header_header__link-text__2wBby",header__link:"app-header_header__link__3fFEM","header__link-active":"app-header_header__link-active__3EwBQ"}},214:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(37),s=n.n(c),i=(n(127),n(38)),o=n(12),l=n(39),u=n.n(l),d=n(5),j=n(3),b=n.n(j),m=n(114),_=n.n(m),p=n(0),O=function(e){var t=e.onClick;return Object(p.jsx)("div",{className:_.a.overlay,onClick:t})},x=document.getElementById("modal-window"),f=function(e){var t=e.title,n=e.children,a=Object(o.g)(),c=function(e){"Escape"===e.code&&i()},i=function(){a.goBack()};return Object(r.useEffect)((function(){return window.addEventListener("keydown",c),function(){window.removeEventListener("keydown",c)}})),s.a.createPortal(Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:b()(u.a.container,"p-10"),children:[Object(p.jsxs)("div",{className:u.a.header,children:[t&&Object(p.jsx)("h3",{className:b()("text text_type_main-medium",u.a.title),children:t}),Object(p.jsx)("div",{className:b()(u.a["close-icon"]),onClick:i,children:Object(p.jsx)(d.CloseIcon,{type:"primary"})})]}),Object(p.jsx)("div",{className:u.a.body,children:n})]}),Object(p.jsx)(O,{onClick:i})]}),x)},h=n(11),g=n(28),v=n.n(g),y=n(58),E=i.c,N=function(){var e=Object(o.i)().id,t=Object(r.useState)(),n=Object(h.a)(t,2),a=n[0],c=n[1],s=E((function(e){return e.ingredients})).ingredients;return Object(r.useEffect)((function(){if(s&&s.length){var t=Object(y.find)(s,(function(t){return t._id===e}));c(t)}}),[s,e]),Object(p.jsx)(p.Fragment,{children:a&&Object(p.jsxs)("div",{className:v.a.conteainer,children:[Object(p.jsx)("img",{src:a.image_large,alt:"\u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(p.jsx)("h3",{className:v.a.title,children:a.name}),Object(p.jsx)("p",{className:b()(v.a.desc,"text text_type_main-default"),children:"\u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(p.jsxs)("div",{className:v.a.info,children:[Object(p.jsxs)("div",{className:v.a.item,children:[Object(p.jsx)("span",{className:"text text_type_main-small text_color_inactive",children:"\u041a\u0430\u043b\u043b\u043e\u0440\u0438\u0439,\u043a\u043a\u0430\u043b"}),Object(p.jsx)("span",{className:"text text_type_digits-default text_color_inactive",children:a.calories})]}),Object(p.jsxs)("div",{className:v.a.item,children:[Object(p.jsx)("span",{className:"text text_type_main-small text_color_inactive",children:"\u0411\u0435\u043b\u043a\u0438,\u0433"}),Object(p.jsx)("span",{className:"text text_type_digits-default text_color_inactive",children:a.proteins})]}),Object(p.jsxs)("div",{className:v.a.item,children:[Object(p.jsx)("span",{className:"text text_type_main-small text_color_inactive",children:"\u0416\u0438\u0440\u044b,\u0433"}),Object(p.jsx)("span",{className:"text text_type_digits-default text_color_inactive",children:a.fat})]}),Object(p.jsxs)("div",{className:v.a.item,children:[Object(p.jsx)("span",{className:"text text_type_main-small text_color_inactive",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b,\u0433"}),Object(p.jsx)("span",{className:"text text_type_digits-default text_color_inactive",children:a.carbohydrates})]})]})]})})},S=n(6),R=n(17),w=n.n(R),T=function(){var e=!!Object(o.j)({path:On.HOME,exact:!0}),t=!!Object(o.j)(On.ORDERS),n=!!Object(o.j)(On.PROFILE);return Object(p.jsx)("header",{className:w.a.header,children:Object(p.jsxs)("div",{className:w.a.header__container,children:[Object(p.jsxs)("div",{className:w.a.container__nav,children:[Object(p.jsxs)(S.c,{to:On.HOME,activeClassName:b()(w.a["header__link-active"]),className:w.a.header__link,children:[Object(p.jsx)(d.BurgerIcon,{type:e?"primary":"secondary"}),Object(p.jsx)("span",{className:b()(w.a["header__link-text"],"text text_type_main-default"),children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]}),Object(p.jsxs)(S.c,{to:On.ORDERS,style:{marginLeft:10},activeClassName:b()(w.a["header__link-active"]),className:w.a.header__link,children:[Object(p.jsx)(d.ListIcon,{type:t?"primary":"secondary"}),Object(p.jsx)("span",{className:b()(w.a["header__link-text"],"text text_type_main-default"),children:"\u041b\u0435\u043d\u0442\u0430 \u0417\u0430\u043a\u0430\u0437\u043e\u0432"})]})]}),Object(p.jsx)(S.b,{to:On.HOME,children:Object(p.jsx)(d.Logo,{})}),Object(p.jsx)("div",{className:w.a.container__nav,children:Object(p.jsxs)(S.c,{to:On.PROFILE,style:{marginLeft:100},activeClassName:b()(w.a["header__link-active"]),className:w.a.header__link,children:[Object(p.jsx)(d.ProfileIcon,{type:n?"primary":"secondary"}),Object(p.jsx)("span",{className:b()(w.a["header__link-text"],"text text_type_main-default"),children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u041a\u0430\u0431\u0438\u043d\u0435\u0442"})]})})]})})},C=n(2),k=n(116),I=n.n(k),A=function(e){var t=e.price,n=e.classes;return Object(p.jsxs)("span",{className:b()(I.a["element-price"],"text",[n]),children:[t,Object(p.jsx)(d.CurrencyIcon,{type:"primary"})]})},U=n(63),D=n.n(U),F=n(220),q=function(e){var t=Object(F.a)({type:"ingredient",item:e,collect:function(e){return{isDrag:e.isDragging()}}}),n=Object(h.a)(t,2),r=n[0].isDrag,a=n[1],c=E((function(e){return e.ingredients.burgerIngredients})),s=c.counts,i=c.bun,o="bun"===e.type&&i&&i._id===e._id?2:s[e._id]&&s[e._id],l=r?.5:1;return Object(p.jsxs)("div",{className:b()(D.a.card),ref:a,"data-cy":"ingredient",style:{opacity:l},children:[Object(p.jsx)("img",{className:b()(D.a.image,"mb-1"),src:e.image_large,alt:e.name}),o?Object(p.jsx)(d.Counter,{count:o,size:"small"}):null,Object(p.jsx)(A,{price:e.price,classes:"text_type_main-medium mr-1"}),Object(p.jsx)("p",{className:b()("text text_type_main-default",D.a.container__description),children:e.name})]})},P=n(47),G=n.n(P),L=a.a.forwardRef((function(e,t){var n=e.title,r=e.ingredients,a=e.id,c=Object(o.h)();return Object(p.jsxs)("section",{className:"mb-10",children:[Object(p.jsx)("h2",{id:a,ref:t,className:b()(G.a.ingredients__title,"text","text_type_main-medium","mb-6"),children:n}),Object(p.jsx)("ul",{className:b()(G.a.list,"ml-4"),children:r.map((function(e){return Object(p.jsx)("li",{className:G.a["list-item"],children:Object(p.jsx)(S.b,{to:{pathname:"/ingredients/".concat(e._id),state:{background:c}},className:G.a.link,children:Object(p.jsx)(q,Object(C.a)({},e))})},e._id)}))})]})})),B=n(89),W=n.n(B),H=function(){var e=Object(r.useState)("bun"),t=Object(h.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(null),s=Object(h.a)(c,2),i=s[0],o=s[1],l=E((function(e){return e.ingredients})).ingredients;Object(r.useEffect)((function(){if(l&&l.length){var e=Object(y.groupBy)(l,(function(e){return e.type}));o(e)}}),[l]);var u=Object(r.useRef)(null),j=Object(r.useRef)(null),m=Object(r.useRef)(null),_=Object(r.useRef)(null);return Object(r.useEffect)((function(){var e,t,r;"bun"===n&&(null===j||void 0===j||null===(e=j.current)||void 0===e||e.scrollIntoView()),"sauces"===n&&(null===m||void 0===m||null===(t=m.current)||void 0===t||t.scrollIntoView()),"fillings"===n&&(null===_||void 0===_||null===(r=_.current)||void 0===r||r.scrollIntoView())}),[n]),Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("section",{children:[Object(p.jsx)("h1",{className:b()("text","text_type_main-large"),children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0411\u0443\u0440\u0433\u0435\u0440"}),Object(p.jsxs)("div",{className:b()("text","text_type_main-default","mb-10",W.a.menu),children:[Object(p.jsx)(d.Tab,{value:"bun",active:"bun"===n,onClick:a,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(p.jsx)(d.Tab,{value:"sauces",active:"sauces"===n,onClick:a,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(p.jsx)(d.Tab,{value:"fillings",active:"fillings"===n,onClick:a,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]}),i&&Object(p.jsxs)("section",{className:b()(W.a.container),ref:u,onScroll:function(){if(u.current&&j.current&&m.current&&_.current){var e,t,n,r,c,s,i,o,l,d,b,p,O=Math.abs((null===u||void 0===u||null===(e=u.current)||void 0===e||null===(t=e.getBoundingClientRect())||void 0===t?void 0:t.top)-(null===j||void 0===j||null===(n=j.current)||void 0===n||null===(r=n.getBoundingClientRect())||void 0===r?void 0:r.top)),x=Math.abs((null===u||void 0===u||null===(c=u.current)||void 0===c||null===(s=c.getBoundingClientRect())||void 0===s?void 0:s.top)-(null===(i=m.current)||void 0===i||null===(o=i.getBoundingClientRect())||void 0===o?void 0:o.top)),f=Math.abs((null===u||void 0===u||null===(l=u.current)||void 0===l||null===(d=l.getBoundingClientRect())||void 0===d?void 0:d.top)-(null===(b=_.current)||void 0===b||null===(p=b.getBoundingClientRect())||void 0===p?void 0:p.top)),h=Math.min(O,x,f);a(h===O?"bun":h===x?"sauces":"fillings")}},children:[Object(p.jsx)(L,{title:"\u0411\u0443\u043b\u043a\u0438",ingredients:i.bun,id:"bun",ref:j}),Object(p.jsx)(L,{title:"\u0421\u043e\u0443\u0441\u044b",ingredients:i.sauce,id:"sauces",ref:m}),Object(p.jsx)(L,{title:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",ingredients:i.main,id:"fillings",ref:_})]})]})})},M=n(48),z=n.n(M),V=n(118),Y=n.n(V),J=n(221),K=function(e){var t=e.item,n=e.index,a=e.deleteIngredient,c=e.moveItem,s=t._id,i=Object(r.useRef)(null),o=Object(J.a)({accept:"item",collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var r;if(i.current){var a=e.index,s=n;if(a!==s){var o=null===(r=i.current)||void 0===r?void 0:r.getBoundingClientRect(),l=(o.bottom-o.top)/2,u=t.getClientOffset().y-o.top;a<s&&u<l||a>s&&u>l||(c(a,s),e.index=s)}}}}),l=Object(h.a)(o,2)[1],u=Object(F.a)({type:"item",item:function(){return{id:s,index:n}},collect:function(e){return{isDrag:e.isDragging()}}}),j=Object(h.a)(u,2),b=j[0].isDrag?0:1;return(0,j[1])(l(i)),Object(p.jsxs)("li",{className:Y.a.item,ref:i,style:{opacity:b},children:[Object(p.jsx)(d.DragIcon,{type:"primary"}),Object(p.jsx)(d.ConstructorElement,{text:t.name,price:t.price,thumbnail:t.image,handleClose:a})]})},Q=function(){return Object(i.b)()},X="GET_ORDER_REQUEST",Z="GET_ORDER_SUCCESS",$="GET_ORDER_FAILED",ee="CLEAR_ORDER_NUMBER",te="CREATE_ORDER_REQUEST",ne="CREATE_ORDER_SUCCESS",re="CREATE_ORDER_FAILED",ae="GET_USER_ORDER_REQUEST",ce="GET_USER_ORDER_SUCCESS",se="GET_USER_ORDER_FAILED",ie=n(18),oe=n(8),le=n.n(oe),ue="https://norma.nomoreparties.space/api",de=function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()[]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},je=function(e,t,n){var r=(n=Object(C.a)({path:"/"},n)).expires,a=new Date;"number"==typeof r&&r&&(a.setTime(a.getTime()+1e3*r),r=n.expires=Number(a)),r&&a.toUTCString&&(n.expires=a.toUTCString());var c=e+"="+(t=encodeURIComponent(t));for(var s in n){c+="; "+s;var i=n[s];!0!==i&&(c+="="+i)}document.cookie=c},be=function(e){je(e,!1,{expires:-1})},me=function(e){return e.ok?e.json():e.json?e.json().then((function(e){return Promise.reject(e)})):Promise.reject(e)},_e={ingredients:{getIngredients:function(){var e=Object(ie.a)(le.a.mark((function e(){var t;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ue,"/ingredients"),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.abrupt("return",me(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},orders:{addOrdersRequest:function(){var e=Object(ie.a)(le.a.mark((function e(t){var n;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ue,"/orders"),{method:"POST",body:JSON.stringify({ingredients:t}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+de("token")}});case 2:return n=e.sent,e.abrupt("return",me(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getOrderNumber:function(){var e=Object(ie.a)(le.a.mark((function e(t){var n;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ue,"/orders"),{method:"POST",body:JSON.stringify({ingredients:t}),headers:{"Content-Type":"application/json"}});case 2:return n=e.sent,e.abrupt("return",me(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getOrderRequest:function(){var e=Object(ie.a)(le.a.mark((function e(t){var n;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ue,"/orders/").concat(t),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return n=e.sent,e.abrupt("return",me(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getUserOrderRequest:function(){var e=Object(ie.a)(le.a.mark((function e(t){var n;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ue,"/orders/").concat(t),{method:"GET",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:"Bearer "+de("token")}});case 2:return n=e.sent,e.abrupt("return",me(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},auth:{register:function(){var e=Object(ie.a)(le.a.mark((function e(t){var n;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ue,"/auth/register"),{method:"POST",cache:"no-cache",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 2:return n=e.sent,e.abrupt("return",me(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),signIn:function(){var e=Object(ie.a)(le.a.mark((function e(t){var n;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ue,"/auth/login"),{method:"POST",cache:"no-cache",body:JSON.stringify({email:t.email,password:t.password}),headers:{"Content-Type":"application/json"}});case 2:return n=e.sent,e.abrupt("return",me(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getUser:function(){var e=Object(ie.a)(le.a.mark((function e(){var t;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ue,"/auth/user"),{method:"GET",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:"Bearer "+de("token")}});case 2:return t=e.sent,e.abrupt("return",me(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),logout:function(){var e=Object(ie.a)(le.a.mark((function e(){var t;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ue,"/auth/logout"),{method:"POST",cache:"no-cache",body:JSON.stringify({token:localStorage.getItem("refreshToken")}),headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.abrupt("return",me(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),updateUser:function(){var e=Object(ie.a)(le.a.mark((function e(t){var n;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ue,"/auth/user"),{method:"PATCH",cache:"no-cache",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+de("token")}});case 2:return n=e.sent,e.abrupt("return",me(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),refreshToken:function(){var e=Object(ie.a)(le.a.mark((function e(){var t;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ue,"/auth/token"),{method:"POST",cache:"no-cache",body:JSON.stringify({token:localStorage.getItem("refreshToken")}),headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.abrupt("return",me(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),resetPassword:function(){var e=Object(ie.a)(le.a.mark((function e(t,n){var r;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ue,"/password-reset/reset"),{method:"POST",cache:"no-cache",body:JSON.stringify({password:t,token:n}),headers:{"Content-Type":"application/json"}});case 2:return r=e.sent,e.abrupt("return",me(r));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),forgotPassword:function(){var e=Object(ie.a)(le.a.mark((function e(t){var n;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ue,"/password-reset"),{method:"POST",cache:"no-cache",body:JSON.stringify({email:t}),headers:{"Content-Type":"application/json"}});case 2:return n=e.sent,e.abrupt("return",me(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},pe="GET_INGREDIENTS_REQUEST",Oe="GET_INGREDIENTS_SUCCESS",xe="GET_INGREDIENTS_FAILED",fe="INCREASE_INGREDIENT",he="DECREASE_INGREDIENT",ge="DELETE_INGREDIENT",ve="ADD_INGREDIENTS",ye="UPDATE_CONSTRUCTOR",Ee=function(e){var t=e.onDropHandler,n=Object(J.a)({accept:"ingredient",drop:function(e){t(e)},collect:function(e){return{isHover:e.isOver(),canDrop:e.canDrop()}}}),a=Object(h.a)(n,2)[1],c=E((function(e){return e.ingredients.burgerIngredients})),s=c.bun,i=c.ingredients,l=Q(),u=Object(o.g)(),j=Object(o.h)(),m=Object(r.useState)(0),_=Object(h.a)(m,2),O=_[0],x=_[1];Object(r.useEffect)((function(){var e=2*(s?s.price:0)+i.reduce((function(e,t){return e+t.price}),0);x(e)}),[s,i]);var f=Object(r.useCallback)((function(e,t){l({type:ye,toIndex:t,fromIndex:e})}),[l]);return Object(p.jsxs)("section",{className:b()(z.a.container,"pl-4"),children:[Object(p.jsxs)("div",{ref:a,"data-cy":"drop-target",className:b()(z.a["burger-container"]),children:[s&&Object(p.jsx)("div",{className:"mr-8","data-cy":"up",children:Object(p.jsx)(d.ConstructorElement,{type:"top",isLocked:!0,text:"".concat(s.name," (\u0432\u0435\u0440\u0445)"),price:s.price,thumbnail:s.image})}),Object(p.jsx)("ul",{className:b()(z.a.list,"pr-4"),"data-cy":"ingredients-container",children:i.map((function(e,t){return Object(p.jsx)(K,{item:e,index:t,deleteIngredient:function(){l({type:ge,id:e.unicId}),l({type:he,key:e._id,typeItem:e.type})},moveItem:f},e.unicId)}))}),s&&Object(p.jsx)("div",{className:"mr-8","data-cy":"down",children:Object(p.jsx)(d.ConstructorElement,{type:"bottom",isLocked:!0,text:"".concat(s.name," (\u043d\u0438\u0437)"),price:s.price,thumbnail:s.image})})]}),Object(p.jsxs)("div",{className:b()(z.a.order,"mt-10"),children:[i.length||s?Object(p.jsx)(A,{price:O,classes:"text_type_main-large mr-10"}):null,s&&Object(p.jsx)(d.Button,{type:"primary",size:"large",onClick:function(){l({type:ee});var e,t=i.map((function(e){return e._id})).concat(s?s._id:"");u.push({pathname:"/order",state:{background:j}}),l((e=t,function(t){t({type:te}),_e.orders.addOrdersRequest(e).then((function(e){e&&e.success?t({type:ne,order:e}):t({type:re})})).catch((function(e){console.log(e),t({type:re})}))}))},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})},Ne=n(90),Se=n.n(Ne),Re=n(219),we=n(121),Te=function(){var e=Q();return Object(p.jsx)("main",{className:b()(Se.a.main,"p-10"),children:Object(p.jsx)("div",{className:Se.a.columns,children:Object(p.jsxs)(Re.a,{backend:we.a,children:[Object(p.jsx)(H,{}),Object(p.jsx)(Ee,{onDropHandler:function(t){var n=Object(C.a)(Object(C.a)({},t),{},{unicId:Math.random()});e({type:ve,item:n}),e({type:fe,key:t._id,typeItem:t.type})}})]})})})},Ce=n(64),ke=n.n(Ce),Ie=function(){var e=E((function(e){return e.orders})).createOrder,t=null===e||void 0===e?void 0:e.order.number;return Object(p.jsxs)("div",{className:b()(ke.a.order,"p-15"),children:[Object(p.jsx)("h1",{className:b()(ke.a.title,"text","text_type_digits-large","mb-8"),children:t}),Object(p.jsx)("p",{className:b()("text","text_type_main-medium"),children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(p.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAABVZJREFUaEO9mnfInTUUxn/FCYIT/3DVCS4EVwWh1oml7lknFusWBRWxihYn4qCoWLQquMCitqK2qDhxI1I3igpOXOAu4sKiPCWn5Etzkryv994DL6U3JyfnSU7OyjeOwdEKwN7ABsmnFb5OvmeBJT2XvizMexV4alxPITZtdWBf4EDgWGDFRnn/AHOBhVICWNw479+Eb2pfADsBpwKHA+s0Lu6x/QjMBmxnPb7XgQnJ4LyuAExxKT9o2hN43hF6C3BGZmxWFwDXAhc0aP0L8Hn0/QmsGX27AGtn5HgATgTudNad0grgUeAgR8jPwDPR92kDyCnAceET+zxgambedsC7jjxt6IUtAD4EtswI+Qa4A7gN+LZB6T4s6aU1GS8Ej7ekBsATcPmQFZeinwCbZVD/FZR/RWMlAC8Cu2UE6Kh15MOk+4GjnAXOB2bZmAfgBuCcjICdgTeGqTkgBa931pgPHBmP5QBcCVySEVAzt0Hg2r3gSr8KpvNxCYD8/KKMJrLFzwahYUHGasBvhfFpwL3peLqr8ihpkFJ+89yQlZd4xY81nHVuBc7MjcUAcrsvb1ML8YPA9jSwjyPorWA6ijfLUQwg3X35eV3aYfl4U+Zq4KLCLuwHPOGNG4C1AEVQhXyjUez+YcBDBeWvAC4tHbEBSPONX4GtC7uvML4/sG2ICY8Dd3e0pY2ALwtzlGZPTsb3UPoAvA/cpPkG4GHgkIj5MeAAR7gXZHRXdGqt5EV5zVd9IOcRe0RZR3wPluooAKqkFJ71r9EM4LqMJptU3On2wDsNCN4EdijwnR1qhJhFsnWhYxovAKqonkwGtgI+yixwFnBzYeG/gVUqAHKuOp5yH3B8RkYuM50oAKn9yx/rUudoL0D1bImUhpznMJwcMlhvvhI4mc4XGYaVg6XEQ8cIgNIGpQ9GbxeOd6VQnK9bAaHLp0tYM4FUzNHAAwXZygZkxkYzBEBR7vTox0eAQwtCvEQvnvITsCHwR/Rj6dKK7Ubg3MrGyNRl8kazBWBB6CrYjzVBylmUau9YWewuYHrgUYm5cYH/tWA6v1dk6v7pHhot6ANAk9VGEfAaqUjXSWxRYWzNt9LTX9jHhEwX5ezK3f8vXQwonWihNF7N6XqJ00VyvZoWRYxHjS2vWZCTozigeGA0s6sbTYXuCqjF14e+D3b/XofJisRxvjbdC2Sbh+SuRfY1gCJ3V1Ldoa5GK6moUpyIabKlEmo+xX3N04DbWyWHU9BptJIaVSe1Mgc+AVYUN1J/dVVL5u4BTogGvUaTt6Yit3x/C30QTOe7FuaI58GkoFd5Oc0AHJG0SmRrSpW7FDM6tTkNSilIKlh2ofVCCh2nOOpOzDcAapOroIk7zX0KGuVJypc86mM6kqVUPS5s1NHWnVg8jJLSSxl+AGo5VA64dl91wfrRoO6nTnxMZ25QRb3X21EOo+K9K6W7r/nLGmwtbZU+rUTZpy6dUR8ZmpvK0W/Ldj89Af3fa2z1aSluE1rmAiLP05WadMm1C72HjFG0FmOQubukMndM0PSU8h40RtFi3NTJApT9HpweY2lXvYeN1tS3q8mI3ytZVZ+rTl+OamYxqgcOuUq5Ra+J5epZAyDE3kPHIJ6YTPFTEj9vO/0SMKl0lC0ANL9UB6uL93IAqruTa8fEOui9TbYsxSYWOtK10napzFYA4vUePtINSp9ZNa5Ogn1xPu9t7lXAzJZL1AWAxQmltcN46LYgpUDV/IzVFYBtir3YK8K27GhpM3ViCnadFDeBfQHYfKW3agqrrlWnIu6vlpTWX6qoHpZvV2qdfbwYhgmVZI7qz23G6PAfFrYf7FXbr7AAAAAASUVORK5CYII=",alt:"img",className:b()(ke.a.image,"mt-15","mb-15")}),Object(p.jsx)("p",{className:b()("text","text_type_main-default","mb-2"),children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(p.jsx)("p",{className:b()("text","text_type_main-default","text_color_inactive"),children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},Ae=n(16),Ue="LOGIN_REQUEST",De="LOGIN_SUCCESS",Fe="LOGIN_FAILED",qe="REGISTER_REQUEST",Pe="REGISTER_SUCCESS",Ge="REGISTER_FAILED",Le="LOGOUT_REQUEST",Be="LOGOUT_SUCCESS",We="LOGOUT_FAILED",He="GET_USER_REQUEST",Me="GET_USER_SUCCESS",ze="GET_USER_FAILED",Ve="UPDATE_USER_REQUEST",Ye="UPDATE_USER_SUCCESS",Je="UPDATE_USER_FAILED",Ke="FORGOT_PASSWORD_REQUEST",Qe="FORGOT_PASSWORD_SUCCESS",Xe="FORGOT_PASSWORD_FAILED",Ze="RESET_PASSWORD_REQUEST",$e="RESET_PASSWORD_SUCCESS",et="RESET_PASSWORD_FAILED",tt="REFRESH_TOKEN_REQUEST",nt="REFRESH_TOKEN_SUCCESS",rt="REFRESH_TOKEN_FAILED",at=n(40),ct=n.n(at),st=function(){var e=Object(r.useState)({email:"",password:""}),t=Object(h.a)(e,2),n=t[0],a=t[1],c=Object(o.h)().state,s=(c=void 0===c?{}:c).from,i=void 0===s?"/":s,l=E((function(e){return e.auth.name})),u=Q(),j=function(e){var t=e.target,r=t.value,c=t.name;a(Object(C.a)(Object(C.a)({},n),{},Object(Ae.a)({},c,r)))},m=localStorage.getItem("refreshToken");return l||m?Object(p.jsx)(o.a,{to:i}):Object(p.jsxs)("div",{className:ct.a.container,children:[Object(p.jsxs)("form",{onSubmit:function(e){var t;e.preventDefault(),u((t=n,function(e){e({type:Ue}),_e.auth.signIn(t).then((function(t){if(t&&t.success){var n=t.accessToken.split("Bearer ")[1],r=t.refreshToken;je("token",n),localStorage.setItem("refreshToken",r),e({type:De,user:t.user})}else e({type:Fe})})).catch((function(){e({type:Fe})}))}))},className:b()(ct.a.form,"mb-20"),children:[Object(p.jsx)("h1",{className:b()(ct.a.title,"text text_type_main-medium"),children:"\u0412\u0445\u043e\u0434"}),Object(p.jsx)(d.Input,{type:"text",placeholder:"E-mail",onChange:j,value:n.email,name:"email",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"}),Object(p.jsx)(d.PasswordInput,{value:n.password,name:"password",onChange:j}),Object(p.jsx)(d.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(p.jsxs)("div",{className:b()("mb-4"),children:[Object(p.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:"\u0412\u044b - \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?"}),Object(p.jsx)(S.b,{to:"/register",className:b()("text text_type_main-default",ct.a.link,"pl-2"),children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(p.jsx)(S.b,{to:"/forgot-password",className:b()("text text_type_main-default",ct.a.link,"pl-2"),children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})},it=n(49),ot=n.n(it);function lt(){var e=Object(r.useState)({name:"",email:"",password:""}),t=Object(h.a)(e,2),n=t[0],a=t[1],c=Q(),s=E((function(e){return e.auth.isregisterSuccess})),i=function(e){var t=e.target,r=t.value,c=t.name;a(Object(C.a)(Object(C.a)({},n),{},Object(Ae.a)({},c,r)))},l=Object(r.useCallback)((function(){alert("Icon Click Callback")}),[]);return localStorage.getItem("refreshToken")?Object(p.jsx)(o.a,{to:{pathname:"/"}}):s?Object(p.jsx)(o.a,{to:{pathname:"/login"}}):Object(p.jsxs)("div",{className:ot.a.container,children:[Object(p.jsxs)("form",{onSubmit:function(e){var t;e.preventDefault(),c((t=n,function(e){e({type:qe}),_e.auth.register(t).then((function(t){if(t&&t.success){var n=t.accessToken.split("Bearer ")[1];je("token",n);var r=t.refreshToken;localStorage.setItem("refreshToken",r),e({type:Pe,user:t.user})}else e({type:Ge})})).catch((function(){e({type:Ge})}))}))},className:b()(ot.a.form,"mb-20"),children:[Object(p.jsx)("h1",{className:b()(ot.a.title,"text text_type_main-medium"),children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(p.jsx)(d.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:i,value:n.name,name:"name",error:!1,onIconClick:l,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"}),Object(p.jsx)(d.Input,{type:"text",placeholder:"E-mail",onChange:i,value:n.email,name:"email",error:!1,onIconClick:l,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"}),Object(p.jsx)(d.PasswordInput,{value:n.password,name:"password",onChange:i}),Object(p.jsx)(d.Button,{type:"primary",size:"medium",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(p.jsxs)("div",{className:b()("mb-4"),children:[Object(p.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(p.jsx)(S.b,{to:"/login",className:b()("text text_type_main-default",ot.a.link,"pl-2"),children:"\u0412\u043e\u0439\u0442\u0438"})]})]})}var ut=Object(r.memo)(lt),dt=n(92),jt=n.n(dt),bt=n(29),mt=n.n(bt),_t=function(){var e=Object(o.h)().pathname;return Object(p.jsxs)("div",{className:b()(mt.a.nav),children:[Object(p.jsxs)("ul",{className:b()(mt.a["list-nav"],"mb-20"),children:[Object(p.jsx)("li",{children:Object(p.jsx)(S.c,{exact:!0,to:"/profile",className:b()(mt.a.link,"pt-4","pb-4","pr-5","mr-2","text text_type_main-medium text_color_inactive"),activeClassName:mt.a.link_active,children:Object(p.jsx)("span",{className:b()("ml-2"),children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})})}),Object(p.jsx)("li",{children:Object(p.jsx)(S.c,{exact:!0,to:"/profile/orders",className:b()(mt.a.link,"pt-4","pb-4","pr-5","mr-2","text text_type_main-medium text_color_inactive"),activeClassName:mt.a.link_active,children:Object(p.jsx)("span",{className:b()("ml-2"),children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})})}),Object(p.jsx)("li",{children:Object(p.jsx)(S.c,{exact:!0,to:"/logout",className:b()(mt.a.link,"pt-4","pb-4","pr-5","mr-2","text text_type_main-medium text_color_inactive"),activeClassName:mt.a.link_active,children:Object(p.jsx)("span",{className:b()("ml-2"),children:"\u0412\u044b\u0445\u043e\u0434"})})})]}),"/profile"===e?Object(p.jsx)("span",{className:b()("text text_type_main-default text_color_inactive"),children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"}):null]})},pt=n(65),Ot=n.n(pt),xt=function(){var e=E((function(e){return e.auth.name})),t=E((function(e){return e.auth.email})),n=Q(),a=Object(r.useState)({name:"",email:"",password:"",nameDisabled:!0,emailDisabled:!0,passwordDisabled:!0}),c=Object(h.a)(a,2),s=c[0],i=c[1];Object(r.useEffect)((function(){i((function(n){return Object(C.a)(Object(C.a)({},n),{},{name:e,email:t})}))}),[e,t]);var o=function(e){var t=e.target,n=t.value,r=t.name;i(Object(C.a)(Object(C.a)({},s),{},Object(Ae.a)({},r,n)))},l=Object(r.useRef)(null),u=Object(r.useRef)(null),j=Object(r.useRef)(null),m=s.nameDisabled?"EditIcon":"CloseIcon",_=s.emailDisabled?"EditIcon":"CloseIcon",O=s.passwordDisabled?"EditIcon":"CloseIcon";return Object(p.jsxs)("form",{onSubmit:function(r){r.preventDefault();var a,c={};c=s.name!==e?Object(C.a)(Object(C.a)({},c),{},{name:s.name}):c,c=s.email!==t?Object(C.a)(Object(C.a)({},c),{},{email:s.email}):c,c=0!==s.password.length?Object(C.a)(Object(C.a)({},c),{},{password:s.password}):c,n((a=Object(C.a)({},c),function(e){e({type:Ve}),_e.auth.updateUser(a).then((function(t){t&&t.success?e({type:Ye,user:t.user}):e({type:Je})})).catch((function(){e({type:Je})}))})),i(Object(C.a)(Object(C.a)({},s),{},{password:"",nameDisabled:!0,emailDisabled:!0,passwordDisabled:!0}))},className:b()(Ot.a.form),children:[Object(p.jsx)(d.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:o,icon:m,value:s.name,name:"name",error:!1,ref:l,onIconClick:function(){i(Object(C.a)(Object(C.a)({},s),{},{nameDisabled:!s.nameDisabled})),l&&l.current&&(l.current.disabled=!1),setTimeout((function(){return l&&l.current&&l.current.focus()}),0)},errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default",disabled:s.nameDisabled}),Object(p.jsx)(d.Input,{type:"email",placeholder:"\u041b\u043e\u0433\u0438\u043d",onChange:o,icon:_,value:s.email,name:"email",error:!1,ref:u,onIconClick:function(){i(Object(C.a)(Object(C.a)({},s),{},{emailDisabled:!s.emailDisabled})),u&&u.current&&(u.current.disabled=!1),setTimeout((function(){return u&&u.current&&u.current.focus()}),0)},errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default",disabled:s.emailDisabled}),Object(p.jsx)(d.Input,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:o,icon:O,value:s.password,name:"password",error:!1,ref:j,onIconClick:function(){i(Object(C.a)(Object(C.a)({},s),{},{passwordDisabled:!s.passwordDisabled})),j&&j.current&&(j.current.disabled=!1),setTimeout((function(){return j&&j.current&&j.current.focus()}),0)},errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default",disabled:s.passwordDisabled}),s.name!==e||s.email!==t||0!==s.password.length?Object(p.jsxs)("div",{className:Ot.a.buttons,children:[Object(p.jsx)("span",{className:Ot.a.button,onClick:function(n){n.preventDefault(),i(Object(C.a)(Object(C.a)({},s),{},{name:e,email:t,password:"",nameDisabled:!0,emailDisabled:!0,passwordDisabled:!0}))},children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(p.jsx)(d.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}):null]})},ft=n(66),ht=n.n(ft),gt=n(26),vt=n.n(gt),yt=n(31),Et=function(e){var t=new Date(e),n=new Date;n.setHours(0,0,0,0);var r,a=Math.ceil((n.getTime()-t.getTime())/864e5),c=t.getHours()>9?t.getHours():"0".concat(t.getHours()),s=t.getMinutes()>9?t.getMinutes():"0".concat(t.getMinutes());return"".concat((r=a,0===r?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f":1===r?"\u0412\u0447\u0435\u0440\u0430":r>1?"".concat(r," \u0434\u043d\u044f(-\u0435\u0439) \u043d\u0430\u0437\u0430\u0434"):"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a:("),", ").concat(c,":").concat(s)},Nt=function(e){return"done"===e?{text:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d",textColor:"green"}:"pending"===e?{text:"\u041e\u0442\u043c\u0435\u043d\u0435\u043d",textColor:"yellow"}:{text:"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f",textColor:"white"}},St=function(e){return null===e||void 0===e?void 0:e.reduce((function(e,t){return e+t.price}),0)},Rt=function(e,t){var n;return null===e||void 0===e||null===(n=e.map((function(e){return t.filter((function(t){return t._id===e}))})))||void 0===n?void 0:n.flat()},wt=function(e){var t=e.number,n=e.name,r=e.allIngredients,a=e.createdAt,c=e.status,s=E((function(e){return e.ingredients})).ingredients,i=Et(a),o=Rt(r,s),l=o.slice(0,6),u=o.length,d=6,j=u-6,m=St(o),_=c?Nt(c):null;return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:b()(vt.a["orders-item"],"p-6"),children:[Object(p.jsxs)("div",{className:b()(vt.a["orders-info"]),children:[Object(p.jsxs)("span",{className:"text text_type_digits-default",children:["#",t]}),Object(p.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:i})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{className:b()("text text_type_main-medium","mb-2"),children:n}),c?Object(p.jsx)("span",{className:b()("text text_type_main-default",vt.a["status_color_".concat(null===_||void 0===_?void 0:_.textColor)]),children:null===_||void 0===_?void 0:_.text}):null]}),Object(p.jsxs)("div",{className:b()(vt.a["orders-info"]),children:[Object(p.jsxs)("ul",{className:b()(vt.a.list),children:[l.map((function(e,t){return d-=1,Object(p.jsx)("li",{className:vt.a["list-item"],style:{zIndex:d},children:Object(p.jsx)("div",{className:b()(vt.a.icon),children:Object(p.jsx)("img",{src:e.image_mobile,className:b()(vt.a.image),alt:"\u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442 \u0431\u0443\u0440\u0433\u0435\u0440\u0430"})})},t)})),u>6?Object(p.jsx)("div",{className:vt.a.overlay,children:Object(p.jsx)("span",{children:"+".concat(j)})}):null]}),Object(p.jsx)(A,{price:m})]})]})})},Tt="WS_CONNECTION_CLOSE_AUTH",Ct="WS_GET_MESSAGE_AUTH",kt="WS_CONNECTION_START_AUTH",It="WS_CONNECTION_SUCCESS_AUTH",At="WS_CONNECTION_ERROR_AUTH",Ut="WS_CONNECTION_CLOSED_AUTH",Dt=function(){var e=Q(),t=Object(o.h)();Object(r.useEffect)((function(){return e({type:kt}),function(){e({type:Tt})}}),[e]);var n=E((function(e){return e.wsAuth})).orders;return Object(p.jsx)("ul",{className:b()(ht.a.list,"mb-20"),children:null===n||void 0===n?void 0:n.map((function(e,n){return Object(p.jsx)("li",{className:b()(ht.a["list-item"]),children:Object(p.jsx)(S.b,{to:{pathname:"/profile/orders/".concat(e.number),state:{background:t}},className:ht.a["burger-link"],children:Object(p.jsx)(wt,{number:e.number,name:e.name,allIngredients:e.ingredients,createdAt:e.createdAt,status:e.status})})},n)}))})},Ft=n(93),qt=n.n(Ft),Pt=function(){return Object(p.jsx)("div",{className:b()(qt.a["mk-spinner-wrap"]),children:Object(p.jsx)("div",{className:qt.a["mk-spinner-bubbles"]})})},Gt=function(){var e=Q(),t=E((function(e){return e.auth})).getUserRequest;return Object(r.useEffect)((function(){e((function(e){e({type:He}),_e.auth.getUser().then((function(t){t&&t.success?e({type:Me,user:t.user}):e({type:ze})})).catch((function(){e({type:ze})}))}))}),[e]),t?Object(p.jsx)(Pt,{}):Object(p.jsxs)("div",{className:b()(jt.a.main,"pt-10","pl-10","pr-10","mt-10"),children:[Object(p.jsx)(_t,{}),Object(p.jsxs)(o.d,{children:[Object(p.jsx)(o.b,{path:"/profile",exact:!0,children:Object(p.jsx)(xt,{})}),Object(p.jsx)(o.b,{path:"/profile/orders",exact:!0,children:Object(p.jsx)(Dt,{})}),Object(p.jsx)(o.b,{children:Object(p.jsx)("div",{className:jt.a.container,children:Object(p.jsx)("h1",{children:" 404 \u0417\u0434\u0435\u0441\u044c \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435\u0442"})})})]})]})},Lt=n(61),Bt=["children"],Wt=function(e){var t=e.children,n=Object(Lt.a)(e,Bt),a=Q(),c=E((function(e){return e.auth.isTokenUpdated})),s=E((function(e){return e.auth.tokenUpdateDate})),i=!!localStorage.getItem("refreshToken");return Object(r.useEffect)((function(){!c&&i&&a((function(e){e({type:tt}),_e.auth.refreshToken().then((function(t){if(t&&t.success){localStorage.setItem("refreshToken",t.refreshToken);var n=t.accessToken.split("Bearer ")[1];je("token",n),e({type:nt})}else e({type:rt})})).catch((function(){be("token"),localStorage.removeItem("refreshToken"),e({type:rt})}))}))}),[a,i,c]),i&&!c?Object(p.jsx)(Pt,{}):Object(p.jsx)(o.b,Object(C.a)(Object(C.a)({},n),{},{render:function(e){var n=e.location;return i&&s?t:Object(p.jsx)(o.a,{to:{pathname:"/login",state:{from:n}}})}}))},Ht=n(50),Mt=n.n(Ht),zt=function(){var e=Object(r.useState)(""),t=Object(h.a)(e,2),n=t[0],a=t[1],c=localStorage.getItem("refreshToken"),s=Q(),i=E((function(e){return e.auth.isforgotPasswordSuccess}));return c?Object(p.jsx)(o.a,{to:{pathname:"/"}}):i?Object(p.jsx)(o.a,{to:{pathname:"/reset-password"}}):Object(p.jsxs)("div",{className:Mt.a.container,children:[Object(p.jsxs)("form",{onSubmit:function(e){var t;e.preventDefault(),s((t=n,function(e){e({type:Ke}),_e.auth.forgotPassword(t).then((function(){e({type:Qe})})).catch((function(){e({type:Xe})}))}))},className:b()(Mt.a.form,"mb-20"),children:[Object(p.jsx)("h1",{className:b()(Mt.a.title,"text text_type_main-medium"),children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(p.jsx)(d.Input,{type:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",onChange:function(e){return a(e.target.value)},value:n,name:"email",error:!1,errorText:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",size:"default"}),Object(p.jsx)(d.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]}),Object(p.jsxs)("div",{className:b()("mb-4"),children:[Object(p.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(p.jsx)(S.b,{to:"/login",className:b()("text text_type_main-default",Mt.a.link,"pl-2"),children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},Vt=n(51),Yt=n.n(Vt),Jt=function(){var e=Object(r.useState)({password:"",token:""}),t=Object(h.a)(e,2),n=t[0],a=t[1],c=Q(),s=function(e){var t=e.target,r=t.value,c=t.name;a(Object(C.a)(Object(C.a)({},n),{},Object(Ae.a)({},c,r)))},i=E((function(e){return e.auth.isforgotPasswordSuccess})),l=E((function(e){return e.auth.isresetPasswordSuccess}));return localStorage.getItem("refreshToken")?Object(p.jsx)(o.a,{to:{pathname:"/"}}):localStorage.getItem("refreshToken")||i?l?Object(p.jsx)(o.a,{to:{pathname:"/login"}}):Object(p.jsxs)("div",{className:Yt.a.container,children:[Object(p.jsxs)("form",{onSubmit:function(e){var t,r;e.preventDefault(),c((t=n.password,r=n.token,function(e){e({type:Ze}),_e.auth.resetPassword(t,r).then((function(t){t&&t.success?e({type:$e}):e({type:et})})).catch((function(){e({type:et})}))}))},className:b()(Yt.a.form,"mb-20"),children:[Object(p.jsx)("h1",{className:b()(Yt.a.title,"text text_type_main-medium"),children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(p.jsx)(d.PasswordInput,{value:n.password,name:"password",onChange:s}),Object(p.jsx)(d.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",onChange:s,value:n.token,name:"token",error:!1,errorText:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",size:"default"}),Object(p.jsx)(d.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(p.jsxs)("div",{className:b()("mb-4"),children:[Object(p.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(p.jsx)(S.b,{to:"/login",className:b()("text text_type_main-default",Yt.a.link,"pl-2"),children:"\u0412\u043e\u0439\u0442\u0438"})]})]}):Object(p.jsx)(o.a,{to:{pathname:"/forgot-password"}})},Kt=function(){var e=Q();return Object(r.useEffect)((function(){e((function(e){e({type:Le}),_e.auth.logout().then((function(t){t&&t.success?(be("token"),localStorage.removeItem("refreshToken"),e({type:Be})):e({type:We})})).catch((function(){e({type:We})}))}))})),Object(p.jsx)(o.a,{to:"/login"})},Qt=n(119),Xt=n.n(Qt),Zt=n(67),$t=n.n(Zt);function en(){var e=Object(o.h)(),t=E((function(e){return e.ws})).orders;return t?Object(p.jsxs)("section",{children:[Object(p.jsx)("h1",{className:b()("text","text_type_main-large","mb-5"),children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(p.jsx)("ul",{className:b()($t.a.list),children:null===t||void 0===t?void 0:t.map((function(t){return Object(p.jsx)("li",{className:b()($t.a["list-item"],"mb-4"),children:Object(p.jsx)(S.b,{to:{pathname:"/feed/".concat(t.number),state:{background:e}},className:$t.a.link,children:Object(p.jsx)(wt,{number:t.number,name:t.name,allIngredients:t.ingredients,createdAt:t.createdAt})})},t._id)}))})]}):Object(p.jsx)(Pt,{})}var tn=Object(r.memo)(en),nn=n(27),rn=n.n(nn),an=function(){var e,t=E((function(e){return e.ws})),n=t.total,r=t.totalToday,a=t.orders,c=null===(e=a)||void 0===e?void 0:e.reduce((function(e,t){return"done"===t.status?e.done=[].concat(Object(yt.a)(e.done),[t]):e.pending=[].concat(Object(yt.a)(e.pending),[t]),e}),{done:[],pending:[]}),s=null===c||void 0===c?void 0:c.done.slice(0,30);return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("section",{className:b()(rn.a.container,"pl-4"),children:[Object(p.jsxs)("div",{className:rn.a.table,children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{className:b()("text text_type_main-medium","mb-6"),children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(p.jsx)("ul",{className:b()(rn.a.list,rn.a.list_color_green,"text text_type_digits-default"),children:null===s||void 0===s?void 0:s.map((function(e){return Object(p.jsx)("li",{className:b()(rn.a["list-item"],"mb-2","mr-8"),children:e.number},e._id)}))})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{className:b()("text text_type_main-medium","mb-6"),children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(p.jsx)("ul",{className:b()(rn.a.list,"text text_type_digits-default"),children:null===c||void 0===c?void 0:c.pending.map((function(e){return Object(p.jsx)("li",{className:b()(rn.a["list-item"],"mb-2","mr-8"),children:e.number},e._id)}))})]})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{className:b()("text text_type_main-medium"),children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(p.jsx)("span",{className:b()("text text_type_digits-large",rn.a.count),children:n||0})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{className:b()("text text_type_main-medium"),children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(p.jsx)("span",{className:b()("text text_type_digits-large",rn.a.count),children:r||0})]})]})})},cn="WS_CONNECTION_START",sn="WS_CONNECTION_SUCCESS",on="WS_CONNECTION_ERROR",ln="WS_CONNECTION_CLOSED",un="WS_CONNECTION_CLOSE",dn="WS_GET_MESSAGE";function jn(){var e=Q();return Object(r.useEffect)((function(){return e({type:cn}),function(){e({type:un})}}),[e]),Object(p.jsxs)("div",{className:b()(Xt.a.columns,"p-10"),children:[Object(p.jsx)(tn,{}),Object(p.jsx)(an,{})]})}var bn=Object(r.memo)(jn),mn=n(23),_n=n.n(mn),pn=function(){var e=Q(),t=!!Object(o.j)("/profile"),n=Object(o.i)().id;Object(r.useEffect)((function(){e(t?function(e){return function(t){t({type:ae}),_e.orders.getUserOrderRequest(e).then((function(e){e&&e.success?t({type:ce,order:e.orders[0]}):t({type:se})})).catch((function(e){console.log(e),t({type:$})}))}}(n):function(e){return function(t){t({type:X}),_e.orders.getOrderRequest(e).then((function(e){e&&e.success?t({type:Z,order:e.orders[0]}):t({type:$})})).catch((function(e){console.log(e),t({type:$})}))}}(n))}),[e,t,n]);var a,c=E((function(e){return e.ingredients})).ingredients,s=E((function(e){return e.orders.currentOrder})),i=E((function(e){return e.orders})).orderLoaded,l=s&&s.createdAt&&Et(null===s||void 0===s?void 0:s.createdAt),u=s&&s.ingredients&&Rt(null===s||void 0===s?void 0:s.ingredients,c),d=Array.from(new Set(null===s||void 0===s?void 0:s.ingredients)),j=u&&(null===(a=u)||void 0===a?void 0:a.reduce((function(e,t){var n=t._id;return e.item[n]=t,e.count[n]=(e.count[n]||0)+1,e}),{item:{},count:{}})),m=u&&St(u),_=null===s||void 0===s?void 0:s.name,O=null===s||void 0===s?void 0:s.status,x=O?Nt(O):null;return i&&!s?Object(p.jsx)(o.a,{to:"/"}):s?Object(p.jsxs)("div",{className:_n.a.container,children:[Object(p.jsxs)("span",{className:b()("text text_type_digits-default"),children:["#",n]}),Object(p.jsx)("h1",{className:b()("text text_type_main-medium","mb-3","mt-10",_n.a.title),children:_}),Object(p.jsx)("p",{className:b()("text text_type_main-default","mb-15",_n.a.status,_n.a["status_color_".concat(null===x||void 0===x?void 0:x.textColor)]),children:null===x||void 0===x?void 0:x.text}),Object(p.jsx)("p",{className:b()("text text_type_main-medium","mb-6",_n.a.title),children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(p.jsx)("ul",{className:b()(_n.a.list,"mb-10"),children:d.map((function(e,t){var n,r,a;return Object(p.jsxs)("li",{className:b()(_n.a["list-item"],"mr-6"),children:[Object(p.jsx)("div",{className:b()(_n.a.icon,"mr-4"),children:Object(p.jsx)("img",{src:null===j||void 0===j||null===(n=j.item[e])||void 0===n?void 0:n.image_mobile,alt:"\u0412\u043a\u0443\u0441\u043d\u0430\u044f \u0431\u0443\u043b\u043a\u0430",className:b()(_n.a.image)})}),Object(p.jsx)("p",{className:b()(_n.a.ingredient,"mr-4","text text_type_main-default"),children:null===j||void 0===j||null===(r=j.item[e])||void 0===r?void 0:r.name}),Object(p.jsxs)("span",{className:b()("mr-1","text text_type_digits-default"),children:[null===j||void 0===j?void 0:j.count[e]," x"," "]}),Object(p.jsx)(A,{price:(null===j||void 0===j||null===(a=j.item[e])||void 0===a?void 0:a.price)||0})]},t)}))}),Object(p.jsxs)("div",{className:_n.a.info,children:[Object(p.jsx)("span",{className:b()("text text_type_main-default text_color_inactive"),children:l}),Object(p.jsx)(A,{price:m||0})]})]}):Object(p.jsx)(Pt,{})},On={HOME:"/",ORDERS:"/feed",PROFILE:"/profile",INGREDIENTS:"/ingredients",ORDER:"/order"},xn=function(){var e=Object(o.h)(),t=e.state&&e.state.background,n=Q();return Object(r.useEffect)((function(){n((function(e){e({type:pe}),_e.ingredients.getIngredients().then((function(t){t&&t.success?e({type:Oe,items:t.data}):e({type:xe})})).catch((function(){return e({type:xe})}))}))}),[n]),Object(p.jsxs)("div",{children:[Object(p.jsx)(T,{}),Object(p.jsxs)(o.d,{location:t||e,children:[Object(p.jsx)(o.b,{path:"/",exact:!0,children:Object(p.jsx)(Te,{})}),Object(p.jsx)(o.b,{path:"/login",exact:!0,children:Object(p.jsx)(st,{})}),Object(p.jsx)(o.b,{path:"/register",exact:!0,children:Object(p.jsx)(ut,{})}),Object(p.jsx)(o.b,{path:"/feed",exact:!0,children:Object(p.jsx)(bn,{})}),Object(p.jsx)(o.b,{path:"/feed/:id",children:Object(p.jsx)(pn,{})}),Object(p.jsx)(Wt,{path:"/profile/orders/:id",exact:!0,children:Object(p.jsx)(pn,{})}),Object(p.jsx)(o.b,{path:"/ingredients/:id",children:Object(p.jsx)(N,{})}),Object(p.jsx)(Wt,{path:"".concat(On.ORDER),children:Object(p.jsx)(f,{children:Object(p.jsx)(Ie,{})})}),Object(p.jsx)(Wt,{path:"/profile",children:Object(p.jsx)(Gt,{})}),Object(p.jsx)(o.b,{path:"/forgot-password",exact:!0,children:Object(p.jsx)(zt,{})}),Object(p.jsx)(o.b,{path:"/reset-password",exact:!0,children:Object(p.jsx)(Jt,{})}),Object(p.jsx)(o.b,{path:"/logout",children:Object(p.jsx)(Kt,{})}),Object(p.jsx)(o.b,{children:Object(p.jsx)(Te,{})})]}),t&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(o.b,{path:"/",exact:!0,children:Object(p.jsx)(f,{children:Object(p.jsx)(Ie,{})})}),Object(p.jsx)(o.b,{path:"/ingredients/:id",children:Object(p.jsx)(f,{children:Object(p.jsx)(N,{})})}),Object(p.jsx)(Wt,{path:"/profile/orders/:id",children:Object(p.jsx)(f,{children:Object(p.jsx)(pn,{})})}),Object(p.jsx)(o.b,{path:"/feed/:id",children:Object(p.jsx)(f,{children:Object(p.jsx)(pn,{})})}),Object(p.jsx)(Wt,{path:"".concat(On.ORDER),children:Object(p.jsx)(f,{children:Object(p.jsx)(Ie,{})})})]})]})},fn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,222)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},hn=n(30),gn=n(120),vn={ingredients:[],burgerIngredients:{bun:null,ingredients:[],counts:{}},isLoading:!1,hasError:!1,loaded:!1},yn={currentOrder:null,createOrder:null,orderRequest:!1,orderFailed:!1,orderLoaded:!1,isLoading:!1,hasError:!1,loaded:!1},En={name:"",email:"",password:"",registerRequest:!1,registerRequestFailed:!1,isregisterSuccess:!1,loginRequest:!1,loginRequestFailed:!1,getUserRequest:!1,getUserRequestFailed:!1,updateUserRequest:!1,updateUserRequestFailed:!1,logoutRequest:!1,logoutRequestFailed:!1,isTokenUpdated:!1,tokenUpdateDate:!1,forgotPasswordRequest:!1,forgotPasswordFailed:!1,isforgotPasswordRequest:!1,isforgotPasswordSuccess:!1,resetPasswordRequest:!1,resetPasswordFailed:!1,isresetPasswordSuccess:!1},Nn={wsConnected:!1,error:null,orders:[],total:null,totalToday:null},Sn={wsConnected:!1,error:null,orders:[],total:null,totalToday:null},Rn=Object(hn.b)({ingredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pe:return Object(C.a)(Object(C.a)({},e),{},{isLoading:!0,hasError:!1});case Oe:return Object(C.a)(Object(C.a)({},e),{},{hasError:!1,ingredients:t.items,isLoading:!1,loaded:!0});case xe:return Object(C.a)(Object(C.a)({},e),{},{hasError:!0,isLoading:!1});case ve:var n=t.item.type;return"bun"===n?Object(C.a)(Object(C.a)({},e),{},{burgerIngredients:Object(C.a)(Object(C.a)({},e.burgerIngredients),{},{bun:t.item})}):Object(C.a)(Object(C.a)({},e),{},{burgerIngredients:Object(C.a)(Object(C.a)({},e.burgerIngredients),{},{ingredients:[].concat(Object(yt.a)(e.burgerIngredients.ingredients),[t.item])})});case ge:return Object(C.a)(Object(C.a)({},e),{},{burgerIngredients:Object(C.a)(Object(C.a)({},e.burgerIngredients),{},{ingredients:Object(yt.a)(e.burgerIngredients.ingredients).filter((function(e){return e.unicId!==t.id}))})});case fe:var r=t.typeItem;return"bun"!==r?Object(C.a)(Object(C.a)({},e),{},{burgerIngredients:Object(C.a)(Object(C.a)({},e.burgerIngredients),{},{counts:Object(C.a)(Object(C.a)({},e.burgerIngredients.counts),{},Object(Ae.a)({},t.key,(e.burgerIngredients.counts[t.key]||0)+1))})}):e;case he:var a=t.typeItem;return"bun"!==a?Object(C.a)(Object(C.a)({},e),{},{burgerIngredients:Object(C.a)(Object(C.a)({},e.burgerIngredients),{},{counts:Object(C.a)(Object(C.a)({},e.burgerIngredients.counts),{},Object(Ae.a)({},t.key,e.burgerIngredients.counts[t.key]-1))})}):e;case ye:var c=Object(yt.a)(e.burgerIngredients.ingredients);return c.splice(t.toIndex,0,c.splice(t.fromIndex,1)[0]),Object(C.a)(Object(C.a)({},e),{},{burgerIngredients:Object(C.a)(Object(C.a)({},e.burgerIngredients),{},{ingredients:c})});default:return e}},orders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X:return Object(C.a)(Object(C.a)({},e),{},{orderRequest:!0,orderFailed:!1,orderLoaded:!1});case Z:return Object(C.a)(Object(C.a)({},e),{},{orderFailed:!1,currentOrder:t.order,orderRequest:!1,orderLoaded:!0});case $:return Object(C.a)(Object(C.a)({},e),{},{orderFailed:!0,orderRequest:!1});case ae:return Object(C.a)(Object(C.a)({},e),{},{orderRequest:!0,orderFailed:!1,orderLoaded:!1});case ce:return Object(C.a)(Object(C.a)({},e),{},{orderFailed:!1,currentOrder:t.order,orderRequest:!1,orderLoaded:!0});case se:return Object(C.a)(Object(C.a)({},e),{},{orderFailed:!0,orderRequest:!1});case ee:return Object(C.a)(Object(C.a)({},e),{},{createOrder:null});case te:return Object(C.a)(Object(C.a)({},e),{},{orderRequest:!0,orderFailed:!1});case ne:return Object(C.a)(Object(C.a)({},e),{},{orderFailed:!1,createOrder:t.order,orderRequest:!1});case re:return Object(C.a)(Object(C.a)({},e),{},{orderFailed:!0,orderRequest:!1});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qe:return Object(C.a)(Object(C.a)({},e),{},{registerRequest:!0,registerRequestFailed:!1,isregisterSuccess:!1});case Pe:return Object(C.a)(Object(C.a)({},e),{},{registerRequestFailed:!1,isregisterSuccess:!0,name:t.user.name,email:t.user.email,registerRequest:!1});case Ge:return Object(C.a)(Object(C.a)({},e),{},{registerRequestFailed:!0,registerRequest:!1,isregisterSuccess:!1});case Ue:return Object(C.a)(Object(C.a)({},e),{},{loginRequest:!0,loginRequestFailed:!1});case De:return Object(C.a)(Object(C.a)({},e),{},{loginRequestFailed:!1,name:t.user.name,email:t.user.email,loginRequest:!1});case Fe:return Object(C.a)(Object(C.a)({},e),{},{loginRequestFailed:!0,loginRequest:!1});case He:return Object(C.a)(Object(C.a)({},e),{},{getUserRequest:!0,getUserRequestFailed:!1});case Me:return Object(C.a)(Object(C.a)({},e),{},{getUserRequestFailed:!1,name:t.user.name,email:t.user.email,getUserRequest:!1});case ze:return Object(C.a)(Object(C.a)({},e),{},{getUserRequestFailed:!0,getUserRequest:!1});case Ve:return Object(C.a)(Object(C.a)({},e),{},{updateUserRequest:!0,updateUserRequestFailed:!1});case Ye:return Object(C.a)(Object(C.a)({},e),{},{updateUserRequestFailed:!1,name:t.user.name,email:t.user.email,updateUserRequest:!1});case Je:return Object(C.a)(Object(C.a)({},e),{},{updateUserRequestFailed:!0,updateUserRequest:!1});case Le:return Object(C.a)(Object(C.a)({},e),{},{logoutRequest:!0,logoutRequestFailed:!1});case Be:return Object(C.a)(Object(C.a)({},e),{},{logoutRequestFailed:!1,name:"",email:"",logoutRequest:!1});case We:return Object(C.a)(Object(C.a)({},e),{},{logoutRequestFailed:!0,logoutRequest:!1});case tt:return Object(C.a)({},e);case nt:return Object(C.a)(Object(C.a)({},e),{},{isTokenUpdated:!0,tokenUpdateDate:!0});case rt:return Object(C.a)(Object(C.a)({},e),{},{isTokenUpdated:!0,tokenUpdateDate:!1});case Ze:return Object(C.a)(Object(C.a)({},e),{},{isresetPasswordSuccess:!1});case $e:return Object(C.a)(Object(C.a)({},e),{},{isresetPasswordSuccess:!0});case et:return Object(C.a)(Object(C.a)({},e),{},{isresetPasswordSuccess:!1});case Ke:return Object(C.a)(Object(C.a)({},e),{},{forgotPasswordRequest:!0,forgotPasswordFailed:!1,isforgotPasswordRequest:!1,isforgotPasswordSuccess:!1});case Qe:return Object(C.a)(Object(C.a)({},e),{},{forgotPasswordRequest:!1,isforgotPasswordRequest:!0,isforgotPasswordSuccess:!0});case Xe:return Object(C.a)(Object(C.a)({},e),{},{forgotPasswordFailed:!0,forgotPasswordRequest:!1,isforgotPasswordSuccess:!1,isforgotPasswordRequest:!0});default:return e}},ws:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case sn:return Object(C.a)(Object(C.a)({},e),{},{wsConnected:!0});case on:return Object(C.a)(Object(C.a)({},e),{},{error:t.payload,wsConnected:!1});case ln:return Object(C.a)(Object(C.a)({},e),{},{wsConnected:!1});case dn:return Object(C.a)(Object(C.a)({},e),{},{orders:t.payload.orders,total:t.payload.total,totalToday:t.payload.totalToday});default:return e}},wsAuth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case It:return Object(C.a)(Object(C.a)({},e),{},{wsConnected:!0});case At:return Object(C.a)(Object(C.a)({},e),{},{error:t.payload,wsConnected:!1});case Ut:return Object(C.a)(Object(C.a)({},e),{},{wsConnected:!1});case Ct:return Object(C.a)(Object(C.a)({},e),{},{orders:t.payload.orders,total:t.payload.total,totalToday:t.payload.totalToday});default:return e}}}),wn=["success"],Tn=function(e,t,n){return function(r){var a=null,c=!1;return function(s){return function(i){var o=r.dispatch,l=i.type,u=i.payload,d=t.wsInit,j=t.wsClose,b=t.wsSendMessage,m=t.onOpen,_=t.onClose,p=t.onError,O=t.onMessage,x=n?function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}("token"):null;if(l===d&&(a=x?new WebSocket("".concat(e,"?token=").concat(x)):new WebSocket("".concat(e))),a&&(c=!0,a.onopen=function(e){o({type:m,payload:e})},a.onerror=function(e){o({type:p,payload:e})},a.onmessage=function(e){var t=e.data,n=JSON.parse(t),r=(n.success,Object(Lt.a)(n,wn));o({type:O,payload:r})},a.onclose=function(e){o({type:_,payload:e}),console.log("socket closed with code: ",e.code),c||setTimeout((function(){o({type:d})}),1e3)},j&&l===j&&a&&(a.close(1e3,"socket closed"),c=!1),b&&l===b&&a)){var f=x?Object(C.a)(Object(C.a)({},u),{},{token:x}):Object(C.a)({},u);a.send(JSON.stringify(f))}s(i)}}}},Cn={wsInit:cn,wsClose:un,wsSendMessage:"WS_SEND_MESSAGE",onOpen:sn,onClose:ln,onError:on,onMessage:dn},kn={wsInit:kt,wsClose:Tt,wsSendMessage:"WS_SEND_MESSAGE_AUTH",onOpen:It,onClose:Ut,onError:At,onMessage:Ct},In=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||hn.c)(Object(hn.a)(gn.a,Tn("wss://norma.nomoreparties.space/orders/all",Cn,!1),Tn("wss://norma.nomoreparties.space/orders",kn,!0))),An=Object(hn.d)(Rn,In);s.a.render(Object(p.jsx)(S.a,{children:Object(p.jsx)(i.a,{store:An,children:Object(p.jsx)(xn,{})})}),document.getElementById("root")),fn()},23:function(e,t,n){e.exports={title:"order_title__3O063",ingredient:"order_ingredient__wErLa",status:"order_status__IpXJo",container:"order_container__22RNj",icon:"order_icon__14YAB",image:"order_image__Kkw6O",list:"order_list__32KBn","list-item":"order_list-item__LdOlV",info:"order_info__1laGU",status_color_red:"order_status_color_red__3oZOl",status_color_white:"order_status_color_white__1qoFQ",status_color_green:"order_status_color_green__1cOCO"}},26:function(e,t,n){e.exports={"orders-item":"orders-item_orders-item__pJWt-","orders-info":"orders-item_orders-info__1F6JB",status_color_white:"orders-item_status_color_white__3HleQ",status_color_green:"orders-item_status_color_green__rx0-1",icon:"orders-item_icon__24VJc",image:"orders-item_image__bTTb7",list:"orders-item_list__1_MTk","list-item":"orders-item_list-item__1Fmxk",overlay:"orders-item_overlay__2zvAh",status_color_yellow:"orders-item_status_color_yellow__3GVCe"}},27:function(e,t,n){e.exports={container:"orders-list_container__2mO_Z",table:"orders-list_table__1hz3K",list:"orders-list_list__3Bu3g",list_color_green:"orders-list_list_color_green__1x6Ke",count:"orders-list_count__1UlqR"}},28:function(e,t,n){e.exports={conteainer:"ingredient-details_conteainer__2B2P9",title:"ingredient-details_title__1bGjV",info:"ingredient-details_info__mOqEY",item:"ingredient-details_item__3zRPe"}},29:function(e,t,n){e.exports={link:"profile-navigation_link__1c4gR",link_active:"profile-navigation_link_active__m-ln2","list-nav":"profile-navigation_list-nav__1xC9W",nav:"profile-navigation_nav__2TBSz"}},39:function(e,t,n){e.exports={body:"modal_body__118eq",header:"modal_header__2l_2f",title:"modal_title__12slb",container:"modal_container__3KFI2","close-icon":"modal_close-icon__3ntAn"}},40:function(e,t,n){e.exports={container:"login_container__2vXOB",title:"login_title__3iwNq",form:"login_form__1eTuS",link:"login_link__1Z2Uw"}},47:function(e,t,n){e.exports={list:"ingredients_list__tCvEF","list-item":"ingredients_list-item__5oA9O",link:"ingredients_link__2P_XF"}},48:function(e,t,n){e.exports={container:"burger-constructor_container__3QBmr","burger-container":"burger-constructor_burger-container__1JY3F","burger-container_active":"burger-constructor_burger-container_active__2S9LF","burger-container_candrop":"burger-constructor_burger-container_candrop__3-e3B",list:"burger-constructor_list__3dJvw","item_without-icon":"burger-constructor_item_without-icon__22Fxe",order:"burger-constructor_order__Wp1GW"}},49:function(e,t,n){e.exports={container:"register_container__1vmd1",title:"register_title__1NLGA",form:"register_form__1WuF5",link:"register_link__3hhR7"}},50:function(e,t,n){e.exports={container:"forgot-password_container__uGH-c",form:"forgot-password_form__31mPu",title:"forgot-password_title__2gP_7",link:"forgot-password_link__1W4Zi"}},51:function(e,t,n){e.exports={container:"reset-password_container__1wp6r",form:"reset-password_form__27W6W",title:"reset-password_title__3Ym1i",link:"reset-password_link__36qy6"}},63:function(e,t,n){e.exports={card:"burger-ingredient_card__2ekYU",image:"burger-ingredient_image__20d82"}},64:function(e,t,n){e.exports={order:"order-details_order__2DT72",title:"order-details_title__382DF",image:"order-details_image__2uRg9"}},65:function(e,t,n){e.exports={form:"user-form_form__39WvI",buttons:"user-form_buttons__1f7Vr",button:"user-form_button__2X2VA"}},66:function(e,t,n){e.exports={list:"user-orders_list__2pBAA","list-item":"user-orders_list-item__3gtET","burger-link":"user-orders_burger-link__1suBz"}},67:function(e,t,n){e.exports={list:"feed-orders_list__2yjuK","list-item":"feed-orders_list-item__1qpUJ",link:"feed-orders_link__3cb5f"}},89:function(e,t,n){e.exports={link:"burger-ingredients_link__SN3xY",item:"burger-ingredients_item__OIkSL",item_active:"burger-ingredients_item_active__PplD9",menu:"burger-ingredients_menu__1ihol",container:"burger-ingredients_container__3JFTf"}},90:function(e,t,n){e.exports={main:"burger-union_main__375rU",columns:"burger-union_columns__VRnN_"}},92:function(e,t,n){e.exports={main:"profile_main__1amPc",container:"profile_container__2iR2d"}},93:function(e,t,n){e.exports={"mk-spinner-wrap":"preloader_mk-spinner-wrap__2GsxL","mk-spinner-bubbles":"preloader_mk-spinner-bubbles__DsEjE",a:"preloader_a__1UZ0t",b:"preloader_b__1-QV2"}}},[[214,1,2]]]);
//# sourceMappingURL=main.9ef9c7d7.chunk.js.map