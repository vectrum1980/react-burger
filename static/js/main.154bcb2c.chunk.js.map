{"version":3,"sources":["components/modal-overlay/modal-overlay.module.css","components/price-item/price-item.module.css","components/burger-item/burger-item.module.css","pages/feed/feed.module.css","components/app-header/app-header.module.css","components/modal-overlay/modal-overlay.tsx","components/modal/modal.tsx","hooks/useSelector.tsx","components/ingredient-details/ingredient-details.tsx","components/app-header/app-header.tsx","components/price-item/price-item.tsx","components/burger-ingredient/burger-ingredient.tsx","components/ingredients/ingredients.tsx","components/burger-ingredients/burger-ingredients.tsx","components/burger-item/burger-item.tsx","hooks/useDispatch.tsx","services/constants/orders.ts","constants/config.ts","utils/auth.ts","api/api.ts","services/constants/ingredietns.ts","components/burger-constructor/burger-constructor.tsx","services/actions/orders.ts","components/burger-union/burger-union.tsx","components/order-details/order-details.tsx","images/check-mark.png","services/constants/auth.ts","pages/login/login.tsx","services/actions/auth.ts","pages/register/register.tsx","components/profile-navigation/profile-navigation.tsx","components/user-form/user-form.tsx","utils/functions.ts","components/orders-item/orders-item.tsx","services/constants/ws-auth.ts","components/user-orders/user-orders.tsx","components/preloader/preloader.tsx","pages/profile/profile.tsx","components/route/protected-route.tsx","pages/forgot-password/forgot-password.tsx","pages/reset-password/reset-password.tsx","pages/logout/logout.tsx","components/feed-orders/feed-orders.tsx","components/orders-list/orders-list.tsx","services/constants/ws.ts","pages/feed/feed.tsx","pages/order/order.tsx","components/app/app.tsx","services/actions/ingredients.ts","reportWebVitals.ts","services/reducers/ingredients.ts","services/reducers/orders.ts","services/reducers/auth.ts","services/reducers/ws.ts","services/reducers/ws-auth.ts","services/reducers/index.ts","services/middleware/socketMiddleware.ts","services/actions/ws.ts","services/actions/ws-auth.ts","services/store.ts","index.tsx","pages/order/order.module.css","components/orders-item/orders-item.module.css","components/orders-list/orders-list.module.css","components/ingredient-details/ingredient-details.module.css","components/profile-navigation/profile-navigation.module.css","components/modal/modal.module.css","pages/login/login.module.css","components/ingredients/ingredients.module.css","components/burger-constructor/burger-constructor.module.css","pages/register/register.module.css","pages/forgot-password/forgot-password.module.css","pages/reset-password/reset-password.module.css","components/burger-ingredient/burger-ingredient.module.css","components/order-details/order-details.module.css","components/user-form/user-form.module.css","components/user-orders/user-orders.module.css","components/feed-orders/feed-orders.module.css","components/burger-ingredients/burger-ingredients.module.css","components/burger-union/burger-union.module.css","pages/profile/profile.module.css","components/preloader/preloader.module.css"],"names":["module","exports","ModalOverlay","onClick","className","styles","overlay","modalRoot","document","getElementById","Modal","title","children","history","useHistory","close","ev","code","handleClose","goBack","useEffect","window","addEventListener","removeEventListener","ReactDOM","createPortal","cn","container","header","type","body","useSelector","selectorHook","IngredientDetails","id","useParams","useState","selectedBurger","setSelectedBurger","ingredients","store","length","burger","find","o","_id","conteainer","src","image_large","alt","name","desc","info","item","calories","proteins","fat","carbohydrates","AppHeader","isConstructor","useRouteMatch","path","ROUTES","HOME","exact","isOrders","ORDERS","isProfile","PROFILE","header__container","container__nav","to","activeClassName","header__link","style","marginLeft","PriceItem","price","classes","BurgerIngredient","useDrag","collect","monitor","isDrag","isDragging","dragRef","burgerIngredients","counts","bun","count","opacity","card","ref","image","size","container__description","Ingredients","React","forwardRef","location","useLocation","ingredients__title","list","map","el","pathname","state","background","link","BurgerIngredients","selectedTab","setSelectedTab","groupedIngredients","setGroupedIngredients","grouped","groupBy","x","rootRef","useRef","bunRef","sauceRef","mainRef","current","scrollIntoView","menu","value","active","onScroll","bunDistance","Math","abs","getBoundingClientRect","top","sauceDistance","mainDistance","min","sauce","main","BurgerItem","index","deleteIngredient","moveItem","useDrop","accept","handlerId","getHandlerId","hover","dragIndex","hoverIndex","hoverBoundingRect","hoverMiddleY","bottom","hoverClientY","getClientOffset","y","drop","drag","text","thumbnail","useDispatch","dispatchHook","GET_ORDER_REQUEST","GET_ORDER_SUCCESS","GET_ORDER_FAILED","CLEAR_ORDER_NUMBER","CREATE_ORDER_REQUEST","CREATE_ORDER_SUCCESS","CREATE_ORDER_FAILED","GET_USER_ORDER_REQUEST","GET_USER_ORDER_SUCCESS","GET_USER_ORDER_FAILED","BASE_URL","getCookie","matches","cookie","match","RegExp","replace","decodeURIComponent","undefined","setCookie","props","exp","expires","d","Date","setTime","getTime","Number","toUTCString","updatedCookie","encodeURIComponent","propName","propValue","deleteCookie","requestHandler","resp","ok","json","then","err","Promise","reject","api","getIngredients","a","fetch","method","headers","res","orders","addOrdersRequest","JSON","stringify","Authorization","getOrderNumber","getOrderRequest","number","getUserOrderRequest","cache","auth","register","user","signIn","email","password","getUser","logout","token","localStorage","getItem","updateUser","refreshToken","resetPassword","forgotPassword","GET_INGREDIENTS_REQUEST","GET_INGREDIENTS_SUCCESS","GET_INGREDIENTS_FAILED","INCREASE_INGREDIENT","DECREASE_INGREDIENT","DELETE_INGREDIENT","ADD_INGREDIENTS","UPDATE_CONSTRUCTOR","BurgerConstructor","onDropHandler","isHover","isOver","canDrop","dropTarget","dispatch","totalPrice","setTotalPrice","reduce","acc","curr","useCallback","toIndex","fromIndex","isLocked","unicId","key","typeItem","order","ingredientsId","concat","push","success","catch","console","log","BurgerUnion","columns","DndProvider","backend","HTML5Backend","newItem","random","OrderDetails","createOrder","orderNumber","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILED","REGISTER_REQUEST","REGISTER_SUCCESS","REGISTER_FAILED","LOGOUT_REQUEST","LOGOUT_SUCCESS","LOGOUT_FAILED","GET_USER_REQUEST","GET_USER_SUCCESS","GET_USER_FAILED","UPDATE_USER_REQUEST","UPDATE_USER_SUCCESS","UPDATE_USER_FAILED","FORGOT_PASSWORD_REQUEST","FORGOT_PASSWORD_SUCCESS","FORGOT_PASSWORD_FAILED","RESET_PASSWORD_REQUEST","RESET_PASSWORD_SUCCESS","RESET_PASSWORD_FAILED","REFRESH_TOKEN_REQUEST","REFRESH_TOKEN_SUCCESS","REFRESH_TOKEN_FAILED","Login","data","setData","from","userName","handleInputChange","event","target","hasToken","onSubmit","e","preventDefault","authToken","accessToken","split","setItem","form","placeholder","onChange","error","errorText","Register","setState","isregisterSuccess","onIconClick","alert","memo","ProfileNavigation","nav","link_active","UserForm","currentUserName","currentUserEmail","nameDisabled","emailDisabled","passwordDisabled","nameInputRef","emailInputRef","passwordInputRef","iconNameInput","emailNameInput","passwordNameInput","icon","disabled","setTimeout","focus","buttons","button","convertDate","date","created","today","setHours","days","diffTime","ceil","hours","getHours","getMinutes","getStatus","status","textColor","getPrice","arr","getBurgerIngredients","arrIdBurgerIngredients","arrAllIngredients","filter","flat","OrdersItem","allIngredients","createdAt","stringWithDay","burgerItem","slice","ing","numberIngredients","burgerPrice","st","i","zIndex","image_mobile","WS_CONNECTION_CLOSE_AUTH","WS_GET_MESSAGE_AUTH","WS_CONNECTION_START_AUTH","WS_CONNECTION_SUCCESS_AUTH","WS_CONNECTION_ERROR_AUTH","WS_CONNECTION_CLOSED_AUTH","UserOrders","wsAuth","Preloader","Profile","getUserRequest","ProtectedRoute","rest","isTokenUpdated","tokenUpdateDate","removeItem","render","ForgotPassword","setValue","isforgotPasswordSuccess","ResetPassword","resetSuccess","isresetPasswordSuccess","Logout","FeedOrders","ws","OrdersList","total","totalToday","statusArrays","done","pending","doneArray","table","WS_CONNECTION_START","WS_CONNECTION_SUCCESS","WS_CONNECTION_ERROR","WS_CONNECTION_CLOSED","WS_CONNECTION_CLOSE","WS_GET_MESSAGE","Feed","Order","getUserOrder","getOrder","currentOrder","orderLoaded","uniqItems","Array","Set","bI","ingredient","INGREDIENTS","ORDER","App","items","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","isLoading","hasError","loaded","orderRequest","orderFailed","registerRequest","registerRequestFailed","loginRequest","loginRequestFailed","getUserRequestFailed","updateUserRequest","updateUserRequestFailed","logoutRequest","logoutRequestFailed","forgotPasswordRequest","forgotPasswordFailed","isforgotPasswordRequest","resetPasswordRequest","resetPasswordFailed","wsConnected","rootReducer","combineReducers","action","splice","payload","socketMiddleware","wsUrl","wsActions","socket","connected","next","wsInit","wsClose","wsSendMessage","onOpen","onClose","onError","onMessage","WebSocket","onopen","onerror","onmessage","parsedData","parse","restParsedData","onclose","message","send","wsActionsAuth","enhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","createStore"],"mappings":"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","file":"static/js/main.154bcb2c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"modal-overlay_overlay__SQenM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"element-price\":\"price-item_element-price__3PXmk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"burger-item_item__2E7My\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"columns\":\"feed_columns__aZzHE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"app-header_header__1q5EZ\",\"header__container\":\"app-header_header__container__1W210\",\"container\":\"app-header_container__12FSj\",\"container__nav\":\"app-header_container__nav__1QXAZ\",\"header__link-text\":\"app-header_header__link-text__2wBby\",\"header__link\":\"app-header_header__link__3fFEM\",\"header__link-active\":\"app-header_header__link-active__3EwBQ\"};","import styles from './modal-overlay.module.css';\r\n\r\nconst ModalOverlay: React.FunctionComponent<{ onClick: () => void; }> = ({ onClick }) => {\r\n  return <div className={styles.overlay} onClick={onClick} />\r\n}\r\n\r\nexport default ModalOverlay;\r\n","import ReactDOM from 'react-dom'\r\nimport React, { useEffect } from 'react'\r\nimport styles from './modal.module.css';\r\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport cn from 'classnames'\r\nimport { useHistory } from \"react-router-dom\";\r\nimport ModalOverlay from '../modal-overlay/modal-overlay';\r\n\r\n\r\nexport type Props = {\r\n  title?: string;\r\n}\r\n\r\nconst modalRoot = document.getElementById('modal-window') as HTMLElement\r\n\r\n\r\nconst Modal: React.FunctionComponent<React.PropsWithChildren<Props>> = ({ title, children }) => {\r\n\r\n  const history = useHistory();\r\n\r\n  const close = (ev: KeyboardEvent) => {\r\n    if (ev.code === 'Escape') handleClose();\r\n  };\r\n\r\n  const handleClose = () => {\r\n    history.goBack();\r\n  }\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('keydown', close)\r\n    return () => {\r\n      window.removeEventListener('keydown', close)\r\n    }\r\n  })\r\n  return ReactDOM.createPortal(\r\n    <>\r\n      <div className={cn(styles.container, 'p-10')}>\r\n        <div className={styles.header}>\r\n          {title && <h3 className={cn('text text_type_main-medium', styles.title)}>{title}</h3>}\r\n          <div className={cn(styles[\"close-icon\"])} onClick={handleClose}>\r\n            <CloseIcon type={'primary'} />\r\n          </div>\r\n        </div>\r\n        <div className={styles.body}>{children}</div>\r\n      </div>\r\n      <ModalOverlay onClick={handleClose} />\r\n    </>,\r\n    modalRoot,\r\n  )\r\n}\r\n\r\nexport default Modal;\r\n\r\n\r\n\r\n","import { TypedUseSelectorHook, useSelector as selectorHook } from 'react-redux';\r\nimport { RootState } from '../types';\r\nexport const useSelector: TypedUseSelectorHook<RootState> = selectorHook;","import React, { useState, useEffect } from 'react';\r\nimport cn from 'classnames';\r\nimport styles from './ingredient-details.module.css';\r\nimport { Ingredient } from '../../model/ingredient';\r\nimport { useParams } from \"react-router-dom\";\r\nimport { find } from \"lodash\";\r\nimport { useSelector } from '../../hooks/useSelector';\r\n\r\nconst IngredientDetails: React.FunctionComponent = () => {  \r\n\r\n  const { id } = useParams<{ id: string }>();\r\n  const [selectedBurger, setSelectedBurger] = useState<Ingredient>()\r\n\r\n  const { ingredients } = useSelector((store) => store.ingredients)\r\n \r\n\r\n  useEffect(() => {\r\n    if (ingredients && ingredients.length) {\r\n       const burger = find(ingredients, function(o) { return o._id === id; })\r\n       setSelectedBurger(burger);\r\n    }\r\n}, [ingredients, id]);\r\n\r\n  return <>\r\n    {selectedBurger && <div className={styles.conteainer}>\r\n      <img src={selectedBurger.image_large} alt='описание' />\r\n      <h3 className={styles.title}>{selectedBurger.name}</h3>\r\n      <p className={cn(styles.desc, 'text text_type_main-default')}>описание</p>\r\n      <div className={styles.info}>\r\n        <div className={styles.item}>\r\n          <span className=\"text text_type_main-small text_color_inactive\">Каллорий,ккал</span>\r\n          <span className=\"text text_type_digits-default text_color_inactive\">{selectedBurger.calories}</span>\r\n        </div>\r\n        <div className={styles.item}>\r\n          <span className=\"text text_type_main-small text_color_inactive\">Белки,г</span>\r\n          <span className=\"text text_type_digits-default text_color_inactive\">{selectedBurger.proteins}</span>\r\n        </div>\r\n        <div className={styles.item}>\r\n          <span className=\"text text_type_main-small text_color_inactive\">Жиры,г</span>\r\n          <span className=\"text text_type_digits-default text_color_inactive\">{selectedBurger.fat}</span>\r\n        </div>\r\n        <div className={styles.item}>\r\n          <span className=\"text text_type_main-small text_color_inactive\">Углеводы,г</span>\r\n          <span className=\"text text_type_digits-default text_color_inactive\">{selectedBurger.carbohydrates}</span>\r\n        </div>\r\n      </div>\r\n    </div>}\r\n  </>\r\n}\r\n\r\nexport default IngredientDetails;\r\n","import React from \"react\";\r\nimport { NavLink, Link, useRouteMatch } from 'react-router-dom'\r\nimport { Logo, BurgerIcon, ListIcon, ProfileIcon } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport styles from './app-header.module.css'\r\nimport { ROUTES } from \"../app/app\";\r\nimport cn from 'classnames'\r\n\r\n\r\nconst AppHeader: React.FunctionComponent = () => {\r\n\r\n    const isConstructor = !!useRouteMatch({ path: ROUTES.HOME, exact: true })\r\n    const isOrders = !!useRouteMatch(ROUTES.ORDERS)\r\n    const isProfile = !!useRouteMatch(ROUTES.PROFILE)\r\n\r\n    return <header className={styles.header}>\r\n        <div className={styles.header__container}>\r\n            <div className={styles.container__nav}>\r\n                <NavLink to={ROUTES.HOME} activeClassName={cn(styles[\"header__link-active\"])} className={styles.header__link} >\r\n                    <BurgerIcon type={isConstructor ? 'primary' : 'secondary'} />\r\n                    <span className={cn(styles[\"header__link-text\"], \"text text_type_main-default\")}>Конструктор</span>\r\n                </NavLink>\r\n                <NavLink to={ROUTES.ORDERS} style={{ marginLeft: 10 }} activeClassName={cn(styles[\"header__link-active\"])} className={styles.header__link}>\r\n                    <ListIcon type={isOrders ? 'primary' : 'secondary'} />\r\n                    <span className={cn(styles[\"header__link-text\"], \"text text_type_main-default\")}>Лента Заказов</span>\r\n                </NavLink>\r\n            </div>\r\n            <Link to={ROUTES.HOME} >\r\n                <Logo />\r\n            </Link>\r\n            <div className={styles.container__nav}>\r\n                <NavLink to={ROUTES.PROFILE} style={{ marginLeft: 100 }} activeClassName={cn(styles[\"header__link-active\"])} className={styles.header__link}>\r\n                    <ProfileIcon type={isProfile ? 'primary' : 'secondary'} />\r\n                    <span className={cn(styles[\"header__link-text\"], \"text text_type_main-default\")}>Личный Кабинет</span>\r\n                </NavLink>\r\n            </div>\r\n        </div>\r\n    </header>;\r\n};\r\n\r\nexport default AppHeader;","import React from 'react';\r\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './price-item.module.css';\r\nimport cn from 'classnames';\r\n\r\nconst PriceItem: React.FunctionComponent<{price: number; classes?: string;}> = ({ price, classes }) => {\r\n  return (\r\n    <span className={cn(styles['element-price'], 'text', [classes])}>\r\n      {price}\r\n      <CurrencyIcon type='primary' />\r\n    </span>\r\n  );\r\n}\r\n\r\nexport default PriceItem;","import React from 'react';\r\nimport cn from 'classnames';\r\nimport { Counter } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport PriceItem from '../price-item/price-item';\r\nimport styles from './burger-ingredient.module.css';\r\nimport { Ingredient } from '../../model/ingredient'\r\nimport { useDrag } from 'react-dnd';\r\nimport { useSelector } from '../../hooks/useSelector';\r\n\r\nconst BurgerIngredient: React.FunctionComponent<Ingredient> = (item) => {\r\n\r\n    const COUNT_BUN = 2\r\n\r\n    const [{ isDrag }, dragRef] = useDrag({\r\n        type: 'ingredient',\r\n        item,\r\n        collect: (monitor) => ({\r\n            isDrag: monitor.isDragging(),\r\n        }),\r\n    });\r\n\r\n    const { counts, bun } = useSelector(\r\n        (store) => store.ingredients.burgerIngredients\r\n    );\r\n    const isBun = item.type === 'bun';\r\n    const count =\r\n        isBun && bun && bun._id === item._id\r\n            ? COUNT_BUN\r\n            : counts[item._id] && counts[item._id];\r\n\r\n    const opacity = isDrag ? 0.5 : 1;\r\n\r\n    return (\r\n        <div className={cn(styles.card)}\r\n            ref={dragRef}\r\n            data-cy='ingredient'\r\n            style={{ opacity }}>\r\n            <img\r\n                className={cn(styles.image, 'mb-1')}\r\n                src={item.image_large}\r\n                alt={item.name}\r\n            />\r\n            {count ? <Counter count={count} size='small' /> : null}\r\n            <PriceItem price={item.price} classes='text_type_main-medium mr-1' />\r\n            <p className={cn('text text_type_main-default', styles.container__description)}>\r\n                {item.name}\r\n            </p>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BurgerIngredient;","import React from 'react';\r\nimport cn from 'classnames';\r\nimport BurgerIngredient from '../burger-ingredient/burger-ingredient';\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nimport styles from './ingredients.module.css';\r\nimport { Ingredient, IngredientRef } from '../../model/ingredient'\r\n\r\nconst Ingredients = React.forwardRef<HTMLHeadingElement, IngredientRef>(\r\n    ({ title, ingredients, id }, ref) => {\r\n\r\n        const location = useLocation();\r\n\r\n        return (\r\n            <section className={'mb-10'}>\r\n                <h2\r\n                    id={id}\r\n                    ref={ref}\r\n                    className={cn(styles.ingredients__title, 'text', 'text_type_main-medium', 'mb-6')}\r\n                >\r\n                    {title}\r\n                </h2>\r\n                <ul className={cn(styles.list, 'ml-4')}>\r\n                    {ingredients.map((el: Ingredient) => (\r\n                        <li className={styles['list-item']} key={el._id}>\r\n                            <Link to={{\r\n                                pathname: `/ingredients/${el._id}`,  \r\n                                state: { background: location }\r\n                            }}\r\n                                className={styles.link}>\r\n                                <BurgerIngredient {...el} />\r\n                            </Link>\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            </section>\r\n        );\r\n    }\r\n);\r\nexport default Ingredients;","import React, { useState, useEffect, useRef } from 'react'\r\nimport { Tab } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport Ingredients from '../ingredients/ingredients';\r\nimport cn from 'classnames';\r\nimport styles from './burger-ingredients.module.css';\r\nimport { groupBy } from \"lodash\";\r\nimport { useSelector } from '../../hooks/useSelector';\r\n\r\nconst BurgerIngredients: React.FunctionComponent = () => {\r\n\r\n    const [selectedTab, setSelectedTab] = useState<string>('bun')\r\n    const [groupedIngredients, setGroupedIngredients] = useState<any>(null);\r\n\r\n    const { ingredients } = useSelector(\r\n        (store) => store.ingredients\r\n    );\r\n\r\n    useEffect(() => {\r\n        if (ingredients && ingredients.length) {\r\n            const grouped = groupBy(ingredients, x => x.type)\r\n            setGroupedIngredients(grouped);\r\n        }\r\n    }, [ingredients]);\r\n\r\n    const rootRef = useRef<HTMLElement>(null);\r\n    const bunRef = useRef<HTMLHeadingElement>(null);\r\n    const sauceRef = useRef<HTMLHeadingElement>(null);\r\n    const mainRef = useRef<HTMLHeadingElement>(null);\r\n\r\n    const handleScroll = () => {\r\n        if (rootRef.current && bunRef.current && sauceRef.current && mainRef.current) {\r\n            const bunDistance = Math.abs(rootRef?.current?.getBoundingClientRect()?.top - bunRef?.current?.getBoundingClientRect()?.top)\r\n            const sauceDistance = Math.abs(rootRef?.current?.getBoundingClientRect()?.top - sauceRef.current?.getBoundingClientRect()?.top)\r\n            const mainDistance = Math.abs(rootRef?.current?.getBoundingClientRect()?.top - mainRef.current?.getBoundingClientRect()?.top)\r\n            const min = Math.min(bunDistance, sauceDistance, mainDistance)\r\n            const activeTab = min === bunDistance ? 'bun' : min === sauceDistance ? 'sauces' : 'fillings'\r\n            setSelectedTab(activeTab)\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (selectedTab === 'bun') bunRef?.current?.scrollIntoView()\r\n        if (selectedTab === 'sauces') sauceRef?.current?.scrollIntoView()\r\n        if (selectedTab === 'fillings') mainRef?.current?.scrollIntoView()\r\n    }, [selectedTab])\r\n\r\n    return <>\r\n        <section>\r\n            <h1 className={cn('text', 'text_type_main-large')}>Собери Бургер</h1>\r\n            <div className={cn('text', 'text_type_main-default', 'mb-10', styles.menu)}>\r\n                <Tab value=\"bun\" active={selectedTab === 'bun'} onClick={setSelectedTab}>\r\n                    Булки\r\n                </Tab>\r\n                <Tab value=\"sauces\" active={selectedTab === 'sauces'} onClick={setSelectedTab}>\r\n                    Соусы\r\n                </Tab>\r\n                <Tab value=\"fillings\" active={selectedTab === 'fillings'} onClick={setSelectedTab}>\r\n                    Начинки\r\n                </Tab>\r\n            </div>\r\n            {groupedIngredients && <section\r\n                className={cn(styles.container)}\r\n                ref={rootRef}\r\n                onScroll={handleScroll}>\r\n                <Ingredients\r\n                    title='Булки'\r\n                    ingredients={groupedIngredients.bun}\r\n                    id='bun'\r\n                    ref={bunRef}\r\n                />\r\n                <Ingredients\r\n                    title='Соусы'\r\n                    ingredients={groupedIngredients.sauce}\r\n                    id='sauces'\r\n                    ref={sauceRef}\r\n                />\r\n                <Ingredients\r\n                    title='Начинки'\r\n                    ingredients={groupedIngredients.main}\r\n                    id='fillings'\r\n                    ref={mainRef}\r\n                />\r\n            </section>}\r\n        </section>\r\n    </>\r\n};\r\nexport default BurgerIngredients;","import React from 'react';\r\nimport { ConstructorElement, DragIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './burger-item.module.css';\r\nimport { Burger } from '../../model/burger'\r\nimport { useDrag, useDrop, DropTargetMonitor } from 'react-dnd';\r\nimport { useRef } from 'react';\r\nimport { XYCoord } from 'dnd-core'\r\n\r\ntype TDragItem = {\r\n\tindex: number\r\n\tid: string\r\n}\r\n\r\nconst BurgerItem: React.FunctionComponent<Burger> = ({ item, index, deleteIngredient, moveItem }) => {\r\n  const id = item._id;\r\n  const ref = useRef<HTMLLIElement>(null);\r\n  const [, drop] = useDrop({\r\n    accept: 'item',\r\n    collect(monitor) {\r\n      return {\r\n        handlerId: monitor.getHandlerId(),\r\n      };\r\n    },\r\n    hover(el: TDragItem, monitor: DropTargetMonitor) {\r\n      if (!ref.current) {\r\n        return;\r\n      }\r\n      const dragIndex = el.index;\r\n      const hoverIndex = index;\r\n\r\n      if (dragIndex === hoverIndex) {\r\n        return;\r\n      }\r\n\r\n      const hoverBoundingRect = ref.current?.getBoundingClientRect();\r\n\r\n      const hoverMiddleY =\r\n        (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\r\n\r\n      const clientOffset = monitor.getClientOffset();\r\n\r\n      const hoverClientY = (clientOffset as XYCoord).y - hoverBoundingRect.top;\r\n\r\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\r\n        return;\r\n      }\r\n\r\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\r\n        return;\r\n      }\r\n      moveItem(dragIndex, hoverIndex);\r\n\r\n      el.index = hoverIndex;\r\n    },\r\n  });\r\n  const [{ isDrag }, drag] = useDrag({\r\n    type: 'item',\r\n    item: () => {\r\n      return { id, index };\r\n    },\r\n    collect: (monitor) => ({\r\n      isDrag: monitor.isDragging(),\r\n    }),\r\n  });\r\n\r\n  const opacity = isDrag ? 0 : 1;\r\n  drag(drop(ref));\r\n  \r\n  return (\r\n    <li className={styles.item} ref={ref} style={{ opacity }}>\r\n      <DragIcon type='primary' />\r\n      <ConstructorElement\r\n        text={item.name}\r\n        price={item.price}\r\n        thumbnail={item.image}\r\n        handleClose={deleteIngredient}\r\n      />\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default BurgerItem;\r\n","import { useDispatch as dispatchHook } from 'react-redux';\r\nimport { AppDispatch, AppThunk } from '../types';\r\n\r\nexport const useDispatch = () => dispatchHook<AppDispatch | AppThunk>();\r\n","export const GET_ORDER_REQUEST: 'GET_ORDER_REQUEST' = 'GET_ORDER_REQUEST';\r\nexport const GET_ORDER_SUCCESS: 'GET_ORDER_SUCCESS' = 'GET_ORDER_SUCCESS';\r\nexport const GET_ORDER_FAILED: 'GET_ORDER_FAILED' = 'GET_ORDER_FAILED';\r\nexport const CLEAR_ORDER_NUMBER: 'CLEAR_ORDER_NUMBER' = 'CLEAR_ORDER_NUMBER';\r\nexport const CREATE_ORDER_REQUEST: 'CREATE_ORDER_REQUEST' = 'CREATE_ORDER_REQUEST';\r\nexport const CREATE_ORDER_SUCCESS: 'CREATE_ORDER_SUCCESS' = 'CREATE_ORDER_SUCCESS';\r\nexport const CREATE_ORDER_FAILED: 'CREATE_ORDER_FAILED' = 'CREATE_ORDER_FAILED';\r\nexport const GET_USER_ORDER_REQUEST: 'GET_USER_ORDER_REQUEST' = 'GET_USER_ORDER_REQUEST';\r\nexport const GET_USER_ORDER_SUCCESS: 'GET_USER_ORDER_SUCCESS' = 'GET_USER_ORDER_SUCCESS';\r\nexport const GET_USER_ORDER_FAILED: 'GET_USER_ORDER_FAILED' = 'GET_USER_ORDER_FAILED';","export const ServerConfig = {\r\n    baseUrl: 'https://norma.nomoreparties.space/api',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n  };\r\n  \r\n  export const BASE_URL = 'https://norma.nomoreparties.space/api';\r\n  export const WS_URL = 'wss://norma.nomoreparties.space/orders/all';\r\n  export const WS_URL_AUTH = 'wss://norma.nomoreparties.space/orders';\r\n  ","\r\ntype cookie = {\r\n    expires?: number | string;\r\n    path?: string;\r\n} & { [params: string]: string | number | boolean; }\r\n\r\nexport const getCookie = (name: string) => {\r\n\r\n    const matches = document.cookie.match(\r\n        new RegExp('(?:^|; )' + name.replace(/([.$?*|{}()[]\\\\\\/\\+^])/g, '\\\\$1') + '=([^;]*)')\r\n    );\r\n    return matches ? decodeURIComponent(matches[1]) : undefined;\r\n};\r\n\r\nexport const setCookie = (name: string, value: string | boolean, props?: cookie) => {\r\n    props = {\r\n        path: '/',\r\n        ...props,\r\n    };\r\n    let exp = props.expires;\r\n    const d = new Date();\r\n    if (typeof exp == 'number' && exp) {\r\n        d.setTime(d.getTime() + exp * 1000);\r\n        exp = props.expires = Number(d);\r\n    }\r\n    if (exp && d.toUTCString) {\r\n        props.expires = d.toUTCString();\r\n    }\r\n    value = encodeURIComponent(value);\r\n\r\n    let updatedCookie = name + '=' + value;\r\n\r\n    for (const propName in props) {\r\n        updatedCookie += '; ' + propName;\r\n        const propValue = props[propName];\r\n        if (propValue !== true) {\r\n            updatedCookie += '=' + propValue;\r\n        }\r\n    }\r\n    document.cookie = updatedCookie;\r\n};\r\n\r\nexport const deleteCookie = (name: string) => {\r\n    setCookie(name, false, { expires: -1 });\r\n};","import { BASE_URL } from '../constants/config'\r\nimport { User } from '../model/user'\r\nimport { getCookie } from '../utils/auth';\r\n\r\nconst requestHandler = (resp: Response) => {   \r\n    if (resp.ok)\r\n        return resp.json()\r\n    if (resp.json)\r\n        return resp.json().then((err: string) => Promise.reject(err))\r\n    return Promise.reject(resp)\r\n}\r\n\r\nexport const api = {\r\n    ingredients: {\r\n        getIngredients: async () => {\r\n            const res = await fetch(`${BASE_URL}/ingredients`, {\r\n                method: 'GET',\r\n                headers: { 'Content-Type': 'application/json' },\r\n            })\r\n            return requestHandler(res)\r\n        }\r\n    },\r\n    orders: {\r\n        addOrdersRequest: async (ingredients: Array<string>) => {           \r\n            const resp = await fetch(`${BASE_URL}/orders`, {\r\n                method: \"POST\",\r\n                body: JSON.stringify({ ingredients: ingredients }),\r\n                headers: { 'Content-Type': 'application/json', Authorization: 'Bearer ' + getCookie('token') }\r\n            })           \r\n            return requestHandler(resp)\r\n        },\r\n        getOrderNumber: async (ingredients: Array<string>) => {           \r\n            const resp = await fetch(`${BASE_URL}/orders`, {\r\n                method: \"POST\",\r\n                body: JSON.stringify({ ingredients: ingredients }),\r\n                headers: { 'Content-Type': 'application/json' }\r\n            })\r\n            return requestHandler(resp)\r\n        },\r\n        getOrderRequest: async (number: string) => {\r\n            const resp = await fetch(`${BASE_URL}/orders/${number}`, {\r\n                method: \"GET\",               \r\n                headers: { 'Content-Type': 'application/json' }\r\n            })\r\n            return requestHandler(resp)\r\n        },\r\n        getUserOrderRequest: async (number: string) => {\r\n            const resp = await fetch(`${BASE_URL}/orders/${number}`, {\r\n                method: \"GET\",               \r\n                cache: 'no-cache',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    Authorization: 'Bearer ' + getCookie('token')\r\n                }\r\n            })\r\n            return requestHandler(resp)\r\n        },\r\n    },\r\n    auth: {\r\n        register: async (user: User) => {\r\n            const resp = await fetch(`${BASE_URL}/auth/register`, {\r\n                method: \"POST\",\r\n                cache: 'no-cache',\r\n                body: JSON.stringify(user),\r\n                headers: { 'Content-Type': 'application/json' }\r\n            })\r\n            return requestHandler(resp)\r\n        },\r\n        signIn: async (user: User) => {\r\n            const resp = await fetch(`${BASE_URL}/auth/login`, {\r\n                method: \"POST\",\r\n                cache: 'no-cache',\r\n                body: JSON.stringify({ email: user.email, password: user.password }),\r\n                headers: { 'Content-Type': 'application/json' }\r\n            })\r\n            return requestHandler(resp)\r\n        },\r\n        getUser: async () => {\r\n            const resp = await fetch(`${BASE_URL}/auth/user`, {\r\n                method: 'GET',\r\n                cache: 'no-cache',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    Authorization: 'Bearer ' + getCookie('token')\r\n                }\r\n            })\r\n            return requestHandler(resp)\r\n        },\r\n        logout: async () => {\r\n            const resp = await fetch(`${BASE_URL}/auth/logout`, {\r\n                method: 'POST',\r\n                cache: 'no-cache',\r\n                body: JSON.stringify({ token: localStorage.getItem('refreshToken') }),\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            })\r\n            return requestHandler(resp)\r\n        },\r\n        updateUser: async (user: User) => {\r\n            const resp = await fetch(`${BASE_URL}/auth/user`, {\r\n                method: 'PATCH',\r\n                cache: 'no-cache',\r\n                body: JSON.stringify(user),\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    Authorization: 'Bearer ' + getCookie('token')\r\n                }\r\n            })\r\n            return requestHandler(resp)\r\n        },\r\n        refreshToken: async () => {\r\n            const resp = await fetch(`${BASE_URL}/auth/token`, {\r\n                method: 'POST',\r\n                cache: 'no-cache',\r\n                body: JSON.stringify({ token: localStorage.getItem('refreshToken') }),\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            })\r\n            return requestHandler(resp)\r\n        },\r\n        resetPassword: async (password: string, token: string) => {\r\n            const resp = await fetch(`${BASE_URL}/password-reset/reset`, {\r\n                method: 'POST',\r\n                cache: 'no-cache',\r\n                body: JSON.stringify({ password, token }),\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            })\r\n            return requestHandler(resp)\r\n        },\r\n        forgotPassword: async (email: string) => {\r\n            const resp = await fetch(`${BASE_URL}/password-reset`, {\r\n                method: 'POST',\r\n                cache: 'no-cache',\r\n                body: JSON.stringify({ email }),\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            })\r\n            return requestHandler(resp)\r\n        }\r\n    }\r\n}\r\n\r\n","export const GET_INGREDIENTS_REQUEST: 'GET_INGREDIENTS_REQUEST' = 'GET_INGREDIENTS_REQUEST';\r\nexport const GET_INGREDIENTS_SUCCESS: 'GET_INGREDIENTS_SUCCESS' = 'GET_INGREDIENTS_SUCCESS';\r\nexport const GET_INGREDIENTS_FAILED: 'GET_INGREDIENTS_FAILED' = 'GET_INGREDIENTS_FAILED';\r\nexport const INCREASE_INGREDIENT: 'INCREASE_INGREDIENT' = 'INCREASE_INGREDIENT';\r\nexport const DECREASE_INGREDIENT: 'DECREASE_INGREDIENT' = 'DECREASE_INGREDIENT';\r\nexport const DELETE_INGREDIENT: 'DELETE_INGREDIENT' = 'DELETE_INGREDIENT';\r\nexport const ADD_INGREDIENTS: 'ADD_INGREDIENTS' = 'ADD_INGREDIENTS';\r\nexport const UPDATE_CONSTRUCTOR: 'UPDATE_CONSTRUCTOR' = 'UPDATE_CONSTRUCTOR';\r\n","import React, { useState, useEffect, useCallback } from 'react';\r\nimport cn from 'classnames';\r\nimport { ConstructorElement, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport PriceItem from '../price-item/price-item';\r\nimport styles from './burger-constructor.module.css';\r\nimport BurgerItem from '../burger-item/burger-item';\r\nimport { Ingredient } from '../../model/ingredient'\r\nimport { useLocation, useHistory } from 'react-router-dom';\r\nimport { useDispatch } from '../../hooks/useDispatch';\r\nimport { useDrop } from 'react-dnd';\r\nimport { createOrder } from '../../services/actions/orders';\r\nimport { useSelector } from '../../hooks/useSelector';\r\nimport { DELETE_INGREDIENT, DECREASE_INGREDIENT, UPDATE_CONSTRUCTOR } from '../../services/constants/ingredietns';\r\nimport { CLEAR_ORDER_NUMBER } from '../../services/constants/orders';\r\nimport { IngredientWithUnicId } from '../../model/ingredient';\r\n\r\n\r\nconst BurgerConstructor: React.FunctionComponent<{\r\n  onDropHandler: (item: Ingredient) => void;\r\n}> = ({ onDropHandler }) => {\r\n\r\n  const [, dropTarget] = useDrop({\r\n    accept: 'ingredient',\r\n    drop(item: Ingredient) {\r\n      onDropHandler(item);\r\n    },\r\n    collect: (monitor) => ({\r\n      isHover: monitor.isOver(),\r\n      canDrop: monitor.canDrop(),\r\n    }),\r\n  });\r\n\r\n  const { bun, ingredients } = useSelector(\r\n    (store) => store.ingredients.burgerIngredients\r\n  );\r\n\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const [totalPrice, setTotalPrice] = useState<number>(0)\r\n\r\n  useEffect(() => {\r\n    const bunPrice = bun ? bun.price : 0;\r\n    const price = bunPrice * 2 + ingredients.reduce((acc: any, curr: any) => (acc += curr.price), 0);\r\n    setTotalPrice(price);\r\n  }, [bun, ingredients]);\r\n\r\n  function handleClick() {\r\n    dispatch({\r\n      type: CLEAR_ORDER_NUMBER      \r\n    });\r\n    const id = ingredients\r\n      .map((item: Ingredient) => {\r\n        return item._id;\r\n      })\r\n      .concat(bun ? bun._id : \"\");\r\n    history.push({\r\n      pathname: '/order',\r\n      state: {\r\n        background: location\r\n      }\r\n    });\r\n    dispatch(createOrder(id));\r\n  }\r\n\r\n  const moveItem = useCallback(\r\n    (dragIndex, hoverIndex) => {\r\n      dispatch({\r\n        type: UPDATE_CONSTRUCTOR,\r\n        toIndex: hoverIndex,\r\n        fromIndex: dragIndex,\r\n      });\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  return (\r\n    <section className={cn(styles.container, 'pl-4')}>\r\n      <div ref={dropTarget} data-cy='drop-target'\r\n        className={cn(styles['burger-container'])}>\r\n        {bun && (\r\n          <div className={'mr-8'} data-cy=\"up\">\r\n            <ConstructorElement\r\n              type='top'\r\n              isLocked={true}\r\n              text={`${bun.name} (верх)`}\r\n              price={bun.price}\r\n              thumbnail={bun.image}\r\n            />\r\n          </div>\r\n        )}\r\n        <ul className={cn(styles.list, 'pr-4')} data-cy=\"ingredients-container\">\r\n          {ingredients.map((el: IngredientWithUnicId, index: any) => {\r\n            const deleteIngredient = () => {\r\n              dispatch({\r\n                type: DELETE_INGREDIENT,\r\n                id: el.unicId,\r\n              });\r\n              dispatch({\r\n                type: DECREASE_INGREDIENT,\r\n                key: el._id,\r\n                typeItem: el.type,\r\n              });\r\n            };\r\n            return (\r\n              <BurgerItem\r\n                item={el}\r\n                key={el.unicId}\r\n                index={index}\r\n                deleteIngredient={deleteIngredient}\r\n                moveItem={moveItem} />\r\n            );\r\n          })}\r\n        </ul>\r\n        {bun && (\r\n          <div className={'mr-8'} data-cy=\"down\">\r\n            <ConstructorElement\r\n              type='bottom'\r\n              isLocked={true}\r\n              text={`${bun.name} (низ)`}\r\n              price={bun.price}\r\n              thumbnail={bun.image}\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n      <div className={cn(styles.order, 'mt-10')}>\r\n        {ingredients.length || bun ? (\r\n          <PriceItem price={totalPrice} classes='text_type_main-large mr-10' />\r\n        ) : null}\r\n        {bun && (\r\n          <Button type='primary' size='large' onClick={handleClick}>\r\n            Оформить заказ\r\n          </Button>\r\n        )}\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default BurgerConstructor;\r\n","import { Order, OrderInfo } from '../../model/order'\r\nimport {  GET_ORDER_REQUEST, GET_ORDER_SUCCESS, GET_ORDER_FAILED, CLEAR_ORDER_NUMBER, CREATE_ORDER_REQUEST,\r\n  CREATE_ORDER_SUCCESS, CREATE_ORDER_FAILED, GET_USER_ORDER_REQUEST, GET_USER_ORDER_SUCCESS, GET_USER_ORDER_FAILED } from '../constants/orders';\r\nimport { api } from '../../api/api';\r\nimport { AppDispatch, AppThunk } from '../../types';\r\n\r\nexport interface IGetOrderOrderRequestAction {\r\n  readonly type: typeof GET_ORDER_REQUEST;\r\n}\r\n\r\nexport interface IGetOrderOrderSuccessAction {\r\n  readonly type: typeof GET_ORDER_SUCCESS;\r\n  readonly order: Order;\r\n}\r\n\r\nexport interface IGetOrderOrderFailedAction {\r\n  readonly type: typeof GET_ORDER_FAILED;\r\n}\r\n\r\nexport interface IClearOrderNumberAction {\r\n    readonly type: typeof CLEAR_ORDER_NUMBER;\r\n  }\r\n\r\n  export interface IGetOrderOrderRequestAction {\r\n    readonly type: typeof GET_ORDER_REQUEST;\r\n  }\r\n  \r\n  export interface IGetOrderOrderSuccessAction {\r\n    readonly type: typeof GET_ORDER_SUCCESS;\r\n    readonly order: Order;\r\n  }\r\n  \r\n  export interface IGetOrderOrderFailedAction {\r\n    readonly type: typeof GET_ORDER_FAILED;\r\n  }\r\n  \r\n  export interface IGetUserOrderOrderRequestAction {\r\n    readonly type: typeof GET_USER_ORDER_REQUEST;\r\n  }\r\n  \r\n  export interface IGetUserOrderOrderSuccessAction {\r\n    readonly type: typeof GET_USER_ORDER_SUCCESS;\r\n    readonly order: Order;\r\n  }\r\n  \r\n  export interface IGetUserOrderOrderFailedAction {\r\n    readonly type: typeof GET_USER_ORDER_FAILED;\r\n  }\r\n\r\n  export interface ICreateOrderRequestAction {\r\n    readonly type: typeof CREATE_ORDER_REQUEST;\r\n  }\r\n  \r\n  export interface ICreateOrderSuccessAction {\r\n    readonly type: typeof CREATE_ORDER_SUCCESS;\r\n    readonly order: OrderInfo;\r\n  }\r\n  \r\n  export interface ICreateOrderFailedAction {\r\n    readonly type: typeof CREATE_ORDER_FAILED;\r\n  }\r\n  \r\n\r\nexport type TOrdersActions =\r\n  | IGetOrderOrderRequestAction\r\n  | IGetOrderOrderSuccessAction\r\n  | IClearOrderNumberAction\r\n  | IGetOrderOrderFailedAction\r\n  | IGetOrderOrderRequestAction\r\n  | IGetOrderOrderSuccessAction\r\n  | IGetOrderOrderFailedAction\r\n  | IGetUserOrderOrderRequestAction\r\n  | IGetUserOrderOrderSuccessAction\r\n  | IGetUserOrderOrderFailedAction\r\n  | ICreateOrderRequestAction\r\n  | ICreateOrderSuccessAction\r\n  | ICreateOrderFailedAction;\r\n\r\n\r\n  export const getOrder: AppThunk = (id: string) => {\r\n    return function (dispatch: AppDispatch) {\r\n      dispatch({\r\n        type: GET_ORDER_REQUEST,\r\n      });\r\n      api.orders.getOrderRequest(id)\r\n        .then((res) => {\r\n          if (res && res.success) {\r\n            dispatch({\r\n              type: GET_ORDER_SUCCESS,\r\n              order: res.orders[0],\r\n            });\r\n          } else {\r\n            dispatch({\r\n              type: GET_ORDER_FAILED,\r\n            });\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n          dispatch({\r\n            type: GET_ORDER_FAILED,\r\n          });\r\n        });\r\n    };\r\n  };\r\n  \r\n  export const getUserOrder: AppThunk = (id: string) => {\r\n    return function (dispatch: AppDispatch) {\r\n      dispatch({\r\n        type: GET_USER_ORDER_REQUEST,\r\n      });\r\n      api.orders.getUserOrderRequest(id)\r\n        .then((res) => {\r\n          if (res && res.success) {\r\n            dispatch({\r\n              type: GET_USER_ORDER_SUCCESS,\r\n              order: res.orders[0],\r\n            });\r\n          } else {\r\n            dispatch({\r\n              type: GET_USER_ORDER_FAILED,\r\n            });\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n          dispatch({\r\n            type: GET_ORDER_FAILED,\r\n          });\r\n        });\r\n    };\r\n  };\r\n  \r\n  export const createOrder: AppThunk = (ingredientsId: Array<string>) => {\r\n    return function (dispatch: AppDispatch) {\r\n      dispatch({\r\n        type: CREATE_ORDER_REQUEST,\r\n      });    \r\n      api.orders.addOrdersRequest(ingredientsId)      \r\n        .then((res) => {                \r\n          if (res && res.success) {\r\n            dispatch({\r\n              type: CREATE_ORDER_SUCCESS,\r\n              order: res,\r\n            });\r\n          } else {\r\n            dispatch({\r\n              type: CREATE_ORDER_FAILED,\r\n            });\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n          dispatch({\r\n            type: CREATE_ORDER_FAILED,\r\n          });\r\n        });\r\n    };\r\n  };\r\n","import React from 'react'\r\nimport BurgerIngredients from \"../burger-ingredients/burger-ingredients\"\r\nimport BurgerConstructor from \"../burger-constructor/burger-constructor\"\r\nimport styles from './burger-union.module.css';\r\nimport cn from 'classnames';\r\nimport { DndProvider } from 'react-dnd';\r\nimport { HTML5Backend } from 'react-dnd-html5-backend';\r\nimport { useDispatch } from '../../hooks/useDispatch';\r\nimport { Ingredient } from '../../model/ingredient'\r\nimport { ADD_INGREDIENTS, INCREASE_INGREDIENT } from '../../services/constants/ingredietns';\r\n\r\nconst BurgerUnion: React.FunctionComponent = () => {    \r\n    \r\n      const dispatch = useDispatch();\r\n      const handleDrop = (item: Ingredient) => {\r\n        const newItem = { ...item, unicId: Math.random() };\r\n        dispatch({\r\n          type: ADD_INGREDIENTS,\r\n          item: newItem\r\n        });\r\n        dispatch({\r\n          type: INCREASE_INGREDIENT,\r\n          key: item._id,\r\n          typeItem: item.type,\r\n        });\r\n      };\r\n\r\n    return (\r\n        <main className={cn(styles.main, 'p-10')}>\r\n            <div className={styles.columns}>\r\n                <DndProvider backend={HTML5Backend}>\r\n                    <BurgerIngredients />\r\n                    <BurgerConstructor onDropHandler={handleDrop}/>\r\n                </DndProvider>\r\n            </div>\r\n        </main>\r\n    );\r\n};\r\n\r\nexport default BurgerUnion; ","import React from 'react'\r\nimport cn from 'classnames';\r\nimport styles from './order-details.module.css';\r\nimport checkMark from '../../images/check-mark.png';\r\nimport { useSelector } from '../../hooks/useSelector';\r\n\r\nconst OrderDetails: React.FunctionComponent = () => {\r\n\r\n    const { createOrder } = useSelector((store) => store.orders)    \r\n    const orderNumber =createOrder?.order.number\r\n\r\n    return (\r\n        <div className={cn(styles.order, 'p-15')}>\r\n            <h1 className={cn(styles.title, 'text', 'text_type_digits-large', 'mb-8')}>\r\n                {orderNumber}\r\n            </h1>\r\n            <p className={cn('text', 'text_type_main-medium')}>\r\n                идентификатор заказа\r\n            </p>\r\n            <img src={checkMark} alt='img' className={cn(styles.image, 'mt-15', 'mb-15')} />\r\n            <p className={cn('text', 'text_type_main-default', 'mb-2')}>\r\n                Ваш заказ начали готовить\r\n            </p>\r\n            <p className={cn('text', 'text_type_main-default', 'text_color_inactive')}>\r\n                Дождитесь готовности на орбитальной станции\r\n            </p>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default OrderDetails;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAABVZJREFUaEO9mnfInTUUxn/FCYIT/3DVCS4EVwWh1oml7lknFusWBRWxihYn4qCoWLQquMCitqK2qDhxI1I3igpOXOAu4sKiPCWn5Etzkryv994DL6U3JyfnSU7OyjeOwdEKwN7ABsmnFb5OvmeBJT2XvizMexV4alxPITZtdWBf4EDgWGDFRnn/AHOBhVICWNw479+Eb2pfADsBpwKHA+s0Lu6x/QjMBmxnPb7XgQnJ4LyuAExxKT9o2hN43hF6C3BGZmxWFwDXAhc0aP0L8Hn0/QmsGX27AGtn5HgATgTudNad0grgUeAgR8jPwDPR92kDyCnAceET+zxgambedsC7jjxt6IUtAD4EtswI+Qa4A7gN+LZB6T4s6aU1GS8Ej7ekBsATcPmQFZeinwCbZVD/FZR/RWMlAC8Cu2UE6Kh15MOk+4GjnAXOB2bZmAfgBuCcjICdgTeGqTkgBa931pgPHBmP5QBcCVySEVAzt0Hg2r3gSr8KpvNxCYD8/KKMJrLFzwahYUHGasBvhfFpwL3peLqr8ihpkFJ+89yQlZd4xY81nHVuBc7MjcUAcrsvb1ML8YPA9jSwjyPorWA6ijfLUQwg3X35eV3aYfl4U+Zq4KLCLuwHPOGNG4C1AEVQhXyjUez+YcBDBeWvAC4tHbEBSPONX4GtC7uvML4/sG2ICY8Dd3e0pY2ALwtzlGZPTsb3UPoAvA/cpPkG4GHgkIj5MeAAR7gXZHRXdGqt5EV5zVd9IOcRe0RZR3wPluooAKqkFJ71r9EM4LqMJptU3On2wDsNCN4EdijwnR1qhJhFsnWhYxovAKqonkwGtgI+yixwFnBzYeG/gVUqAHKuOp5yH3B8RkYuM50oAKn9yx/rUudoL0D1bImUhpznMJwcMlhvvhI4mc4XGYaVg6XEQ8cIgNIGpQ9GbxeOd6VQnK9bAaHLp0tYM4FUzNHAAwXZygZkxkYzBEBR7vTox0eAQwtCvEQvnvITsCHwR/Rj6dKK7Ubg3MrGyNRl8kazBWBB6CrYjzVBylmUau9YWewuYHrgUYm5cYH/tWA6v1dk6v7pHhot6ANAk9VGEfAaqUjXSWxRYWzNt9LTX9jHhEwX5ezK3f8vXQwonWihNF7N6XqJ00VyvZoWRYxHjS2vWZCTozigeGA0s6sbTYXuCqjF14e+D3b/XofJisRxvjbdC2Sbh+SuRfY1gCJ3V1Ldoa5GK6moUpyIabKlEmo+xX3N04DbWyWHU9BptJIaVSe1Mgc+AVYUN1J/dVVL5u4BTogGvUaTt6Yit3x/C30QTOe7FuaI58GkoFd5Oc0AHJG0SmRrSpW7FDM6tTkNSilIKlh2ofVCCh2nOOpOzDcAapOroIk7zX0KGuVJypc86mM6kqVUPS5s1NHWnVg8jJLSSxl+AGo5VA64dl91wfrRoO6nTnxMZ25QRb3X21EOo+K9K6W7r/nLGmwtbZU+rUTZpy6dUR8ZmpvK0W/Ldj89Af3fa2z1aSluE1rmAiLP05WadMm1C72HjFG0FmOQubukMndM0PSU8h40RtFi3NTJApT9HpweY2lXvYeN1tS3q8mI3ytZVZ+rTl+OamYxqgcOuUq5Ra+J5epZAyDE3kPHIJ6YTPFTEj9vO/0SMKl0lC0ANL9UB6uL93IAqruTa8fEOui9TbYsxSYWOtK10napzFYA4vUePtINSp9ZNa5Ogn1xPu9t7lXAzJZL1AWAxQmltcN46LYgpUDV/IzVFYBtir3YK8K27GhpM3ViCnadFDeBfQHYfKW3agqrrlWnIu6vlpTWX6qoHpZvV2qdfbwYhgmVZI7qz23G6PAfFrYf7FXbr7AAAAAASUVORK5CYII=\"","export const LOGIN_REQUEST: 'LOGIN_REQUEST' = 'LOGIN_REQUEST';\r\nexport const LOGIN_SUCCESS: 'LOGIN_SUCCESS' = 'LOGIN_SUCCESS';\r\nexport const LOGIN_FAILED: 'LOGIN_FAILED' = 'LOGIN_FAILED';\r\nexport const REGISTER_REQUEST: 'REGISTER_REQUEST' = 'REGISTER_REQUEST';\r\nexport const REGISTER_SUCCESS: 'REGISTER_SUCCESS' = 'REGISTER_SUCCESS';\r\nexport const REGISTER_FAILED: 'REGISTER_FAILED' = 'REGISTER_FAILED';\r\nexport const LOGOUT_REQUEST: 'LOGOUT_REQUEST' = 'LOGOUT_REQUEST';\r\nexport const LOGOUT_SUCCESS: 'LOGOUT_SUCCESS' = 'LOGOUT_SUCCESS';\r\nexport const LOGOUT_FAILED: 'LOGOUT_FAILED' = 'LOGOUT_FAILED';\r\nexport const GET_USER_REQUEST: 'GET_USER_REQUEST' = 'GET_USER_REQUEST';\r\nexport const GET_USER_SUCCESS: 'GET_USER_SUCCESS' = 'GET_USER_SUCCESS';\r\nexport const GET_USER_FAILED: 'GET_USER_FAILED' = 'GET_USER_FAILED';\r\nexport const UPDATE_USER_REQUEST: 'UPDATE_USER_REQUEST' = 'UPDATE_USER_REQUEST';\r\nexport const UPDATE_USER_SUCCESS: 'UPDATE_USER_SUCCESS' = 'UPDATE_USER_SUCCESS';\r\nexport const UPDATE_USER_FAILED: 'UPDATE_USER_FAILED' = 'UPDATE_USER_FAILED';\r\nexport const FORGOT_PASSWORD_REQUEST: 'FORGOT_PASSWORD_REQUEST' = 'FORGOT_PASSWORD_REQUEST';\r\nexport const FORGOT_PASSWORD_SUCCESS: 'FORGOT_PASSWORD_SUCCESS' = 'FORGOT_PASSWORD_SUCCESS';\r\nexport const FORGOT_PASSWORD_FAILED: 'FORGOT_PASSWORD_FAILED' = 'FORGOT_PASSWORD_FAILED';\r\nexport const RESET_PASSWORD_REQUEST: 'RESET_PASSWORD_REQUEST' = 'RESET_PASSWORD_REQUEST';\r\nexport const RESET_PASSWORD_SUCCESS: 'RESET_PASSWORD_SUCCESS' = 'RESET_PASSWORD_SUCCESS';\r\nexport const RESET_PASSWORD_FAILED: 'RESET_PASSWORD_FAILED' = 'RESET_PASSWORD_FAILED';\r\nexport const REFRESH_TOKEN_REQUEST: 'REFRESH_TOKEN_REQUEST' = 'REFRESH_TOKEN_REQUEST';\r\nexport const REFRESH_TOKEN_SUCCESS: 'REFRESH_TOKEN_SUCCESS' = 'REFRESH_TOKEN_SUCCESS';\r\nexport const REFRESH_TOKEN_FAILED: 'REFRESH_TOKEN_FAILED' = 'REFRESH_TOKEN_FAILED';","import React, { useState, SyntheticEvent } from 'react';\r\nimport { Redirect, useLocation } from 'react-router-dom';\r\nimport cn from 'classnames';\r\nimport { Input, Button, PasswordInput } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { login } from '../../services/actions/auth';\r\nimport styles from './login.module.css';\r\nimport { useDispatch } from '../../hooks/useDispatch';\r\nimport { Link } from 'react-router-dom';\r\nimport { useSelector } from '../../hooks/useSelector';\r\n\r\nconst Login: React.FunctionComponent = () => {\r\n  const [data, setData] = useState({\r\n    email: '',\r\n    password: '',\r\n  });\r\n\r\n  const { state: { from = '/' } = {} } = useLocation() as {\r\n    state: { from?: string };\r\n  };\r\n\r\n  const userName = useSelector((store) => store.auth.name)\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const handleInputChange = (event: SyntheticEvent<HTMLInputElement>) => {\r\n    const target = event.target as HTMLInputElement;\r\n    const value = target.value;\r\n    const name = target.name;\r\n    setData({\r\n      ...data,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const submit = (e: SyntheticEvent) => {\r\n    e.preventDefault();\r\n    dispatch(login(data));\r\n  };\r\n\r\n  const hasToken = localStorage.getItem('refreshToken')\r\n\r\n  if (userName || hasToken) {\r\n    return (\r\n      <Redirect to={from} />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <form onSubmit={submit} className={cn(styles.form, 'mb-20')}>\r\n        <h1 className={cn(styles.title, 'text text_type_main-medium')}>Вход</h1>\r\n        <Input\r\n          type={'text'}\r\n          placeholder={'E-mail'}\r\n          onChange={handleInputChange}\r\n          value={data.email}\r\n          name={'email'}\r\n          error={false}\r\n          errorText={'Ошибка'}\r\n          size={'default'}\r\n        />\r\n        <PasswordInput\r\n          value={data.password}\r\n          name={'password'}\r\n          onChange={handleInputChange}\r\n        />\r\n        <Button type='primary' size='medium'>\r\n          Войти\r\n        </Button>\r\n      </form>\r\n      <div className={cn('mb-4')}>\r\n        <span className={'text text_type_main-default text_color_inactive'}>\r\n          Вы - новый пользователь?\r\n        </span>\r\n        <Link\r\n          to='/register'\r\n          className={cn('text text_type_main-default', styles.link, 'pl-2')}\r\n        >\r\n          Зарегистрироваться\r\n        </Link>\r\n      </div>\r\n      <div>\r\n        <span className={'text text_type_main-default text_color_inactive'}>\r\n          Забыли пароль?\r\n        </span>\r\n        <Link\r\n          to='/forgot-password'\r\n          className={cn('text text_type_main-default', styles.link, 'pl-2')}\r\n        >\r\n          Восстановить пароль\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import { api } from '../../api/api';\r\nimport { User } from '../../model/user'\r\nimport {\r\n    REGISTER_REQUEST, REGISTER_SUCCESS, REGISTER_FAILED,\r\n    LOGIN_REQUEST, LOGIN_SUCCESS, LOGIN_FAILED,\r\n    GET_USER_REQUEST, GET_USER_SUCCESS, GET_USER_FAILED,\r\n    UPDATE_USER_REQUEST, UPDATE_USER_SUCCESS, UPDATE_USER_FAILED,\r\n    RESET_PASSWORD_REQUEST, RESET_PASSWORD_SUCCESS, RESET_PASSWORD_FAILED,\r\n    FORGOT_PASSWORD_REQUEST, FORGOT_PASSWORD_SUCCESS, FORGOT_PASSWORD_FAILED,\r\n    REFRESH_TOKEN_REQUEST, REFRESH_TOKEN_SUCCESS, REFRESH_TOKEN_FAILED,\r\n    LOGOUT_REQUEST, LOGOUT_SUCCESS, LOGOUT_FAILED\r\n} from '../constants/auth';\r\nimport { setCookie, deleteCookie } from '../../utils/auth';\r\nimport { AppDispatch, AppThunk } from '../../types';\r\n\r\nexport interface IRegisterRequestAction {\r\n    readonly type: typeof REGISTER_REQUEST;\r\n}\r\n\r\nexport interface IRegisterSuccessAction {\r\n    readonly type: typeof REGISTER_SUCCESS;\r\n    readonly user: User;\r\n}\r\n\r\nexport interface IRegisterFailedAction {\r\n    readonly type: typeof REGISTER_FAILED;\r\n}\r\n\r\nexport interface ILoginRequestAction {\r\n    readonly type: typeof LOGIN_REQUEST;\r\n}\r\n\r\nexport interface ILoginSuccessAction {\r\n    readonly type: typeof LOGIN_SUCCESS;\r\n    readonly user: User;\r\n}\r\n\r\nexport interface ILoginFailedAction {\r\n    readonly type: typeof LOGIN_FAILED;\r\n}\r\n\r\nexport interface IGetUserRequestAction {\r\n    readonly type: typeof GET_USER_REQUEST;\r\n}\r\n\r\nexport interface IGetUserSuccessAction {\r\n    readonly type: typeof GET_USER_SUCCESS;\r\n    readonly user: User;\r\n}\r\n\r\nexport interface IGetUserFailedAction {\r\n    readonly type: typeof GET_USER_FAILED;\r\n}\r\n\r\nexport interface IUpdateUserRequestAction {\r\n    readonly type: typeof UPDATE_USER_REQUEST;\r\n}\r\n\r\nexport interface IUpdateUserSuccessAction {\r\n    readonly type: typeof UPDATE_USER_SUCCESS;\r\n    readonly user: User;\r\n}\r\n\r\nexport interface IUpdateUserFailedAction {\r\n    readonly type: typeof UPDATE_USER_FAILED;\r\n}\r\n\r\nexport interface IForgotPasswordRequestAction {\r\n    readonly type: typeof FORGOT_PASSWORD_REQUEST;\r\n}\r\n\r\nexport interface IForgotPasswordSuccessAction {\r\n    readonly type: typeof FORGOT_PASSWORD_SUCCESS;\r\n}\r\n\r\nexport interface IForgotPasswordFailedAction {\r\n    readonly type: typeof FORGOT_PASSWORD_FAILED;\r\n}\r\n\r\nexport interface IResetPasswordRequestAction {\r\n    readonly type: typeof RESET_PASSWORD_REQUEST;\r\n}\r\n\r\nexport interface IResetPasswordSuccessAction {\r\n    readonly type: typeof RESET_PASSWORD_SUCCESS;\r\n}\r\n\r\nexport interface IResetPasswordFailedAction {\r\n    readonly type: typeof RESET_PASSWORD_FAILED;\r\n}\r\n\r\nexport interface ILogoutRequestAction {\r\n    readonly type: typeof LOGOUT_REQUEST;\r\n}\r\n\r\nexport interface ILogoutSuccessAction {\r\n    readonly type: typeof LOGOUT_SUCCESS;\r\n}\r\n\r\nexport interface ILogoutFailedAction {\r\n    readonly type: typeof LOGOUT_FAILED;\r\n}\r\n\r\nexport interface IRefreshTokenRequestAction {\r\n    readonly type: typeof REFRESH_TOKEN_REQUEST;\r\n}\r\n\r\nexport interface IRefreshTokenSuccessAction {\r\n    readonly type: typeof REFRESH_TOKEN_SUCCESS;\r\n}\r\n\r\nexport interface IRefreshTokenFailedAction {\r\n    readonly type: typeof REFRESH_TOKEN_FAILED;\r\n}\r\n\r\nexport type TAuthActions =\r\n    | IRegisterRequestAction\r\n    | IRegisterSuccessAction\r\n    | IRegisterFailedAction\r\n    | ILoginRequestAction\r\n    | ILoginSuccessAction\r\n    | ILoginFailedAction\r\n    | IGetUserRequestAction\r\n    | IGetUserFailedAction\r\n    | IGetUserSuccessAction\r\n    | IUpdateUserRequestAction\r\n    | IUpdateUserSuccessAction\r\n    | IUpdateUserFailedAction\r\n    | IForgotPasswordRequestAction\r\n    | IForgotPasswordSuccessAction\r\n    | IForgotPasswordFailedAction\r\n    | IResetPasswordRequestAction\r\n    | IResetPasswordSuccessAction\r\n    | IResetPasswordFailedAction\r\n    | ILogoutRequestAction\r\n    | ILogoutFailedAction\r\n    | ILogoutSuccessAction\r\n    | IRefreshTokenRequestAction\r\n    | IRefreshTokenSuccessAction\r\n    | IRefreshTokenFailedAction;\r\n\r\nexport const register: AppThunk = (user: User) => {\r\n    return function (dispatch: AppDispatch) {\r\n        dispatch({ type: REGISTER_REQUEST });\r\n        api.auth.register(user)\r\n            .then((res) => {\r\n                if (res && res.success) {\r\n                    const authToken = res.accessToken.split('Bearer ')[1];\r\n                    setCookie('token', authToken);\r\n                    const refreshToken = res.refreshToken;\r\n                    localStorage.setItem('refreshToken', refreshToken);\r\n                    dispatch({ type: REGISTER_SUCCESS, user: res.user });\r\n                } else {\r\n                    dispatch({ type: REGISTER_FAILED });\r\n                }\r\n            })\r\n            .catch(() => { dispatch({ type: REGISTER_FAILED }); });\r\n    };\r\n};\r\n\r\nexport const login: AppThunk = (user: User) => {\r\n    return function (dispatch: AppDispatch) {\r\n        dispatch({ type: LOGIN_REQUEST });\r\n        api.auth.signIn(user)\r\n            .then((res) => {\r\n                if (res && res.success) {\r\n                    const authToken = res.accessToken.split('Bearer ')[1];\r\n                    const refreshToken = res.refreshToken;\r\n                    setCookie('token', authToken);\r\n                    localStorage.setItem('refreshToken', refreshToken);\r\n                    dispatch({ type: LOGIN_SUCCESS, user: res.user });\r\n                } else {\r\n                    dispatch({ type: LOGIN_FAILED });\r\n                }\r\n            })\r\n            .catch(() => { dispatch({ type: LOGIN_FAILED, }); });\r\n    };\r\n};\r\n\r\nexport const getUser: AppThunk = () => {\r\n    return function (dispatch: AppDispatch) {\r\n        dispatch({ type: GET_USER_REQUEST });\r\n        api.auth.getUser()\r\n            .then((res) => {\r\n                if (res && res.success) {\r\n                    dispatch({ type: GET_USER_SUCCESS, user: res.user });\r\n                } else {\r\n                    dispatch({ type: GET_USER_FAILED });\r\n                }\r\n            })\r\n            .catch(() => { dispatch({ type: GET_USER_FAILED }); });\r\n    };\r\n};\r\n\r\nexport const logout: AppThunk = () => {\r\n    return function (dispatch: AppDispatch) {\r\n        dispatch({ type: LOGOUT_REQUEST });\r\n        api.auth.logout()\r\n            .then((res) => {\r\n                if (res && res.success) {\r\n                    deleteCookie('token');\r\n                    localStorage.removeItem('refreshToken');\r\n                    dispatch({ type: LOGOUT_SUCCESS });\r\n                } else {\r\n                    dispatch({ type: LOGOUT_FAILED });\r\n                }\r\n            })\r\n            .catch(() => {\r\n                dispatch({ type: LOGOUT_FAILED });\r\n            });\r\n    };\r\n};\r\n\r\nexport const updateUser: AppThunk = (user) => {\r\n    return function (dispatch: AppDispatch) {\r\n        dispatch({ type: UPDATE_USER_REQUEST });\r\n        api.auth.updateUser(user)\r\n            .then((res) => {\r\n                if (res && res.success) {\r\n                    dispatch({\r\n                        type: UPDATE_USER_SUCCESS,\r\n                        user: res.user,\r\n                    });\r\n                } else {\r\n                    dispatch({ type: UPDATE_USER_FAILED });\r\n                }\r\n            })\r\n            .catch(() => {\r\n                dispatch({ type: UPDATE_USER_FAILED });\r\n            });\r\n    };\r\n};\r\n\r\nexport const refreshToken: AppThunk = () => {\r\n    return function (dispatch: AppDispatch) {\r\n        dispatch({ type: REFRESH_TOKEN_REQUEST });\r\n        api.auth.refreshToken()\r\n            .then((res) => {\r\n                if (res && res.success) {\r\n                    localStorage.setItem('refreshToken', res.refreshToken);\r\n                    const authToken = res.accessToken.split('Bearer ')[1];\r\n                    setCookie('token', authToken);\r\n                    dispatch({ type: REFRESH_TOKEN_SUCCESS });\r\n                } else {\r\n                    dispatch({ type: REFRESH_TOKEN_FAILED });\r\n                }\r\n            }).catch(() => {\r\n                deleteCookie('token');\r\n                localStorage.removeItem('refreshToken');\r\n                dispatch({ type: REFRESH_TOKEN_FAILED });\r\n            });\r\n    };\r\n};\r\n\r\nexport const forgotPassword: AppThunk = (email: string) => {\r\n    return function (dispatch: AppDispatch) {\r\n        dispatch({ type: FORGOT_PASSWORD_REQUEST });\r\n        api.auth.forgotPassword(email)\r\n            .then(() => {\r\n                dispatch({ type: FORGOT_PASSWORD_SUCCESS });\r\n            })\r\n            .catch(() => {\r\n                dispatch({ type: FORGOT_PASSWORD_FAILED });\r\n            });\r\n    };\r\n};\r\n\r\nexport const resetPassword: AppThunk = (password: string, token: string) => {\r\n    return function (dispatch: AppDispatch) {\r\n        dispatch({ type: RESET_PASSWORD_REQUEST });\r\n        api.auth.resetPassword(password, token)\r\n            .then((res) => {\r\n                if (res && res.success) {\r\n                    dispatch({ type: RESET_PASSWORD_SUCCESS });\r\n                } else {\r\n                    dispatch({ type: RESET_PASSWORD_FAILED });\r\n                }\r\n            })\r\n            .catch(() => {\r\n                dispatch({ type: RESET_PASSWORD_FAILED });\r\n            });\r\n    };\r\n};\r\n","import React, { useState, memo, useCallback, SyntheticEvent } from 'react';\r\nimport cn from 'classnames';\r\nimport { Link } from 'react-router-dom';\r\nimport {\r\n  Input,\r\n  PasswordInput,\r\n  Button,\r\n} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { useDispatch } from '../../hooks/useDispatch';\r\nimport { useSelector } from '../../hooks/useSelector';\r\nimport { register } from '../../services/actions/auth';\r\nimport styles from './register.module.css';\r\n\r\nfunction Register() {\r\n  const [state, setState] = useState({\r\n    name: '',\r\n    email: '',\r\n    password: '',\r\n  });\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const isregisterSuccess = useSelector((store) => store.auth.isregisterSuccess);\r\n\r\n  const handleInputChange = (event: SyntheticEvent<HTMLInputElement>) => {\r\n    const target = event.target as HTMLInputElement;\r\n    const value = target.value;\r\n    const name = target.name;\r\n    setState({\r\n      ...state,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const onIconClick = useCallback(() => {\r\n    alert('Icon Click Callback');\r\n  }, []);\r\n\r\n  const submit = (e: SyntheticEvent) => {\r\n    e.preventDefault();\r\n    dispatch(register(state));\r\n  };\r\n  const hasToken = localStorage.getItem('refreshToken')\r\n\r\n  if (hasToken) {\r\n    return (\r\n      <Redirect\r\n        to={{\r\n          pathname: '/'\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (isregisterSuccess) {\r\n    return (\r\n      <Redirect\r\n        to={{\r\n          pathname: '/login'\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <form onSubmit={submit} className={cn(styles.form, 'mb-20')}>\r\n        <h1 className={cn(styles.title, 'text text_type_main-medium')}>\r\n          Регистрация\r\n        </h1>\r\n        <Input\r\n          type={'text'}\r\n          placeholder={'Имя'}\r\n          onChange={handleInputChange}\r\n          value={state.name}\r\n          name={'name'}\r\n          error={false}\r\n          onIconClick={onIconClick}\r\n          errorText={'Ошибка'}\r\n          size={'default'}\r\n        />\r\n        <Input\r\n          type={'text'}\r\n          placeholder={'E-mail'}\r\n          onChange={handleInputChange}\r\n          value={state.email}\r\n          name={'email'}\r\n          error={false}\r\n          onIconClick={onIconClick}\r\n          errorText={'Ошибка'}\r\n          size={'default'}\r\n        />\r\n        <PasswordInput\r\n          value={state.password}\r\n          name={'password'}\r\n          onChange={handleInputChange}\r\n        />\r\n        <Button type='primary' size='medium'>\r\n          Зарегистрироваться\r\n        </Button>\r\n      </form>\r\n      <div className={cn('mb-4')}>\r\n        <span className={'text text_type_main-default text_color_inactive'}>\r\n          Уже зарегистрированы?\r\n        </span>\r\n        <Link\r\n          to='/login'\r\n          className={cn('text text_type_main-default', styles.link, 'pl-2')}\r\n        >\r\n          Войти\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default memo(Register);\r\n","import React from 'react';\r\nimport cn from 'classnames';\r\nimport styles from './profile-navigation.module.css';\r\nimport { NavLink, useLocation } from 'react-router-dom';\r\n\r\nconst ProfileNavigation: React.FunctionComponent = () => {\r\n\r\n    const { pathname } = useLocation();\r\n\r\n    return (\r\n        <div className={cn(styles.nav)}>\r\n            <ul className={cn(styles['list-nav'], 'mb-20')}>\r\n                <li>\r\n                    <NavLink\r\n                        exact\r\n                        to='/profile'\r\n                        className={cn(\r\n                            styles.link,\r\n                            'pt-4',\r\n                            'pb-4',\r\n                            'pr-5',\r\n                            'mr-2',\r\n                            'text text_type_main-medium text_color_inactive'\r\n                        )}\r\n                        activeClassName={styles.link_active}\r\n                    >\r\n                        <span className={cn('ml-2')}>Профиль</span>\r\n                    </NavLink>\r\n                </li>\r\n                <li>\r\n                    <NavLink\r\n                        exact\r\n                        to='/profile/orders'\r\n                        className={cn(\r\n                            styles.link,\r\n                            'pt-4',\r\n                            'pb-4',\r\n                            'pr-5',\r\n                            'mr-2',\r\n                            'text text_type_main-medium text_color_inactive'\r\n                        )}\r\n                        activeClassName={styles.link_active}\r\n                    >\r\n                        <span className={cn('ml-2')}>История заказов</span>\r\n                    </NavLink>\r\n                </li>\r\n                <li>\r\n                    <NavLink\r\n                        exact\r\n                        to='/logout'\r\n                        className={cn(\r\n                            styles.link,\r\n                            'pt-4',\r\n                            'pb-4',\r\n                            'pr-5',\r\n                            'mr-2',\r\n                            'text text_type_main-medium text_color_inactive'\r\n                        )}\r\n                        activeClassName={styles.link_active}\r\n                    >\r\n                        <span className={cn('ml-2')}>\r\n                            Выход\r\n                        </span>\r\n                    </NavLink>\r\n                </li>\r\n            </ul>\r\n            {pathname === '/profile' ? (\r\n                <span className={cn('text text_type_main-default text_color_inactive')}>\r\n                    В этом разделе вы можете изменить свои персональные данные\r\n                </span>\r\n            ) : null}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ProfileNavigation;","import React, { useState, useEffect, SyntheticEvent, useRef } from 'react';\r\nimport cn from 'classnames';\r\nimport styles from './user-form.module.css';\r\nimport { Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { updateUser } from '../../services/actions/auth';\r\nimport { useDispatch } from '../../hooks/useDispatch';\r\nimport { useSelector } from '../../hooks/useSelector';\r\n\r\n\r\nconst UserForm: React.FunctionComponent = () => {\r\n\r\n    const currentUserName = useSelector((store) => store.auth.name);\r\n    const currentUserEmail = useSelector((store) => store.auth.email);\r\n    const dispatch = useDispatch();\r\n\r\n    const [state, setState] = useState({\r\n        name: '',\r\n        email: '',\r\n        password: '',\r\n        nameDisabled: true,\r\n        emailDisabled: true,\r\n        passwordDisabled: true,\r\n    });\r\n\r\n    useEffect(() => {\r\n        setState((state) => {\r\n            return {\r\n                ...state,\r\n                name: currentUserName,\r\n                email: currentUserEmail,\r\n            };\r\n        });\r\n\r\n    }, [currentUserName, currentUserEmail]);\r\n\r\n    const handleInputChange = (event: SyntheticEvent<HTMLInputElement>): void => {\r\n        const target = event.target as HTMLInputElement;\r\n        const value = target.value;\r\n        const name = target.name;\r\n        setState({\r\n            ...state,\r\n            [name]: value,\r\n        });\r\n    };\r\n    const nameInputRef = useRef<HTMLInputElement>(null);\r\n    const emailInputRef = useRef<HTMLInputElement>(null);\r\n    const passwordInputRef = useRef<HTMLInputElement>(null);\r\n\r\n    const activeNameInput = () => {\r\n        setState({\r\n            ...state,\r\n            nameDisabled: state.nameDisabled ? false : true,\r\n        });\r\n        if (nameInputRef && nameInputRef.current) {\r\n            nameInputRef.current.disabled = false;\r\n        }\r\n        setTimeout(() => nameInputRef && nameInputRef.current && nameInputRef.current.focus(), 0);\r\n    };\r\n\r\n    const activeEmailInput = () => {\r\n        setState({\r\n            ...state,\r\n            emailDisabled: state.emailDisabled ? false : true,\r\n        });\r\n        if (emailInputRef && emailInputRef.current) {\r\n            emailInputRef.current.disabled = false;\r\n        }\r\n        setTimeout(() => emailInputRef && emailInputRef.current && emailInputRef.current.focus(), 0);\r\n    };\r\n\r\n    const activePasswordInput = () => {\r\n        setState({\r\n            ...state,\r\n            passwordDisabled: state.passwordDisabled ? false : true,\r\n        });\r\n        if (passwordInputRef && passwordInputRef.current) {\r\n            passwordInputRef.current.disabled = false;\r\n        }\r\n        setTimeout(() => passwordInputRef && passwordInputRef.current && passwordInputRef.current.focus(), 0);\r\n    };\r\n\r\n    const iconNameInput = state.nameDisabled ? 'EditIcon' : 'CloseIcon';\r\n    const emailNameInput = state.emailDisabled ? 'EditIcon' : 'CloseIcon';\r\n    const passwordNameInput = state.passwordDisabled ? 'EditIcon' : 'CloseIcon';\r\n\r\n    const submit = (e: SyntheticEvent) => {\r\n        e.preventDefault();\r\n        let data = {};\r\n        data =\r\n            state.name !== currentUserName ? { ...data, name: state.name } : data;\r\n        data =\r\n            state.email !== currentUserEmail ? { ...data, email: state.email } : data;\r\n        data =\r\n            state.password.length !== 0\r\n                ? { ...data, password: state.password }\r\n                : data;\r\n        dispatch(updateUser({ ...data }));\r\n        setState({\r\n            ...state,\r\n            password: '',\r\n            nameDisabled: true,\r\n            emailDisabled: true,\r\n            passwordDisabled: true,\r\n        });\r\n    };\r\n\r\n    const handleClick = (e: SyntheticEvent) => {\r\n        e.preventDefault();\r\n        setState({\r\n            ...state,\r\n            name: currentUserName,\r\n            email: currentUserEmail,\r\n            password: '',\r\n            nameDisabled: true,\r\n            emailDisabled: true,\r\n            passwordDisabled: true,\r\n        });\r\n    };\r\n\r\n    return (\r\n        <form onSubmit={submit} className={cn(styles.form)}>\r\n            <Input\r\n                type={'text'}\r\n                placeholder={'Имя'}\r\n                onChange={handleInputChange}\r\n                icon={iconNameInput}\r\n                value={state.name}\r\n                name={'name'}\r\n                error={false}\r\n                ref={nameInputRef}\r\n                onIconClick={activeNameInput}\r\n                errorText={'Ошибка'}\r\n                size={'default'}\r\n                disabled={state.nameDisabled}\r\n            />\r\n            <Input\r\n                type={'email'}\r\n                placeholder={'Логин'}\r\n                onChange={handleInputChange}\r\n                icon={emailNameInput}\r\n                value={state.email}\r\n                name={'email'}\r\n                error={false}\r\n                ref={emailInputRef}\r\n                onIconClick={activeEmailInput}\r\n                errorText={'Ошибка'}\r\n                size={'default'}\r\n                disabled={state.emailDisabled}\r\n            />\r\n            <Input\r\n                type={'password'}\r\n                placeholder={'Пароль'}\r\n                onChange={handleInputChange}\r\n                icon={passwordNameInput}\r\n                value={state.password}\r\n                name={'password'}\r\n                error={false}\r\n                ref={passwordInputRef}\r\n                onIconClick={activePasswordInput}\r\n                errorText={'Ошибка'}\r\n                size={'default'}\r\n                disabled={state.passwordDisabled}\r\n            />\r\n            {state.name !== currentUserName ||\r\n                state.email !== currentUserEmail ||\r\n                state.password.length !== 0 ? (\r\n                <div className={styles.buttons}>\r\n                    <span className={styles.button} onClick={handleClick}>\r\n                        Отмена\r\n                    </span>\r\n                    <Button type='primary' size='medium'>\r\n                        Сохранить\r\n                    </Button>\r\n                </div>\r\n            ) : null}\r\n        </form>\r\n    );\r\n}\r\n\r\nexport default UserForm;","\r\nimport { Order } from '../model/order';\r\nimport {Ingredient, IngredientWithUnicId } from '../model/ingredient';\r\n\r\n\r\nexport const filterArray = (arr: Array<Ingredient>) => {\r\n  return arr.reduce(\r\n    (acc: { [name: string]: Array<Ingredient> }, curr) => ({\r\n      ...acc,\r\n      [curr.type]: [...(acc[curr.type] || []), curr],\r\n    }),\r\n    {}\r\n  );\r\n};\r\n\r\nexport const calculationCost = (bun: IngredientWithUnicId | null, arrOtherIngredients: Array<IngredientWithUnicId>) => {\r\n  const bunPrice = bun ? bun.price : 0;\r\n  return (\r\n    bunPrice * 2 +\r\n    arrOtherIngredients.reduce((acc, curr) => (acc += curr.price), 0)\r\n  );\r\n};\r\n\r\nexport const getCookie = (name: string) => {\r\n  const matches = document.cookie.match(\r\n    new RegExp(\r\n      '(?:^|; )' +\r\n      name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') +\r\n      '=([^;]*)'\r\n    )\r\n  );\r\n  return matches ? decodeURIComponent(matches[1]) : undefined;\r\n};\r\n\r\nconst getDaysDesc = (days: number) => (\r\n  days === 0 ? 'Сегодня'\r\n    : days === 1 ? 'Вчера'\r\n      : days > 1 ? `${days} дня(-ей) назад`\r\n        : 'Что-то пошло не так:(');\r\n\r\n\r\nexport const convertDate = (date: string) => {\r\n  const created: Date = new Date(date);\r\n  const today: Date = new Date();\r\n  today.setHours(0, 0, 0, 0);\r\n  const diffTime: number = Math.ceil((today.getTime() - created.getTime()) / (60 * 60 * 24 * 1000));\r\n  const hours = created.getHours() > 9 ? created.getHours() : `0${created.getHours()}`\r\n  const min = created.getMinutes() > 9 ? created.getMinutes() : `0${created.getMinutes()}`\r\n  return `${getDaysDesc(diffTime)}, ${hours}:${min}`;\r\n};\r\n\r\nexport const filterOrdersByStatus = (arr: Array<Order>) => {\r\n  return arr?.reduce((acc: { [name: string]: Array<Order> }, curr) => {\r\n    curr.status === 'done' ? acc['done'] = [...acc['done'], curr] : acc['pending'] = [...acc['pending'], curr]\r\n    return acc;\r\n  }, { done: [], pending: [] })\r\n}\r\n\r\nexport const getStatus = (status: string) => {\r\n  return status === 'done'\r\n    ? { text: 'Выполнен', textColor: 'green' }\r\n    : status === 'pending'\r\n      ? { text: 'Отменен', textColor: 'yellow' }\r\n      : { text: 'Готовится', textColor: 'white' };\r\n}\r\nexport const filterOrders = (arr: Array<Order>, id: string) => {\r\n  return arr?.filter((el: Order) => el.number === Number(id))[0]\r\n}\r\n\r\nexport const getPrice = (arr: Array<Ingredient>) => arr?.reduce((acc: number, curr: Ingredient) => acc += curr.price, 0)\r\n\r\nexport const getBurgerIngredients = (arrIdBurgerIngredients: Array<string>, arrAllIngredients: Array<Ingredient>) => (\r\n  arrIdBurgerIngredients?.map((id: string) => (\r\n    arrAllIngredients.filter((item: Ingredient) => item._id === id))))?.flat()\r\n\r\ninterface BurgerIngredientsWithCount {\r\n  item: { [name: string]: Ingredient }, count: { [name: string]: number }\r\n}\r\n\r\nexport const getBurgerIngredientsObjWithCount = (arr: Array<Ingredient>) => arr?.reduce((acc: BurgerIngredientsWithCount, curr: Ingredient) => {\r\n  const id = curr._id\r\n  acc.item[id] = curr;\r\n  acc.count[id] = (acc.count[id] || 0) + 1\r\n  return acc\r\n}\r\n  , { item: {}, count: {} })\r\n","import React from 'react';\r\nimport cn from 'classnames';\r\nimport PriceItem from '../price-item/price-item';\r\nimport styles from './orders-item.module.css';\r\nimport { useSelector } from '../../hooks/useSelector';\r\nimport { convertDate, getPrice, getBurgerIngredients } from '../../utils/functions';\r\nimport { getStatus } from '../../utils/functions';\r\nimport { Ingredient } from '../../model/ingredient'\r\n\r\ntype Props = {\r\n  number: number;\r\n  name: string;\r\n  allIngredients: Array<string>;\r\n  createdAt: string;\r\n  status?: string;\r\n}\r\n\r\nconst OrdersItem: React.FunctionComponent<Props> = ({ number, name, allIngredients, createdAt, status }) => {\r\n  const { ingredients } = useSelector((store) => store.ingredients);\r\n  const stringWithDay = convertDate(createdAt);\r\n  const burgerIngredients = getBurgerIngredients(allIngredients, ingredients);\r\n  const burgerItem = burgerIngredients.slice(0, 6);\r\n  const count = burgerIngredients.length;\r\n  let ing = 6;\r\n  const numberIngredients = count - 6;\r\n  const burgerPrice = getPrice(burgerIngredients);\r\n  const st = status ? getStatus(status) : null;\r\n\r\n  return <>\r\n    <div className={cn(styles['orders-item'], 'p-6')}>\r\n      <div className={cn(styles['orders-info'])}>\r\n        <span className='text text_type_digits-default'>#{number}</span>\r\n        <span className={'text text_type_main-default text_color_inactive'}>\r\n          {stringWithDay}\r\n        </span>\r\n      </div>\r\n      <div>\r\n        <h2 className={cn('text text_type_main-medium', 'mb-2')}>{name}</h2>\r\n        {status ? (\r\n          <span\r\n            className={cn(\r\n              'text text_type_main-default',\r\n              styles[`status_color_${st?.textColor}`]\r\n            )}\r\n          >\r\n            {st?.text}\r\n          </span>\r\n        ) : null}\r\n      </div>\r\n      <div className={cn(styles['orders-info'])}>\r\n        <ul className={cn(styles.list)}>\r\n          {burgerItem.map((el: Ingredient, i: number) => {\r\n            ing -= 1\r\n            return (\r\n              <li className={styles['list-item']} key={i} style={{ zIndex: ing }}>\r\n                <div className={cn(styles.icon)}>\r\n                  <img src={el.image_mobile} className={cn(styles.image)} alt='ингредиент бургера' />\r\n                </div>\r\n              </li>\r\n            )\r\n          })}\r\n          {count > 6 ? (<div className={styles.overlay}>\r\n            <span>{`+${numberIngredients}`}</span>\r\n          </div>) : null}\r\n        </ul>\r\n        <PriceItem price={burgerPrice} />\r\n      </div>\r\n    </div >\r\n  </>\r\n\r\n}\r\nexport default OrdersItem;\r\n","export const WS_CONNECTION_CLOSE_AUTH: 'WS_CONNECTION_CLOSE_AUTH' = 'WS_CONNECTION_CLOSE_AUTH';\r\nexport const WS_GET_MESSAGE_AUTH: 'WS_GET_MESSAGE_AUTH' = 'WS_GET_MESSAGE_AUTH';\r\nexport const WS_SEND_MESSAGE_AUTH: 'WS_SEND_MESSAGE_AUTH' = 'WS_SEND_MESSAGE_AUTH';\r\nexport const WS_USER_NAME_UPDATE_AUTH: 'WS_USER_NAME_UPDATE_AUTH' = 'WS_USER_NAME_UPDATE_AUTH';\r\nexport const WS_CONNECTION_START_AUTH: 'WS_CONNECTION_START_AUTH' = 'WS_CONNECTION_START_AUTH';\r\nexport const WS_CONNECTION_SUCCESS_AUTH: 'WS_CONNECTION_SUCCESS_AUTH' = 'WS_CONNECTION_SUCCESS_AUTH';\r\nexport const WS_CONNECTION_ERROR_AUTH: 'WS_CONNECTION_ERROR_AUTH' = 'WS_CONNECTION_ERROR_AUTH';\r\nexport const WS_CONNECTION_CLOSED_AUTH: 'WS_CONNECTION_CLOSED_AUTH' = 'WS_CONNECTION_CLOSED_AUTH';\r\n","import React, { useEffect } from 'react';\r\nimport cn from 'classnames';\r\nimport styles from './user-orders.module.css';\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport OrdersItem from '../orders-item/orders-item';\r\nimport { useDispatch } from '../../hooks/useDispatch';\r\nimport { useSelector } from '../../hooks/useSelector';\r\nimport { WS_CONNECTION_START_AUTH, WS_CONNECTION_CLOSE_AUTH } from '../../services/constants/ws-auth';\r\nimport { Order } from '../../model/order';\r\n\r\nconst UserOrders: React.FunctionComponent = () => {\r\n\r\n    const dispatch = useDispatch();\r\n    const location = useLocation();\r\n\r\n    useEffect(\r\n        () => {\r\n            dispatch({ type: WS_CONNECTION_START_AUTH });\r\n            return () => {\r\n                dispatch({ type: WS_CONNECTION_CLOSE_AUTH })\r\n                return;\r\n            }\r\n        },\r\n        [dispatch]\r\n    );\r\n\r\n    const { orders } = useSelector((store) => store.wsAuth);\r\n    return (\r\n        <ul className={cn(styles.list, 'mb-20')}>\r\n            {orders?.map((el: Order, i: number) => (\r\n                <li className={cn(styles['list-item'])} key={i}>\r\n                    <Link to={{\r\n                        pathname: `/profile/orders/${el.number}`, state: { background: location }\r\n                    }}\r\n                        className={styles['burger-link']}>\r\n                        <OrdersItem\r\n                            number={el.number}\r\n                            name={el.name}\r\n                            allIngredients={el.ingredients}\r\n                            createdAt={el.createdAt}\r\n                            status={el.status}\r\n                        />\r\n                    </Link>\r\n                </li>\r\n            ))\r\n            }\r\n        </ul >\r\n\r\n    );\r\n}\r\n\r\nexport default UserOrders;","import React from 'react';\r\nimport styles from './preloader.module.css';\r\nimport cn from 'classnames';\r\n\r\nconst Preloader = () => {\r\n\treturn (<div className={cn(styles[\"mk-spinner-wrap\"])}>\r\n\t\t<div className={styles[\"mk-spinner-bubbles\"]}></div>\r\n\t</div>)\r\n}\r\nexport default Preloader;\r\n\r\n","import React, { useEffect } from 'react';\r\nimport cn from 'classnames';\r\nimport styles from './profile.module.css';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport ProfileNavigation from '../../components/profile-navigation/profile-navigation';\r\nimport UserForm from '../../components/user-form/user-form';\r\nimport UserOrders from '../../components/user-orders/user-orders';\r\nimport { getUser } from '../../services/actions/auth';\r\nimport { useDispatch } from '../../hooks/useDispatch';\r\nimport { useSelector } from '../../hooks/useSelector';\r\nimport Preloader from '../../components/preloader/preloader';\r\n\r\nconst Profile: React.FunctionComponent = () => {\r\n  const dispatch = useDispatch();  \r\n  const { getUserRequest } = useSelector((store) => store.auth)\r\n\r\n  useEffect(() => {\r\n    dispatch(getUser());\r\n  }, [dispatch]);\r\n \r\n  if (getUserRequest) {\r\n    return (<Preloader />)\r\n  }\r\n\r\n\r\n  return (\r\n    <div className={cn(styles.main, 'pt-10', 'pl-10', 'pr-10', 'mt-10')}>\r\n      <ProfileNavigation />\r\n      <Switch>\r\n        <Route path='/profile' exact={true}>\r\n          <UserForm />\r\n        </Route>\r\n        <Route path='/profile/orders' exact={true}>\r\n          <UserOrders />\r\n        </Route>\r\n        <Route>\r\n          <div className={styles.container}>\r\n            <h1> 404 Здесь ничего нет</h1>\r\n          </div>\r\n        </Route>\r\n      </Switch>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Profile;\r\n","import React, { useEffect } from 'react';\r\nimport { Redirect, Route } from 'react-router-dom';\r\nimport { refreshToken } from '../../services/actions/auth';\r\nimport { useSelector } from '../../hooks/useSelector';\r\nimport { useDispatch } from '../../hooks/useDispatch';\r\nimport Preloader from '../preloader/preloader';\r\n\r\nconst ProtectedRoute: React.FunctionComponent<{\r\n    path: string;\r\n    exact?: boolean;\r\n}> = ({ children, ...rest }) => {\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const isTokenUpdated = useSelector((store) => store.auth.isTokenUpdated);\r\n    const tokenUpdateDate = useSelector((store) => store.auth.tokenUpdateDate);\r\n    const hasToken = !!localStorage.getItem('refreshToken');\r\n\r\n    useEffect(() => {\r\n        if (!isTokenUpdated && hasToken) {\r\n            dispatch(refreshToken())\r\n        }\r\n    }, [dispatch, hasToken, isTokenUpdated]);\r\n\r\n    if (hasToken && !isTokenUpdated) {\r\n        return <Preloader />;\r\n      }\r\n\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={({ location }) =>\r\n                (hasToken && tokenUpdateDate) ? (\r\n                    children\r\n                ) : (\r\n                    <Redirect\r\n                        to={{\r\n                            pathname: '/login',\r\n                            state: { from: location }\r\n                        }}\r\n                    />\r\n                )\r\n            }\r\n        />\r\n    );\r\n}\r\n\r\nexport default ProtectedRoute;\r\n","import React, { useState, SyntheticEvent } from 'react';\r\nimport cn from 'classnames';\r\nimport { Link } from 'react-router-dom';\r\nimport { Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { forgotPassword } from '../../services/actions/auth';\r\nimport { useDispatch } from '../../hooks/useDispatch';\r\nimport styles from './forgot-password.module.css';\r\nimport { useSelector } from '../../hooks/useSelector';\r\n\r\nconst ForgotPassword: React.FunctionComponent = () => {\r\n  const [value, setValue] = useState('');\r\n  const hasToken = localStorage.getItem('refreshToken');\r\n  const dispatch = useDispatch();\r\n  const isforgotPasswordSuccess = useSelector((store) => store.auth.isforgotPasswordSuccess)\r\n\r\n  const submit = (e: SyntheticEvent) => {\r\n    e.preventDefault();\r\n    dispatch(forgotPassword(value))\r\n  };\r\n\r\n  if (hasToken) {\r\n    return (\r\n      <Redirect\r\n        to={{\r\n          pathname: '/'\r\n        }}\r\n      />\r\n    );\r\n  }\r\n  \r\n  if (isforgotPasswordSuccess) {\r\n    return (\r\n      <Redirect\r\n        to={{\r\n          pathname: '/reset-password'\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <form onSubmit={submit} className={cn(styles.form, 'mb-20')}>\r\n        <h1 className={cn(styles.title, 'text text_type_main-medium')}>\r\n          Восстановление пароля\r\n        </h1>\r\n        <Input\r\n          type={'email'}\r\n          placeholder={'Укажите e-mail'}\r\n          onChange={(e) => setValue(e.target.value)}\r\n          value={value}\r\n          name={'email'}\r\n          error={false}\r\n          errorText={'Что-то пошло не так'}\r\n          size={'default'}\r\n        />\r\n        <Button type='primary' size='medium'>\r\n          Восстановить\r\n        </Button>\r\n      </form>\r\n      <div className={cn('mb-4')}>\r\n        <span className={'text text_type_main-default text_color_inactive'}>\r\n          Вспомнили пароль?\r\n        </span>\r\n        <Link\r\n          to='/login'\r\n          className={cn('text text_type_main-default', styles.link, 'pl-2')}\r\n        >\r\n          Войти\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ForgotPassword;\r\n","import React, { useState, SyntheticEvent } from 'react';\r\nimport cn from 'classnames';\r\nimport { Link } from 'react-router-dom';\r\nimport { Input, PasswordInput, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { resetPassword } from '../../services/actions/auth';\r\nimport { Redirect } from 'react-router-dom';\r\nimport styles from './reset-password.module.css';\r\nimport { useSelector } from '../../hooks/useSelector';\r\nimport { useDispatch } from '../../hooks/useDispatch';\r\n\r\nconst ResetPassword: React.FunctionComponent = () => {  \r\n\r\n  const [state, setState] = useState({ password: '', token: '' });\r\n  const dispatch = useDispatch(); \r\n\r\n  const handleInputChange = (event: SyntheticEvent<HTMLInputElement>) => {\r\n    const target = event.target as HTMLInputElement;\r\n    const value = target.value;\r\n    const name = target.name;\r\n    setState({\r\n      ...state, [name]: value\r\n    });\r\n  };\r\n\r\n  const submit = (e: SyntheticEvent) => {\r\n    e.preventDefault();\r\n    dispatch(resetPassword(state.password, state.token))\r\n  };\r\n\r\n  const success = useSelector((store) => store.auth.isforgotPasswordSuccess);\r\n  const resetSuccess = useSelector((store) => store.auth.isresetPasswordSuccess);\r\n\r\n  if (localStorage.getItem('refreshToken')) {\r\n    return (\r\n      <Redirect\r\n        to={{\r\n          pathname: '/'\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (!localStorage.getItem('refreshToken') && !success) {\r\n    return (\r\n      <Redirect\r\n        to={{\r\n          pathname: '/forgot-password'\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (resetSuccess) {\r\n    return (\r\n      <Redirect\r\n        to={{\r\n          pathname: '/login'\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <form onSubmit={submit} className={cn(styles.form, 'mb-20')}>\r\n        <h1 className={cn(styles.title, 'text text_type_main-medium')}>\r\n          Восстановление пароля\r\n        </h1>\r\n        <PasswordInput\r\n          value={state.password}\r\n          name={'password'}\r\n          onChange={handleInputChange}\r\n        />\r\n        <Input\r\n          type={'text'}\r\n          placeholder={'Введите код из письма'}\r\n          onChange={handleInputChange}\r\n          value={state.token}\r\n          name={'token'}\r\n          error={false}\r\n          errorText={'Что-то пошло не так'}\r\n          size={'default'}\r\n        />\r\n        <Button type='primary' size='medium'>Сохранить</Button>\r\n      </form>\r\n      <div className={cn('mb-4')}>\r\n        <span className={'text text_type_main-default text_color_inactive'}>\r\n          Вспомнили пароль?\r\n        </span>\r\n        <Link to='/login' className={cn('text text_type_main-default', styles.link, 'pl-2')}        >\r\n          Войти\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ResetPassword;\r\n","import React, { useEffect } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { logout } from '../../services/actions/auth';\r\nimport { useDispatch } from '../../hooks/useDispatch';\r\n\r\nconst Logout: React.FunctionComponent = () => {\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        dispatch(logout());\r\n    });\r\n\r\n    return <Redirect to={'/login'} />;\r\n\r\n};\r\n\r\nexport default Logout;","import React, { memo } from 'react';\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport cn from 'classnames';\r\nimport OrdersItem from '../orders-item/orders-item';\r\nimport { useSelector } from '../../hooks/useSelector';\r\nimport styles from './feed-orders.module.css';\r\nimport { Order } from '../../model/order';\r\nimport Preloader from '../preloader/preloader';\r\n\r\nfunction FeedOrders() {\r\n  const location = useLocation();\r\n  const { orders } = useSelector((store) => store.ws)\r\n\r\n  if (!orders) {\r\n    return <Preloader />\r\n  }\r\n\r\n  return (\r\n    <section>\r\n      <h1 className={cn('text', 'text_type_main-large', 'mb-5')}>\r\n        Лента заказов\r\n      </h1>\r\n      <ul className={cn(styles.list)}>\r\n        {orders?.map((el: Order) => (\r\n          <li className={cn(styles['list-item'], 'mb-4')} key={el._id}>\r\n            <Link to={{\r\n              pathname: `/feed/${el.number}`,\r\n              state: { background: location }\r\n            }}\r\n              className={styles.link}>\r\n              <OrdersItem\r\n                number={el.number}\r\n                name={el.name}\r\n                allIngredients={el.ingredients}\r\n                createdAt={el.createdAt}\r\n              />\r\n            </Link>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default memo(FeedOrders);\r\n","import React from 'react';\r\nimport cn from 'classnames';\r\nimport { useSelector } from '../../hooks/useSelector';\r\nimport { filterOrdersByStatus } from '../../utils/functions';\r\nimport styles from './orders-list.module.css';\r\nimport { Order } from '../../model/order';\r\n\r\nconst OrdersList = () => {\r\n  const { total, totalToday, orders } = useSelector((store) => store.ws)\r\n  const statusArrays = filterOrdersByStatus(orders)\r\n  const doneArray = statusArrays?.done.slice(0, 30);\r\n\r\n  return <>\r\n    <section className={cn(styles.container, 'pl-4')}>\r\n      <div className={styles.table}>\r\n        <div>\r\n          <h2 className={cn('text text_type_main-medium', 'mb-6')}>Готовы:</h2>\r\n          <ul\r\n            className={cn(\r\n              styles.list,\r\n              styles['list_color_green'],\r\n              'text text_type_digits-default'\r\n            )}\r\n          >\r\n            {doneArray?.map((el: Order) => (<li key={el._id} className={cn(styles['list-item'], 'mb-2', 'mr-8')}>{el.number}</li>))}\r\n          </ul>\r\n        </div>\r\n        <div>\r\n          <h2 className={cn('text text_type_main-medium', 'mb-6')}>\r\n            В работе:\r\n          </h2>\r\n          <ul className={cn(styles.list, 'text text_type_digits-default')}>\r\n            {statusArrays?.pending.map((el: Order) => (<li key={el._id} className={cn(styles['list-item'], 'mb-2', 'mr-8')}>{el.number}</li>))}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <div>\r\n        <h2 className={cn('text text_type_main-medium')}>\r\n          Выполнено за все время:\r\n        </h2>\r\n        <span className={cn('text text_type_digits-large', styles.count)}>\r\n          {total || 0}\r\n        </span>\r\n      </div>\r\n      <div>\r\n        <h2 className={cn('text text_type_main-medium')}>\r\n          Выполнено за сегодня:\r\n        </h2>\r\n        <span className={cn('text text_type_digits-large', styles.count)}>\r\n          {totalToday || 0}\r\n        </span>\r\n      </div>\r\n    </section>\r\n  </>\r\n\r\n}\r\n\r\nexport default OrdersList;\r\n","export const WS_CONNECTION_START: 'WS_CONNECTION_START' = 'WS_CONNECTION_START';\r\nexport const WS_CONNECTION_SUCCESS: 'WS_CONNECTION_SUCCESS' = 'WS_CONNECTION_SUCCESS';\r\nexport const WS_CONNECTION_ERROR: 'WS_CONNECTION_ERROR' = 'WS_CONNECTION_ERROR';\r\nexport const WS_CONNECTION_CLOSED: 'WS_CONNECTION_CLOSED' = 'WS_CONNECTION_CLOSED';\r\nexport const WS_CONNECTION_CLOSE: 'WS_CONNECTION_CLOSE' = 'WS_CONNECTION_CLOSE';\r\nexport const WS_GET_MESSAGE: 'WS_GET_MESSAGE' = 'WS_GET_MESSAGE';\r\nexport const WS_SEND_MESSAGE: 'WS_SEND_MESSAGE' = 'WS_SEND_MESSAGE';\r\nexport const WS_USER_NAME_UPDATE: 'WS_USER_NAME_UPDATE' = 'WS_USER_NAME_UPDATE';","import React, { memo, useEffect } from 'react';\r\nimport cn from 'classnames';\r\nimport styles from './feed.module.css';\r\nimport FeedOrders from '../../components/feed-orders/feed-orders';\r\nimport OrdersList from '../../components/orders-list/orders-list';\r\nimport { useDispatch } from '../../hooks/useDispatch';\r\nimport { WS_CONNECTION_START, WS_CONNECTION_CLOSE } from '../../services/constants/ws';\r\n\r\n\r\nfunction Feed() {\r\n  const dispatch = useDispatch();\r\n  useEffect(\r\n    () => {\r\n      dispatch({ type: WS_CONNECTION_START });\r\n      return () => {\r\n        dispatch({ type: WS_CONNECTION_CLOSE })\r\n      }\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  return (\r\n    <div className={cn(styles.columns, 'p-10')}>\r\n      <FeedOrders />\r\n      <OrdersList />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default memo(Feed);\r\n","import React, { useEffect } from 'react';\r\nimport cn from 'classnames';\r\nimport { useParams, Redirect, useRouteMatch } from 'react-router-dom';\r\nimport PriceItem from '../../components/price-item/price-item';\r\nimport styles from './order.module.css';\r\nimport { useSelector } from '../../hooks/useSelector';\r\nimport { getOrder, getUserOrder } from '../../services/actions/orders';\r\nimport Preloader from '../../components/preloader/preloader';\r\nimport { convertDate, getStatus, getPrice, getBurgerIngredients, getBurgerIngredientsObjWithCount } from '../../utils/functions';\r\nimport { useDispatch } from '../../hooks/useDispatch';\r\n\r\nconst Order: React.FunctionComponent = () => {\r\n  const dispatch = useDispatch();\r\n  const isProfile = !!useRouteMatch(\"/profile\");\r\n  const { id } = useParams<{ id: string }>();\r\n  useEffect(\r\n    () => {\r\n      dispatch(isProfile\r\n        ? getUserOrder(id)\r\n        : getOrder(id)\r\n      )\r\n    },\r\n    [dispatch, isProfile, id]\r\n  );\r\n  const { ingredients } = useSelector((store) => store.ingredients)\r\n  const order = useSelector((store) => store.orders.currentOrder)\r\n  const { orderLoaded } = useSelector((store) => store.orders)\r\n  const date = order && order.createdAt && convertDate(order?.createdAt);\r\n  const burgerIngredients = order && order.ingredients && getBurgerIngredients(order?.ingredients, ingredients)\r\n  const uniqItems: Array<string> = Array.from(new Set(order?.ingredients))\r\n  const bI = burgerIngredients && getBurgerIngredientsObjWithCount(burgerIngredients)\r\n  const burgerPrice = burgerIngredients && getPrice(burgerIngredients)\r\n  const name = order?.name\r\n  const status = order?.status;\r\n  const st = status ? getStatus(status) : null;\r\n\r\n  if (orderLoaded && !order) return <Redirect to='/' />;\r\n\r\n  if (!order) {\r\n    return <Preloader />;\r\n  }\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <span className={cn('text text_type_digits-default')}>#{id}</span>\r\n      <h1\r\n        className={cn('text text_type_main-medium','mb-3', 'mt-10', styles.title)}>\r\n        {name}\r\n      </h1>\r\n      <p\r\n        className={cn('text text_type_main-default','mb-15', styles.status, styles[`status_color_${st?.textColor}`])}>\r\n        {st?.text}\r\n      </p>\r\n      <p className={cn('text text_type_main-medium', 'mb-6', styles.title)}>\r\n        Состав:\r\n      </p>\r\n      <ul className={cn(styles.list, 'mb-10')}>\r\n        {uniqItems.map((el: string, i: number) => {\r\n          return <li className={cn(styles['list-item'], 'mr-6')} key={i}>\r\n            <div className={cn(styles.icon, 'mr-4')}>\r\n              <img src={bI?.item[el]?.image_mobile} alt='Вкусная булка' className={cn(styles.image)} />\r\n            </div>\r\n            <p\r\n              className={cn(styles.ingredient, 'mr-4','text text_type_main-default')}>\r\n              {bI?.item[el]?.name}\r\n            </p>\r\n            <span className={cn('mr-1', 'text text_type_digits-default')}>\r\n              {bI?.count[el]} x{' '}\r\n            </span>\r\n            <PriceItem price={bI?.item[el]?.price || 0} />\r\n          </li>\r\n        })}\r\n      </ul>\r\n      <div className={styles.info}>\r\n        <span className={cn('text text_type_main-default text_color_inactive')}>\r\n          {date}\r\n        </span>\r\n        <PriceItem price={burgerPrice || 0} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Order;\r\n","import React, { useEffect } from 'react'\r\nimport { Switch, Route, useLocation } from 'react-router-dom'\r\nimport Modal from '../modal/modal'\r\nimport IngredientDetails from '../ingredient-details/ingredient-details'\r\nimport AppHeader from '../app-header/app-header'\r\nimport BurgerUnion from '../burger-union/burger-union'\r\nimport OrderDetails from '../order-details/order-details'\r\nimport { Location } from '../../model/location'\r\nimport { useDispatch } from '../../hooks/useDispatch';\r\nimport { getIngredients } from '../../services/actions/ingredients';\r\nimport Login from '../../pages/login/login';\r\nimport Register from '../../pages/register/register';\r\nimport Profile from '../../pages/profile/profile'\r\nimport ProtectedRoute from '../route/protected-route'\r\nimport ForgotPassword from '../../pages/forgot-password/forgot-password';\r\nimport ResetPassword from '../../pages/reset-password/reset-password'\r\nimport Logout from '../../pages/logout/logout'\r\nimport Feed from '../../pages/feed/feed'\r\nimport Order from '../../pages/order/order'\r\n\r\n\r\nexport const ROUTES = {\r\n  HOME: '/',\r\n  ORDERS: '/feed',\r\n  PROFILE: '/profile',\r\n  INGREDIENTS: '/ingredients',\r\n  ORDER: '/order',\r\n}\r\n\r\nexport const App = () => {\r\n\r\n  const location = useLocation<Location>();\r\n  const background = location.state && location.state.background;\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(getIngredients());\r\n  }, [dispatch]);\r\n\r\n\r\n  return (\r\n    <div>\r\n      <AppHeader />\r\n      <Switch location={background || location}>\r\n        <Route path='/' exact>\r\n          <BurgerUnion />\r\n        </Route>\r\n        <Route path='/login' exact={true}>\r\n          <Login />\r\n        </Route>\r\n        <Route path='/register' exact={true}>\r\n          <Register />\r\n        </Route>\r\n        <Route path='/feed' exact={true}>\r\n          <Feed />\r\n        </Route>\r\n        <Route path='/feed/:id'>\r\n          <Order />\r\n        </Route>\r\n        <ProtectedRoute path='/profile/orders/:id' exact={true}>\r\n          <Order />\r\n        </ProtectedRoute>\r\n        <Route path='/ingredients/:id'>\r\n          <IngredientDetails />\r\n        </Route>\r\n        <ProtectedRoute path={`${ROUTES.ORDER}`}>\r\n          <Modal><OrderDetails /></Modal>\r\n        </ProtectedRoute>\r\n        <ProtectedRoute path='/profile'>\r\n          <Profile />\r\n        </ProtectedRoute>\r\n        <Route path='/forgot-password' exact={true}>\r\n          <ForgotPassword />\r\n        </Route>\r\n        <Route path='/reset-password' exact={true}>\r\n          <ResetPassword />\r\n        </Route>\r\n        <Route path=\"/logout\">\r\n          <Logout />\r\n        </Route>\r\n        <Route>\r\n        <BurgerUnion />\r\n        </Route>\r\n      </Switch>\r\n\r\n      {background &&\r\n        <>\r\n          <Route path='/' exact={true} children={<Modal><OrderDetails /></Modal>} />\r\n          <Route path='/ingredients/:id' children={<Modal><IngredientDetails /></Modal>} />\r\n          <ProtectedRoute path='/profile/orders/:id' children={<Modal><Order /></Modal>} />\r\n          <Route path='/feed/:id' children={<Modal><Order /></Modal>} />\r\n          <ProtectedRoute path={`${ROUTES.ORDER}`}>\r\n            <Modal><OrderDetails /></Modal>\r\n          </ProtectedRoute>\r\n        </>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import { Ingredient } from '../../model/ingredient'\r\nimport { IngredientWithUnicId } from '../../model/ingredient'\r\nimport {\r\n  GET_INGREDIENTS_REQUEST, GET_INGREDIENTS_SUCCESS, GET_INGREDIENTS_FAILED,\r\n  ADD_INGREDIENTS, DELETE_INGREDIENT,\r\n  INCREASE_INGREDIENT, DECREASE_INGREDIENT, UPDATE_CONSTRUCTOR\r\n} from '../constants/ingredietns';\r\nimport { api } from '../../api/api';\r\nimport { AppDispatch, AppThunk } from '../../types';\r\n\r\n\r\nexport interface IGetIngredientsRequestAction {\r\n  readonly type: typeof GET_INGREDIENTS_REQUEST;\r\n}\r\n\r\nexport interface IGetIngredientsSuccessAction {\r\n  readonly type: typeof GET_INGREDIENTS_SUCCESS;\r\n  readonly items: Array<Ingredient>;\r\n}\r\n\r\nexport interface IGetIngredientsFailedAction {\r\n  readonly type: typeof GET_INGREDIENTS_FAILED;\r\n}\r\n\r\nexport interface IAddIngredientsAction {\r\n  readonly type: typeof ADD_INGREDIENTS;\r\n  readonly item: IngredientWithUnicId\r\n}\r\n\r\nexport interface IDeleteIngredientAction {\r\n  readonly type: typeof DELETE_INGREDIENT;\r\n  readonly id: string;\r\n}\r\n\r\nexport interface IIncreaseIngredientAction {\r\n  readonly type: typeof INCREASE_INGREDIENT;\r\n  readonly key: string;\r\n  readonly typeItem: string;\r\n}\r\n\r\nexport interface IDecreaseIngredientAction {\r\n  readonly type: typeof DECREASE_INGREDIENT;\r\n  readonly key: string,\r\n  readonly typeItem: string,\r\n}\r\n\r\nexport interface IUpdateOrderAction {\r\n  readonly type: typeof UPDATE_CONSTRUCTOR;\r\n  readonly toIndex: number,\r\n  readonly fromIndex: number,\r\n}\r\n\r\n\r\nexport type TIngredientsActions =\r\n  | IGetIngredientsRequestAction\r\n  | IGetIngredientsSuccessAction\r\n  | IGetIngredientsFailedAction\r\n  | IAddIngredientsAction\r\n  | IDeleteIngredientAction\r\n  | IIncreaseIngredientAction\r\n  | IDecreaseIngredientAction\r\n  | IUpdateOrderAction;\r\n\r\nexport const getIngredients: AppThunk = () => {\r\n  return function (dispatch: AppDispatch) {\r\n    dispatch({\r\n      type: GET_INGREDIENTS_REQUEST,\r\n    });\r\n    api.ingredients.getIngredients()\r\n      .then((res) => {\r\n        if (res && res.success) {\r\n          dispatch({\r\n            type: GET_INGREDIENTS_SUCCESS,\r\n            items: res.data,\r\n          });\r\n        } else {\r\n          dispatch({\r\n            type: GET_INGREDIENTS_FAILED,\r\n          });\r\n        }\r\n      })\r\n      .catch(() =>\r\n        dispatch({\r\n          type: GET_INGREDIENTS_FAILED,\r\n        })\r\n      );\r\n  };\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {\r\n  GET_INGREDIENTS_REQUEST, GET_INGREDIENTS_SUCCESS, GET_INGREDIENTS_FAILED,\r\n  ADD_INGREDIENTS, DELETE_INGREDIENT, INCREASE_INGREDIENT, DECREASE_INGREDIENT, UPDATE_CONSTRUCTOR  \r\n} from '../constants/ingredietns';\r\nimport { TIngredientsActions } from '../actions/ingredients';\r\nimport { IngredientWithUnicId, IngredientsState } from '../../model/ingredient'\r\n\r\nconst initialState: IngredientsState = {  \r\n  ingredients: [],\r\n  burgerIngredients: {\r\n    bun: null,\r\n    ingredients: [],\r\n    counts: {},\r\n  }, \r\n  isLoading: false,\r\n  hasError: false,\r\n  loaded: false\r\n};\r\n\r\nexport const ingredientsReducer = (state = initialState, action: TIngredientsActions): IngredientsState => {\r\n  switch (action.type) {\r\n    case GET_INGREDIENTS_REQUEST: {\r\n      return {\r\n        ...state,\r\n        isLoading: true,\r\n        hasError: false,\r\n      };\r\n    }\r\n    case GET_INGREDIENTS_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        hasError: false,\r\n        ingredients: action.items,\r\n        isLoading: false,\r\n        loaded: true,\r\n      };\r\n    }\r\n    case GET_INGREDIENTS_FAILED: {\r\n      return { ...state, hasError: true, isLoading: false };\r\n    }  \r\n    case ADD_INGREDIENTS: {\r\n      const { type } = action.item;\r\n      if (type === 'bun') {\r\n        return {\r\n          ...state,\r\n          burgerIngredients: {\r\n            ...state.burgerIngredients,\r\n            bun: action.item,\r\n          },\r\n        };\r\n      }\r\n      return {\r\n        ...state,\r\n        burgerIngredients: {\r\n          ...state.burgerIngredients,\r\n          ingredients: [\r\n            ...state.burgerIngredients.ingredients,\r\n            action.item,\r\n          ],\r\n        },\r\n      };\r\n    }\r\n    case DELETE_INGREDIENT: {\r\n      return {\r\n        ...state,\r\n        burgerIngredients: {\r\n          ...state.burgerIngredients,\r\n          ingredients: [\r\n            ...state.burgerIngredients.ingredients,\r\n          ].filter((el: IngredientWithUnicId) => el.unicId !== action.id),\r\n        },\r\n      };\r\n    }\r\n    case INCREASE_INGREDIENT: {\r\n      const { typeItem } = action;\r\n      if (typeItem !== 'bun') {\r\n        return {\r\n          ...state,\r\n          burgerIngredients: {\r\n            ...state.burgerIngredients,\r\n            counts: {\r\n              ...state.burgerIngredients.counts,\r\n              [action.key]:\r\n                (state.burgerIngredients.counts[action.key] || 0) + 1,\r\n            },\r\n          },\r\n        };\r\n      } else return state;\r\n    }\r\n    case DECREASE_INGREDIENT: {\r\n      const { typeItem } = action;\r\n      if (typeItem !== 'bun') {\r\n        return {\r\n          ...state,\r\n          burgerIngredients: {\r\n            ...state.burgerIngredients,\r\n            counts: {\r\n              ...state.burgerIngredients.counts,\r\n              [action.key]: state.burgerIngredients.counts[action.key] - 1,\r\n            },\r\n          },\r\n        };\r\n      } else return state;\r\n    }\r\n    case UPDATE_CONSTRUCTOR: {\r\n      const ingredients = [...state.burgerIngredients.ingredients];\r\n      ingredients.splice(\r\n        action.toIndex,\r\n        0,\r\n        ingredients.splice(action.fromIndex, 1)[0]\r\n      );\r\n      return {\r\n        ...state,\r\n        burgerIngredients: {\r\n          ...state.burgerIngredients,\r\n          ingredients: ingredients,\r\n        },\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { GET_ORDER_REQUEST, GET_ORDER_SUCCESS, GET_ORDER_FAILED, CLEAR_ORDER_NUMBER, CREATE_ORDER_REQUEST, GET_USER_ORDER_REQUEST,\r\n    GET_USER_ORDER_SUCCESS, GET_USER_ORDER_FAILED,\r\n    CREATE_ORDER_SUCCESS, CREATE_ORDER_FAILED } from '../constants/orders';\r\nimport { TOrdersActions } from '../actions/orders';\r\nimport { OrdersState } from '../../model/order'\r\n\r\nconst initialState: OrdersState = {\r\n    currentOrder: null,\r\n    createOrder: null,\r\n    orderRequest: false,\r\n    orderFailed: false,\r\n    orderLoaded: false,\r\n    isLoading: false,\r\n    hasError: false,\r\n    loaded: false\r\n};\r\n\r\nexport const ordersReducer = (state = initialState, action: TOrdersActions): OrdersState => {\r\n    switch (action.type) {\r\n        case GET_ORDER_REQUEST: {\r\n            return {\r\n                ...state,\r\n                orderRequest: true,\r\n                orderFailed: false,\r\n                orderLoaded: false\r\n            };\r\n        }\r\n        case GET_ORDER_SUCCESS: {\r\n            return {\r\n                ...state,\r\n                orderFailed: false,\r\n                currentOrder: action.order,\r\n                orderRequest: false,\r\n                orderLoaded: true\r\n            };\r\n        }\r\n        case GET_ORDER_FAILED: {\r\n            return { ...state, orderFailed: true, orderRequest: false };\r\n        }\r\n        case GET_USER_ORDER_REQUEST: {\r\n            return {\r\n                ...state,\r\n                orderRequest: true,\r\n                orderFailed: false,\r\n                orderLoaded: false\r\n            };\r\n        }\r\n        case GET_USER_ORDER_SUCCESS: {\r\n            return {\r\n                ...state,\r\n                orderFailed: false,\r\n                currentOrder: action.order,\r\n                orderRequest: false,\r\n                orderLoaded: true\r\n            };\r\n        }\r\n        case GET_USER_ORDER_FAILED: {\r\n            return { ...state, orderFailed: true, orderRequest: false };\r\n        }\r\n\r\n        case CLEAR_ORDER_NUMBER: {\r\n            return { ...state, createOrder: null };\r\n        }\r\n        case CREATE_ORDER_REQUEST: {\r\n            return {\r\n              ...state,\r\n              orderRequest: true,\r\n              orderFailed: false,\r\n            };\r\n          }\r\n          case CREATE_ORDER_SUCCESS: {\r\n            return {\r\n              ...state,\r\n              orderFailed: false,\r\n              createOrder: action.order,\r\n              orderRequest: false,             \r\n            };\r\n          }\r\n          case CREATE_ORDER_FAILED: {\r\n            return { ...state, orderFailed: true, orderRequest: false };\r\n          }\r\n\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};\r\n","import {\r\n    REGISTER_REQUEST, REGISTER_SUCCESS, REGISTER_FAILED,\r\n    LOGIN_REQUEST, LOGIN_SUCCESS, LOGIN_FAILED,\r\n    GET_USER_REQUEST, GET_USER_SUCCESS, GET_USER_FAILED,\r\n    LOGOUT_REQUEST, LOGOUT_SUCCESS, LOGOUT_FAILED,\r\n    FORGOT_PASSWORD_REQUEST, FORGOT_PASSWORD_SUCCESS, FORGOT_PASSWORD_FAILED,\r\n    RESET_PASSWORD_REQUEST, RESET_PASSWORD_SUCCESS, RESET_PASSWORD_FAILED,\r\n    UPDATE_USER_REQUEST, UPDATE_USER_SUCCESS, UPDATE_USER_FAILED,\r\n    REFRESH_TOKEN_REQUEST, REFRESH_TOKEN_SUCCESS, REFRESH_TOKEN_FAILED\r\n} from '../constants/auth';\r\nimport { TAuthActions } from '../actions/auth';\r\nimport { UserState } from '../../model/user'\r\n\r\nconst initialState: UserState = {\r\n    name: '',\r\n    email: '',\r\n    password: '',\r\n    registerRequest: false,\r\n    registerRequestFailed: false,\r\n    isregisterSuccess: false,\r\n    loginRequest: false,\r\n    loginRequestFailed: false,\r\n    getUserRequest: false,\r\n    getUserRequestFailed: false,\r\n    updateUserRequest: false,\r\n    updateUserRequestFailed: false,\r\n    logoutRequest: false,\r\n    logoutRequestFailed: false,\r\n    isTokenUpdated: false,\r\n    tokenUpdateDate: false,\r\n    forgotPasswordRequest: false,\r\n    forgotPasswordFailed: false,\r\n    isforgotPasswordRequest: false,\r\n    isforgotPasswordSuccess: false,\r\n    resetPasswordRequest: false,\r\n    resetPasswordFailed: false,\r\n    isresetPasswordSuccess: false\r\n};\r\n\r\nexport const authReducer = (state = initialState, action: TAuthActions): UserState => {\r\n    switch (action.type) {\r\n        case REGISTER_REQUEST: {\r\n            return {\r\n                ...state,\r\n                registerRequest: true,\r\n                registerRequestFailed: false,\r\n                isregisterSuccess: false\r\n            };\r\n        }\r\n        case REGISTER_SUCCESS: {\r\n            return {\r\n                ...state,\r\n                registerRequestFailed: false,\r\n                isregisterSuccess: true,\r\n                name: action.user.name,\r\n                email: action.user.email,\r\n                registerRequest: false,\r\n            };\r\n        }\r\n        case REGISTER_FAILED: {\r\n            return { ...state, registerRequestFailed: true, registerRequest: false, isregisterSuccess: false };\r\n        }\r\n\r\n        case LOGIN_REQUEST: {\r\n            return {\r\n                ...state,\r\n                loginRequest: true,\r\n                loginRequestFailed: false,\r\n            };\r\n        }\r\n        case LOGIN_SUCCESS: {\r\n            return {\r\n                ...state,\r\n                loginRequestFailed: false,\r\n                name: action.user.name,\r\n                email: action.user.email,\r\n                loginRequest: false,\r\n            };\r\n        }\r\n        case LOGIN_FAILED: {\r\n            return { ...state, loginRequestFailed: true, loginRequest: false };\r\n        }\r\n\r\n        case GET_USER_REQUEST: {\r\n            return {\r\n                ...state,\r\n                getUserRequest: true,\r\n                getUserRequestFailed: false\r\n            };\r\n        }\r\n        case GET_USER_SUCCESS: {\r\n            return {\r\n                ...state,\r\n                getUserRequestFailed: false,\r\n                name: action.user.name,\r\n                email: action.user.email,\r\n                getUserRequest: false\r\n            };\r\n        }\r\n        case GET_USER_FAILED: {\r\n            return { ...state, getUserRequestFailed: true, getUserRequest: false };\r\n        }\r\n\r\n        case UPDATE_USER_REQUEST: {\r\n            return {\r\n                ...state,\r\n                updateUserRequest: true,\r\n                updateUserRequestFailed: false\r\n            };\r\n        }\r\n        case UPDATE_USER_SUCCESS: {\r\n            return {\r\n                ...state,\r\n                updateUserRequestFailed: false,\r\n                name: action.user.name,\r\n                email: action.user.email,\r\n                updateUserRequest: false\r\n            };\r\n        }\r\n        case UPDATE_USER_FAILED: {\r\n            return { ...state, updateUserRequestFailed: true, updateUserRequest: false };\r\n        }\r\n\r\n        case LOGOUT_REQUEST: {\r\n            return {\r\n                ...state,\r\n                logoutRequest: true,\r\n                logoutRequestFailed: false\r\n            };\r\n        }\r\n        case LOGOUT_SUCCESS: {\r\n            return {\r\n                ...state,\r\n                logoutRequestFailed: false,\r\n                name: '',\r\n                email: '',\r\n                logoutRequest: false\r\n            };\r\n        }\r\n        case LOGOUT_FAILED: {\r\n            return { ...state, logoutRequestFailed: true, logoutRequest: false };\r\n        }\r\n        case REFRESH_TOKEN_REQUEST: {\r\n            return { ...state };\r\n        }\r\n        case REFRESH_TOKEN_SUCCESS: {\r\n            return {\r\n                ...state,\r\n                isTokenUpdated: true,\r\n                tokenUpdateDate: true\r\n            };\r\n        }\r\n        case REFRESH_TOKEN_FAILED: {\r\n            return { ...state, isTokenUpdated: true, tokenUpdateDate: false };\r\n        }\r\n        case RESET_PASSWORD_REQUEST: {\r\n            return { ...state, isresetPasswordSuccess: false };\r\n        }\r\n        case RESET_PASSWORD_SUCCESS: {\r\n            return { ...state, isresetPasswordSuccess: true };\r\n        }\r\n        case RESET_PASSWORD_FAILED: {\r\n            return { ...state, isresetPasswordSuccess: false };\r\n        }\r\n        case FORGOT_PASSWORD_REQUEST: {\r\n            return {\r\n                ...state,\r\n                forgotPasswordRequest: true,\r\n                forgotPasswordFailed: false,\r\n                isforgotPasswordRequest: false,\r\n                isforgotPasswordSuccess: false,\r\n            };\r\n        }\r\n        case FORGOT_PASSWORD_SUCCESS: {\r\n            return {\r\n                ...state,\r\n                forgotPasswordRequest: false,\r\n                isforgotPasswordRequest: true,\r\n                isforgotPasswordSuccess: true\r\n            };\r\n        }\r\n        case FORGOT_PASSWORD_FAILED: {\r\n            return {\r\n                ...state,\r\n                forgotPasswordFailed: true,\r\n                forgotPasswordRequest: false,\r\n                isforgotPasswordSuccess: false,\r\n                isforgotPasswordRequest: true\r\n            };\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};\r\n","import { WS_CONNECTION_SUCCESS,\tWS_CONNECTION_ERROR, WS_CONNECTION_CLOSED,\tWS_GET_MESSAGE } from '../constants/ws';\r\nimport { TWSActionsActions } from '../actions/ws';\r\nimport { Order } from '../../model/order';\r\nimport { PayloadAction } from '@reduxjs/toolkit';\r\n\r\ntype TWsReduserState = {\r\n\twsConnected: Boolean;\r\n\terror: PayloadAction | null;\r\n\torders: Array<Order>;\r\n\ttotal: number | null,\r\n\ttotalToday: number | null\r\n}\r\n\r\nconst initialState: TWsReduserState = {\r\n\twsConnected: false,\r\n\terror: null,\r\n\torders: [],\r\n\ttotal: null,\r\n\ttotalToday: null\r\n};\r\n\r\nexport const wsReducer = (state = initialState, action: TWSActionsActions): TWsReduserState => {\r\n\tswitch (action.type) {\r\n\t\tcase WS_CONNECTION_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\twsConnected: true\r\n\t\t\t};\r\n\r\n\t\tcase WS_CONNECTION_ERROR:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\terror: action.payload,\r\n\t\t\t\twsConnected: false\r\n\t\t\t};\r\n\r\n\t\tcase WS_CONNECTION_CLOSED:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\twsConnected: false\r\n\t\t\t};\r\n\r\n\t\tcase WS_GET_MESSAGE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\torders: action.payload.orders,\r\n\t\t\t\ttotal: action.payload.total,\r\n\t\t\t\ttotalToday: action.payload.totalToday\r\n\t\t\t};\r\n\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n\r\n\r\n","import {\r\n\tWS_CONNECTION_SUCCESS_AUTH,\r\n\tWS_CONNECTION_ERROR_AUTH,\r\n\tWS_CONNECTION_CLOSED_AUTH,\r\n\tWS_GET_MESSAGE_AUTH\r\n} from '../constants/ws-auth';\r\nimport { TWSActionsAuthActions } from '../actions/ws-auth';\r\nimport { Order } from '../../model/order';\r\nimport { PayloadAction } from '@reduxjs/toolkit';\r\n\r\ntype TWsReduserAuthState = {\r\n\twsConnected: Boolean;\r\n\terror: PayloadAction | null;\r\n\torders: Array<Order>;\r\n\ttotal: number | null,\r\n\ttotalToday: number | null\r\n}\r\n\r\nconst initialState: TWsReduserAuthState = {\r\n\twsConnected: false,\r\n\terror: null,\r\n\torders: [],\r\n\ttotal: null,\r\n\ttotalToday: null\r\n};\r\n\r\nexport const wsReducerAuth = (state = initialState, action: TWSActionsAuthActions): TWsReduserAuthState => {\r\n\tswitch (action.type) {\r\n\t\tcase WS_CONNECTION_SUCCESS_AUTH:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\twsConnected: true\r\n\t\t\t};\r\n\r\n\t\tcase WS_CONNECTION_ERROR_AUTH:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\terror: action.payload,\r\n\t\t\t\twsConnected: false\r\n\t\t\t};\r\n\r\n\t\tcase WS_CONNECTION_CLOSED_AUTH:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\twsConnected: false\r\n\t\t\t};\r\n\r\n\t\tcase WS_GET_MESSAGE_AUTH:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\torders: action.payload.orders,\r\n\t\t\t\ttotal: action.payload.total,\r\n\t\t\t\ttotalToday: action.payload.totalToday\r\n\t\t\t};\r\n\t\t// case WS_USER_STATUS_UPDATE:\r\n\t\t// \treturn {\r\n\t\t// \t\t...state,\r\n\t\t// \t\tuser: action.payload\r\n\t\t// \t};\r\n\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n\r\n\r\n","import { combineReducers } from 'redux';\r\nimport { ingredientsReducer } from './ingredients';\r\nimport { ordersReducer } from './orders';\r\nimport { authReducer } from './auth';\r\nimport { wsReducer } from './ws';\r\nimport { wsReducerAuth } from './ws-auth';\r\n\r\nexport const rootReducer = combineReducers({\r\n  ingredients: ingredientsReducer,\r\n  orders: ordersReducer,\r\n  auth: authReducer,\r\n  ws: wsReducer,\r\n  wsAuth: wsReducerAuth \r\n});\r\n","import { AnyAction, MiddlewareAPI } from 'redux';\r\nimport { TWSAction } from '../../types';\r\nimport { getCookie } from '../../utils/functions';\r\n\r\nexport const socketMiddleware = (wsUrl: string, wsActions: TWSAction, auth: boolean) => (store: MiddlewareAPI) => {\r\n\tlet socket: WebSocket | null = null;\r\n\tlet connected = false;\r\n\treturn (next: (i: AnyAction) => void) => (action: AnyAction) => {\r\n\t\tconst { dispatch } = store;\r\n\t\tconst { type, payload } = action;\r\n\t\tconst { wsInit, wsClose, wsSendMessage, onOpen, onClose, onError, onMessage } = wsActions;\r\n\t\tconst token = auth ? getCookie('token') : null;\r\n\t\tif (type === wsInit) {\r\n\t\t\tsocket = token\r\n\t\t\t\t? new WebSocket(`${wsUrl}?token=${token}`)\r\n\t\t\t\t: new WebSocket(`${wsUrl}`);\r\n\t\t}\r\n\t\tif (socket) {\r\n\t\t\tconnected = true;\r\n\t\t\tsocket.onopen = event => {\r\n\t\t\t\tdispatch({ type: onOpen, payload: event });\r\n\t\t\t};\r\n\r\n\t\t\tsocket.onerror = event => {\r\n\t\t\t\tdispatch({ type: onError, payload: event });\r\n\t\t\t};\r\n\r\n\t\t\tsocket.onmessage = event => {\r\n\t\t\t\tconst { data } = event;\r\n\t\t\t\tconst parsedData = JSON.parse(data);\r\n\t\t\t\tconst { success, ...restParsedData } = parsedData;\r\n\t\t\t\tdispatch({ type: onMessage, payload: restParsedData });\r\n\t\t\t};\r\n\r\n\t\t\tsocket.onclose = event => {\r\n\t\t\t\tdispatch({ type: onClose, payload: event });\r\n\t\t\t\tconsole.log('socket closed with code: ', event.code);\r\n\t\t\t\tif (!connected) {\r\n\t\t\t\t\tsetTimeout(() => { dispatch({ type: wsInit }) }, 1000)\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tif (wsClose && type === wsClose && socket) {\r\n\t\t\t\tsocket.close(1000, 'socket closed');\r\n\t\t\t\tconnected = false;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (wsSendMessage && type === wsSendMessage && socket) {\r\n\t\t\t\tconst message = token ? { ...payload, token } : { ...payload };\r\n\t\t\t\tsocket.send(JSON.stringify(message));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tnext(action);\r\n\t};\r\n};\r\n\r\n","import { PayloadAction } from '@reduxjs/toolkit';\r\nimport { Orders } from '../../model/order';\r\nimport {\r\n\tWS_CONNECTION_START,\r\n\tWS_CONNECTION_CLOSE,\r\n\tWS_SEND_MESSAGE,\r\n\tWS_CONNECTION_SUCCESS,\r\n\tWS_CONNECTION_ERROR,\r\n\tWS_CONNECTION_CLOSED,\r\n\tWS_GET_MESSAGE\r\n} from '../constants/ws';\r\n\r\n\r\nexport const wsActions = {\r\n\twsInit: WS_CONNECTION_START,\r\n\twsClose: WS_CONNECTION_CLOSE,\r\n\twsSendMessage: WS_SEND_MESSAGE,\r\n\tonOpen: WS_CONNECTION_SUCCESS,\r\n\tonClose: WS_CONNECTION_CLOSED,\r\n\tonError: WS_CONNECTION_ERROR,\r\n\tonMessage: WS_GET_MESSAGE\r\n};\r\n\r\nexport interface IWsConnectionStartAction {\r\n\treadonly type: typeof WS_CONNECTION_START;\r\n}\r\n\r\nexport interface IWsConnectionCloseAction {\r\n\treadonly type: typeof WS_CONNECTION_CLOSE;\r\n}\r\n\r\nexport interface IWsSendMessageAction {\r\n\treadonly type: typeof WS_SEND_MESSAGE;\r\n}\r\n\r\nexport interface IWsConnectionSuccessAction {\r\n\treadonly type: typeof WS_CONNECTION_SUCCESS;\r\n\tpayload: PayloadAction\r\n}\r\n\r\nexport interface IWsConnectionErrorAction {\r\n\treadonly type: typeof WS_CONNECTION_ERROR;\r\n\tpayload: PayloadAction\r\n}\r\n\r\nexport interface IWsConnectionClosedAction {\r\n\treadonly type: typeof WS_CONNECTION_CLOSED;\r\n\tpayload: PayloadAction\r\n}\r\n\r\nexport interface IWsGetMessageAction {\r\n\treadonly type: typeof WS_GET_MESSAGE;\r\n\tpayload: Orders\r\n}\r\n\r\nexport type TWSActionsActions =\r\n\t| IWsConnectionStartAction\r\n\t| IWsConnectionCloseAction\r\n\t| IWsSendMessageAction\r\n\t| IWsConnectionSuccessAction\r\n\t| IWsConnectionErrorAction\r\n\t| IWsConnectionClosedAction\r\n\t| IWsGetMessageAction;","import { PayloadAction } from '@reduxjs/toolkit';\r\nimport { Orders } from '../../model/order';\r\nimport {\r\n\tWS_CONNECTION_START_AUTH,\r\n\tWS_CONNECTION_CLOSE_AUTH,\r\n\tWS_SEND_MESSAGE_AUTH,\r\n\tWS_CONNECTION_SUCCESS_AUTH,\r\n\tWS_CONNECTION_ERROR_AUTH,\r\n\tWS_CONNECTION_CLOSED_AUTH,\r\n\tWS_GET_MESSAGE_AUTH\r\n} from '../constants/ws-auth';\r\n\r\nexport const wsActionsAuth = {\r\n\twsInit: WS_CONNECTION_START_AUTH,\r\n\twsClose: WS_CONNECTION_CLOSE_AUTH,\r\n\twsSendMessage: WS_SEND_MESSAGE_AUTH,\r\n\tonOpen: WS_CONNECTION_SUCCESS_AUTH,\r\n\tonClose: WS_CONNECTION_CLOSED_AUTH,\r\n\tonError: WS_CONNECTION_ERROR_AUTH,\r\n\tonMessage: WS_GET_MESSAGE_AUTH\r\n};\r\n\r\n/***/\r\nexport interface IWsConnectionStartAuthAction {\r\n\treadonly type: typeof WS_CONNECTION_START_AUTH;\r\n}\r\n\r\nexport interface IWsConnectionCloseAuthAction {\r\n\treadonly type: typeof WS_CONNECTION_CLOSE_AUTH;\r\n}\r\n\r\nexport interface IWsSendMessageAuthAction {\r\n\treadonly type: typeof WS_SEND_MESSAGE_AUTH;\r\n}\r\n\r\nexport interface IWsConnectionSuccessAuthAction {\r\n\treadonly type: typeof WS_CONNECTION_SUCCESS_AUTH;\r\n\tpayload: PayloadAction\r\n}\r\n\r\nexport interface IWsConnectionErrorAuthAction {\r\n\treadonly type: typeof WS_CONNECTION_ERROR_AUTH;\r\n\tpayload: PayloadAction\r\n}\r\n\r\nexport interface IWsConnectionClosedAuthAction {\r\n\treadonly type: typeof WS_CONNECTION_CLOSED_AUTH;\r\n\tpayload: PayloadAction\r\n}\r\n\r\nexport interface IWsGetMessageAuthAction {\r\n\treadonly type: typeof WS_GET_MESSAGE_AUTH;\r\n\tpayload: Orders\r\n}\r\n\r\nexport type TWSActionsAuthActions =\r\n\t| IWsConnectionStartAuthAction\r\n\t| IWsConnectionCloseAuthAction\r\n\t| IWsSendMessageAuthAction\r\n\t| IWsConnectionSuccessAuthAction\r\n\t| IWsConnectionErrorAuthAction\r\n\t| IWsConnectionClosedAuthAction\r\n\t| IWsGetMessageAuthAction;","import { createStore, applyMiddleware, compose } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport { rootReducer } from './reducers';\r\nimport { socketMiddleware } from '../services/middleware';\r\nimport { WS_URL, WS_URL_AUTH } from '../constants/config';\r\nimport { wsActions } from './actions/ws';\r\nimport { wsActionsAuth } from './actions/ws-auth';\r\n\r\n\r\ndeclare global {\r\n\tinterface Window {\r\n\t\t__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose;\r\n\t}\r\n}\r\n\r\nexport const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst enhancer = composeEnhancers(\r\n\tapplyMiddleware(thunk,\r\n\t socketMiddleware(WS_URL, wsActions, false), \r\n\t socketMiddleware(WS_URL_AUTH, wsActionsAuth, true))\r\n);\r\n\r\nexport const store = createStore(rootReducer, enhancer);\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport { Provider } from 'react-redux';\r\nimport App from './components/app/app';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport { store } from './services/store'\r\n\r\nReactDOM.render(\r\n  <Router>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </Router>, document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"order_title__3O063\",\"ingredient\":\"order_ingredient__wErLa\",\"status\":\"order_status__IpXJo\",\"container\":\"order_container__22RNj\",\"icon\":\"order_icon__14YAB\",\"image\":\"order_image__Kkw6O\",\"list\":\"order_list__32KBn\",\"list-item\":\"order_list-item__LdOlV\",\"info\":\"order_info__1laGU\",\"status_color_red\":\"order_status_color_red__3oZOl\",\"status_color_white\":\"order_status_color_white__1qoFQ\",\"status_color_green\":\"order_status_color_green__1cOCO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"orders-item\":\"orders-item_orders-item__pJWt-\",\"orders-info\":\"orders-item_orders-info__1F6JB\",\"status_color_white\":\"orders-item_status_color_white__3HleQ\",\"status_color_green\":\"orders-item_status_color_green__rx0-1\",\"icon\":\"orders-item_icon__24VJc\",\"image\":\"orders-item_image__bTTb7\",\"list\":\"orders-item_list__1_MTk\",\"list-item\":\"orders-item_list-item__1Fmxk\",\"overlay\":\"orders-item_overlay__2zvAh\",\"status_color_yellow\":\"orders-item_status_color_yellow__3GVCe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"orders-list_container__2mO_Z\",\"table\":\"orders-list_table__1hz3K\",\"list\":\"orders-list_list__3Bu3g\",\"list_color_green\":\"orders-list_list_color_green__1x6Ke\",\"count\":\"orders-list_count__1UlqR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"conteainer\":\"ingredient-details_conteainer__2B2P9\",\"title\":\"ingredient-details_title__1bGjV\",\"info\":\"ingredient-details_info__mOqEY\",\"item\":\"ingredient-details_item__3zRPe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"profile-navigation_link__1c4gR\",\"link_active\":\"profile-navigation_link_active__m-ln2\",\"list-nav\":\"profile-navigation_list-nav__1xC9W\",\"nav\":\"profile-navigation_nav__2TBSz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"body\":\"modal_body__118eq\",\"header\":\"modal_header__2l_2f\",\"title\":\"modal_title__12slb\",\"container\":\"modal_container__3KFI2\",\"close-icon\":\"modal_close-icon__3ntAn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"login_container__2vXOB\",\"title\":\"login_title__3iwNq\",\"form\":\"login_form__1eTuS\",\"link\":\"login_link__1Z2Uw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"ingredients_list__tCvEF\",\"list-item\":\"ingredients_list-item__5oA9O\",\"link\":\"ingredients_link__2P_XF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"burger-constructor_container__3QBmr\",\"burger-container\":\"burger-constructor_burger-container__1JY3F\",\"burger-container_active\":\"burger-constructor_burger-container_active__2S9LF\",\"burger-container_candrop\":\"burger-constructor_burger-container_candrop__3-e3B\",\"list\":\"burger-constructor_list__3dJvw\",\"item_without-icon\":\"burger-constructor_item_without-icon__22Fxe\",\"order\":\"burger-constructor_order__Wp1GW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"register_container__1vmd1\",\"title\":\"register_title__1NLGA\",\"form\":\"register_form__1WuF5\",\"link\":\"register_link__3hhR7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"forgot-password_container__uGH-c\",\"form\":\"forgot-password_form__31mPu\",\"title\":\"forgot-password_title__2gP_7\",\"link\":\"forgot-password_link__1W4Zi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"reset-password_container__1wp6r\",\"form\":\"reset-password_form__27W6W\",\"title\":\"reset-password_title__3Ym1i\",\"link\":\"reset-password_link__36qy6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"burger-ingredient_card__2ekYU\",\"image\":\"burger-ingredient_image__20d82\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order\":\"order-details_order__2DT72\",\"title\":\"order-details_title__382DF\",\"image\":\"order-details_image__2uRg9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"user-form_form__39WvI\",\"buttons\":\"user-form_buttons__1f7Vr\",\"button\":\"user-form_button__2X2VA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"user-orders_list__2pBAA\",\"list-item\":\"user-orders_list-item__3gtET\",\"burger-link\":\"user-orders_burger-link__1suBz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"feed-orders_list__2yjuK\",\"list-item\":\"feed-orders_list-item__1qpUJ\",\"link\":\"feed-orders_link__3cb5f\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"burger-ingredients_link__SN3xY\",\"item\":\"burger-ingredients_item__OIkSL\",\"item_active\":\"burger-ingredients_item_active__PplD9\",\"menu\":\"burger-ingredients_menu__1ihol\",\"container\":\"burger-ingredients_container__3JFTf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"burger-union_main__375rU\",\"columns\":\"burger-union_columns__VRnN_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"profile_main__1amPc\",\"container\":\"profile_container__2iR2d\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mk-spinner-wrap\":\"preloader_mk-spinner-wrap__2GsxL\",\"mk-spinner-bubbles\":\"preloader_mk-spinner-bubbles__DsEjE\",\"a\":\"preloader_a__1UZ0t\",\"b\":\"preloader_b__1-QV2\"};"],"sourceRoot":""}